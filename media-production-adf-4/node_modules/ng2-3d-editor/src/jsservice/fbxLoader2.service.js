"use strict";
var THREE = require("three");
THREE.FBXLoader = function (manager) {
    THREE.Loader.call(this);
    this.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;
    this.fileLoader = new THREE.FileLoader(this.manager);
    this.textureLoader = new THREE.TextureLoader(this.manager);
};
Object.assign(THREE.FBXLoader.prototype, THREE.Loader.prototype);
THREE.FBXLoader.prototype.constructor = THREE.FBXLoader;
Object.assign(THREE.FBXLoader.prototype, {
    load: function (url, onLoad, onProgress, onError) {
        var self = this;
        var resourceDirectory = url.split(/[\\\/]/);
        resourceDirectory.pop();
        resourceDirectory = resourceDirectory.join('/');
        this.fileLoader.load(url, function (text) {
            if (!isFbxFormatASCII(text)) {
                console.error('FBXLoader: FBX Binary format not supported.');
                self.manager.itemError(url);
                return;
            }
            if (getFbxVersion(text) < 7000) {
                console.error('FBXLoader: FBX version not supported for file at ' + url + ', FileVersion: ' + getFbxVersion(text));
                self.manager.itemError(url);
                return;
            }
            var scene = self.parse(text, resourceDirectory);
            onLoad(scene);
        }, onProgress, onError);
    },
    parse: function (FBXText, resourceDirectory) {
        var loader = this;
        var FBXTree = new TextParser().parse(FBXText);
        var connections = parseConnections(FBXTree);
        var textures = parseTextures(FBXTree);
        var materials = parseMaterials(FBXTree, textures, connections);
        var deformerMap = parseDeformers(FBXTree, connections);
        var geometryMap = parseGeometries(FBXTree, connections, deformerMap);
        var sceneGraph = parseScene(FBXTree, connections, deformerMap, geometryMap, materials);
        return sceneGraph;
        function parseConnections(FBXTree) {
            var connectionMap = new Map();
            if ('Connections' in FBXTree) {
                var connectionArray = FBXTree.Connections.properties.connections;
                connectionArray.forEach(function (connection) {
                    if (!connectionMap.has(connection[0])) {
                        connectionMap.set(connection[0], {
                            parents: [],
                            children: []
                        });
                    }
                    var parentRelationship = { ID: connection[1], relationship: connection[2] };
                    connectionMap.get(connection[0]).parents.push(parentRelationship);
                    if (!connectionMap.has(connection[1])) {
                        connectionMap.set(connection[1], {
                            parents: [],
                            children: []
                        });
                    }
                    var childRelationship = { ID: connection[0], relationship: connection[2] };
                    connectionMap.get(connection[1]).children.push(childRelationship);
                });
            }
            return connectionMap;
        }
        function parseTextures(FBXTree) {
            var textureMap = new Map();
            if ('Texture' in FBXTree.Objects.subNodes) {
                var textureNodes = FBXTree.Objects.subNodes.Texture;
                for (var nodeID in textureNodes) {
                    var texture = parseTexture(textureNodes[nodeID]);
                    textureMap.set(parseInt(nodeID), texture);
                }
            }
            return textureMap;
            function parseTexture(textureNode) {
                var FBX_ID = textureNode.id;
                var name = textureNode.name;
                var filePath = textureNode.properties.FileName;
                var split = filePath.split(/[\\\/]/);
                if (split.length > 0) {
                    var fileName = split[split.length - 1];
                }
                else {
                    var fileName = filePath;
                }
                var texture = loader.textureLoader.load(resourceDirectory + '/' + fileName);
                texture.name = name;
                texture.FBX_ID = FBX_ID;
                return texture;
            }
        }
        function parseMaterials(FBXTree, textureMap, connections) {
            var materialMap = new Map();
            if ('Material' in FBXTree.Objects.subNodes) {
                var materialNodes = FBXTree.Objects.subNodes.Material;
                for (var nodeID in materialNodes) {
                    var material = parseMaterial(materialNodes[nodeID], textureMap, connections);
                    materialMap.set(parseInt(nodeID), material);
                }
            }
            return materialMap;
            function parseMaterial(materialNode, textureMap, connections) {
                var FBX_ID = materialNode.id;
                var name = materialNode.attrName;
                var type = materialNode.properties.ShadingModel;
                var children = connections.get(FBX_ID).children;
                var parameters = parseParameters(materialNode.properties, textureMap, children);
                var material;
                switch (type) {
                    case 'phong':
                        material = new THREE.MeshPhongMaterial();
                        break;
                    case 'lambert':
                        material = new THREE.MeshLambertMaterial();
                        break;
                    default:
                        console.warn('No implementation given for material type ' + type + ' in FBXLoader.js.  Defaulting to basic material');
                        material = new THREE.MeshBasicMaterial({ color: 0x3300ff });
                        break;
                }
                material.setValues(parameters);
                material.name = name;
                return material;
                function parseParameters(properties, textureMap, childrenRelationships) {
                    var parameters = {};
                    if (properties.Diffuse) {
                        parameters.color = parseColor(properties.Diffuse);
                    }
                    if (properties.Specular) {
                        parameters.specular = parseColor(properties.Specular);
                    }
                    if (properties.Shininess) {
                        parameters.shininess = properties.Shininess.value;
                    }
                    if (properties.Emissive) {
                        parameters.emissive = parseColor(properties.Emissive);
                    }
                    if (properties.EmissiveFactor) {
                        parameters.emissiveIntensity = properties.EmissiveFactor.value;
                    }
                    if (properties.Opacity) {
                        parameters.opacity = properties.Opacity.value;
                    }
                    if (parameters.opacity < 1.0) {
                        parameters.transparent = true;
                    }
                    childrenRelationships.forEach(function (relationship) {
                        var type = relationship.relationship;
                        switch (type) {
                            case " \"AmbientColor":
                                break;
                            case " \"DiffuseColor":
                                parameters.map = textureMap.get(relationship.ID);
                                break;
                            default:
                                console.warn('Unknown texture application of type ' + type + ', skipping texture');
                                break;
                        }
                    });
                    return parameters;
                }
            }
        }
        function parseDeformers(FBXTree, connections) {
            var skeletonMap = new Map();
            if ('Deformer' in FBXTree.Objects.subNodes) {
                var DeformerNodes = FBXTree.Objects.subNodes.Deformer;
                for (var nodeID in DeformerNodes) {
                    var deformerNode = DeformerNodes[nodeID];
                    if (deformerNode.attrType === 'Skin') {
                        var conns = connections.get(parseInt(nodeID));
                        var skeleton = parseSkeleton(conns, DeformerNodes);
                        skeleton.FBX_ID = parseInt(nodeID);
                        skeletonMap.set(parseInt(nodeID), skeleton);
                    }
                }
            }
            return skeletonMap;
            function parseSkeleton(connections, DeformerNodes) {
                var subDeformers = new Map();
                var subDeformerArray = [];
                connections.children.forEach(function (child) {
                    var subDeformerNode = DeformerNodes[child.ID];
                    var subDeformer = {
                        FBX_ID: child.ID,
                        indices: parseIntArray(subDeformerNode.subNodes.Indexes.properties.a),
                        weights: parseFloatArray(subDeformerNode.subNodes.Weights.properties.a),
                        transform: parseMatrixArray(subDeformerNode.subNodes.Transform.properties.a),
                        transformLink: parseMatrixArray(subDeformerNode.subNodes.TransformLink.properties.a),
                        linkMode: subDeformerNode.properties.Mode
                    };
                    subDeformers.set(child.ID, subDeformer);
                    subDeformerArray.push(subDeformer);
                });
                return {
                    map: subDeformers,
                    array: subDeformerArray,
                    bones: []
                };
            }
        }
        function parseGeometries(FBXTree, connections, deformerMap) {
            var geometryMap = new Map();
            if ('Geometry' in FBXTree.Objects.subNodes) {
                var geometryNodes = FBXTree.Objects.subNodes.Geometry;
                for (var nodeID in geometryNodes) {
                    var relationships = connections.get(parseInt(nodeID));
                    var geo = parseGeometry(geometryNodes[nodeID], relationships, deformerMap);
                    geometryMap.set(parseInt(nodeID), geo);
                }
            }
            return geometryMap;
            function parseGeometry(geometryNode, relationships, deformerMap) {
                if (geometryNode.attrType === 'Mesh') {
                    return parseMeshGeometry(geometryNode, relationships, deformerMap);
                }
                else if (geometryNode.attrType === 'NurbsCurve') {
                    return parseNurbsGeometry(geometryNode, relationships);
                }
                function parseMeshGeometry(geometryNode, relationships, deformerMap) {
                    var FBX_ID = geometryNode.id;
                    var name = geometryNode.attrName;
                    for (var i = 0; i < relationships.children.length; ++i) {
                        if (deformerMap.has(relationships.children[i].ID)) {
                            var deformer = deformerMap.get(relationships.children[i].ID);
                            break;
                        }
                    }
                    var geometry = genGeometry(geometryNode, deformer);
                    return geometry;
                    function genGeometry(geometryNode, deformer) {
                        var geometry = new Geometry();
                        var vertexBuffer = parseFloatArray(geometryNode.subNodes.Vertices.properties.a);
                        var indexBuffer = parseIntArray(geometryNode.subNodes.PolygonVertexIndex.properties.a);
                        if ('LayerElementNormal' in geometryNode.subNodes) {
                            var normalInfo = getNormals(geometryNode);
                        }
                        if ('LayerElementUV' in geometryNode.subNodes) {
                            var uvInfo = getUVs(geometryNode);
                        }
                        if ('LayerElementMaterial' in geometryNode.subNodes) {
                            var materialInfo = getMaterials(geometryNode);
                        }
                        var faceVertexBuffer = [];
                        var polygonIndex = 0;
                        for (var polygonVertexIndex = 0; polygonVertexIndex < indexBuffer.length; ++polygonVertexIndex) {
                            var endOfFace;
                            var vertexIndex = indexBuffer[polygonVertexIndex];
                            if (indexBuffer[polygonVertexIndex] < 0) {
                                vertexIndex = vertexIndex ^ -1;
                                indexBuffer[polygonVertexIndex] = vertexIndex;
                                endOfFace = true;
                            }
                            var vertex = new Vertex();
                            var weightIndices = [];
                            var weights = [];
                            vertex.position.fromArray(vertexBuffer, vertexIndex * 3);
                            if (deformer) {
                                for (var j = 0; j < deformer.array.length; ++j) {
                                    var index = deformer.array[j].indices.findIndex(function (index) {
                                        return index === indexBuffer[polygonVertexIndex];
                                    });
                                    if (index !== -1) {
                                        weights.push(deformer.array[j].weights[index]);
                                        weightIndices.push(j);
                                    }
                                }
                                if (weights.length > 4) {
                                    console.warn('FBXLoader: Vertex has more than 4 skinning weights assigned to vertex.  Deleting additional weights.');
                                    var WIndex = [0, 0, 0, 0];
                                    var Weight = [0, 0, 0, 0];
                                    for (var polygonVertexIndex = 0; polygonVertexIndex < weights.length; ++polygonVertexIndex) {
                                        var currentWeight = weights[polygonVertexIndex];
                                        var currentIndex = weightIndices[polygonVertexIndex];
                                        for (var j = 0; j < Weight.length; ++j) {
                                            if (currentWeight > Weight[j]) {
                                                var tmp = Weight[j];
                                                Weight[j] = currentWeight;
                                                currentWeight = tmp;
                                                tmp = WIndex[j];
                                                WIndex[j] = currentIndex;
                                                currentIndex = tmp;
                                            }
                                        }
                                    }
                                    weightIndices = WIndex;
                                    weights = Weight;
                                }
                                for (var i = weights.length; i < 4; i++) {
                                    weights[i] = 0;
                                    weightIndices[i] = 0;
                                }
                                vertex.skinWeights.fromArray(weights);
                                vertex.skinIndices.fromArray(weightIndices);
                            }
                            if (normalInfo) {
                                vertex.normal.fromArray(getData(polygonVertexIndex, polygonIndex, vertexIndex, normalInfo));
                            }
                            if (uvInfo) {
                                vertex.uv.fromArray(getData(polygonVertexIndex, polygonIndex, vertexIndex, uvInfo));
                            }
                            faceVertexBuffer.push(vertex);
                            if (endOfFace) {
                                var face = new Face();
                                var materials = getData(polygonVertexIndex, polygonIndex, vertexIndex, materialInfo);
                                face.genTrianglesFromVertices(faceVertexBuffer);
                                face.materialIndex = materials[0];
                                geometry.faces.push(face);
                                faceVertexBuffer = [];
                                polygonIndex++;
                                endOfFace = false;
                            }
                        }
                        var bufferInfo = geometry.flattenToBuffers();
                        var geo = new THREE.BufferGeometry();
                        geo.name = geometryNode.name;
                        geo.addAttribute('position', new THREE.BufferAttribute(new Float32Array(bufferInfo.vertexBuffer), 3));
                        if (bufferInfo.normalBuffer.length > 0) {
                            geo.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(bufferInfo.normalBuffer), 3));
                        }
                        if (bufferInfo.uvBuffer.length > 0) {
                            geo.addAttribute('uv', new THREE.BufferAttribute(new Float32Array(bufferInfo.uvBuffer), 2));
                        }
                        if (deformer) {
                            geo.addAttribute('skinIndex', new THREE.BufferAttribute(new Float32Array(bufferInfo.skinIndexBuffer), 4));
                            geo.addAttribute('skinWeight', new THREE.BufferAttribute(new Float32Array(bufferInfo.skinWeightBuffer), 4));
                            geo.FBX_Deformer = deformer;
                        }
                        var prevMaterialIndex = bufferInfo.materialIndexBuffer[0];
                        var startIndex = 0;
                        for (var materialBufferIndex = 0; materialBufferIndex < bufferInfo.materialIndexBuffer.length; ++materialBufferIndex) {
                            if (bufferInfo.materialIndexBuffer[materialBufferIndex] !== prevMaterialIndex) {
                                geo.addGroup(startIndex, materialBufferIndex - startIndex, prevMaterialIndex);
                                startIndex = materialBufferIndex;
                                prevMaterialIndex = bufferInfo.materialIndexBuffer[materialBufferIndex];
                            }
                        }
                        return geo;
                        function getNormals(geometryNode) {
                            var NormalNode = geometryNode.subNodes.LayerElementNormal[0];
                            var mappingType = NormalNode.properties.MappingInformationType;
                            var referenceType = NormalNode.properties.ReferenceInformationType;
                            var buffer = parseFloatArray(NormalNode.subNodes.Normals.properties.a);
                            var indexBuffer = [];
                            if (referenceType === 'IndexToDirect') {
                                indexBuffer = parseIntArray(NormalNode.subNodes.NormalIndex.properties.a);
                            }
                            return {
                                dataSize: 3,
                                buffer: buffer,
                                indices: indexBuffer,
                                mappingType: mappingType,
                                referenceType: referenceType
                            };
                        }
                        function getUVs(geometryNode) {
                            var UVNode = geometryNode.subNodes.LayerElementUV[0];
                            var mappingType = UVNode.properties.MappingInformationType;
                            var referenceType = UVNode.properties.ReferenceInformationType;
                            var buffer = parseFloatArray(UVNode.subNodes.UV.properties.a);
                            var indexBuffer = [];
                            if (referenceType === 'IndexToDirect') {
                                indexBuffer = parseIntArray(UVNode.subNodes.UVIndex.properties.a);
                            }
                            return {
                                dataSize: 2,
                                buffer: buffer,
                                indices: indexBuffer,
                                mappingType: mappingType,
                                referenceType: referenceType
                            };
                        }
                        function getMaterials(geometryNode) {
                            var MaterialNode = geometryNode.subNodes.LayerElementMaterial[0];
                            var mappingType = MaterialNode.properties.MappingInformationType;
                            var referenceType = MaterialNode.properties.ReferenceInformationType;
                            var materialIndexBuffer = parseIntArray(MaterialNode.subNodes.Materials.properties.a);
                            var materialIndices = [];
                            materialIndexBuffer.forEach(function (materialIndex, index) {
                                materialIndices.push(index);
                            });
                            return {
                                dataSize: 1,
                                buffer: materialIndexBuffer,
                                indices: materialIndices,
                                mappingType: mappingType,
                                referenceType: referenceType
                            };
                        }
                        function getData(polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {
                            var GetData = {
                                ByPolygonVertex: {
                                    Direct: function (polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {
                                        return infoObject.buffer.slice((polygonVertexIndex * infoObject.dataSize), (polygonVertexIndex * infoObject.dataSize) + infoObject.dataSize);
                                    },
                                    IndexToDirect: function (polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {
                                        var index = infoObject.indices[polygonVertexIndex];
                                        return infoObject.buffer.slice((index * infoObject.dataSize), (index * infoObject.dataSize) + infoObject.dataSize);
                                    }
                                },
                                ByPolygon: {
                                    Direct: function (polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {
                                        return infoObject.buffer.slice(polygonIndex * infoObject.dataSize, polygonIndex * infoObject.dataSize + infoObject.dataSize);
                                    },
                                    IndexToDirect: function (polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {
                                        var index = infoObject.indices[polygonIndex];
                                        return infoObject.buffer.slice(index * infoObject.dataSize, index * infoObject.dataSize + infoObject.dataSize);
                                    }
                                },
                                AllSame: {
                                    IndexToDirect: function (polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {
                                        return infoObject.buffer.slice(infoObject.indices[0] * infoObject.dataSize, infoObject.indices[0] * infoObject.dataSize + infoObject.dataSize);
                                    }
                                }
                            };
                            return GetData[infoObject.mappingType][infoObject.referenceType](polygonVertexIndex, polygonIndex, vertexIndex, infoObject);
                        }
                    }
                }
                function parseNurbsGeometry(geometryNode, relationships) {
                    if (THREE.NURBSCurve === undefined) {
                        console.error("THREE.FBXLoader relies on THREE.NURBSCurve for any nurbs present in the model.  Nurbs will show up as empty geometry.");
                        return new THREE.BufferGeometry();
                    }
                    var order = parseInt(geometryNode.properties.Order);
                    if (isNaN(order)) {
                        console.error("FBXLoader: Invalid Order " + geometryNode.properties.Order + " given for geometry ID: " + geometryNode.id);
                        return new THREE.BufferGeometry();
                    }
                    var knots = parseFloatArray(geometryNode.subNodes.KnotVector.properties.a);
                    var controlPoints = [];
                    var pointsValues = parseFloatArray(geometryNode.subNodes.Points.properties.a);
                    for (var i = 0; i < pointsValues.length; i += 4) {
                        controlPoints.push(new THREE.Vector4(pointsValues[i], pointsValues[i + 1], pointsValues[i + 2], pointsValues[i + 3]));
                    }
                    if (geometryNode.properties.Form === 'Closed') {
                        controlPoints.push(controlPoints[0]);
                    }
                    var curve = new THREE.NURBSCurve(order - 1, knots, controlPoints);
                    var vertices = curve.getPoints(controlPoints.length * 1.5);
                    var vertexBuffer = [];
                    vertices.forEach(function (position) {
                        var array = position.toArray();
                        vertexBuffer = vertexBuffer.concat(array);
                    });
                    var geometry = new THREE.BufferGeometry();
                    geometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(vertexBuffer), 3));
                    return geometry;
                }
            }
        }
        function parseScene(FBXTree, connections, deformerMap, geometryMap, materialMap) {
            var sceneGraph = new THREE.Group();
            var ModelNode = FBXTree.Objects.subNodes.Model;
            var modelArray = [];
            var modelMap = new Map();
            for (var nodeID in ModelNode) {
                var id = parseInt(nodeID);
                var node = ModelNode[nodeID];
                var conns = connections.get(id);
                var model = null;
                for (var i = 0; i < conns.parents.length; ++i) {
                    deformerMap.forEach(function (deformer) {
                        if (deformer.map.has(conns.parents[i].ID)) {
                            model = new THREE.Bone();
                            var index = deformer.array.findIndex(function (subDeformer) {
                                return subDeformer.FBX_ID === conns.parents[i].ID;
                            });
                            deformer.bones[index] = model;
                        }
                    });
                }
                if (!model) {
                    switch (node.attrType) {
                        case "Mesh":
                            var geometry = null;
                            var material = null;
                            var materials = [];
                            conns.children.forEach(function (child) {
                                if (geometryMap.has(child.ID)) {
                                    geometry = geometryMap.get(child.ID);
                                }
                                if (materialMap.has(child.ID)) {
                                    materials.push(materialMap.get(child.ID));
                                }
                            });
                            if (materials.length > 1) {
                                material = new THREE.MultiMaterial(materials);
                            }
                            else if (materials.length > 0) {
                                material = materials[0];
                            }
                            else {
                                material = new THREE.MeshBasicMaterial({ color: 0x3300ff });
                            }
                            if (geometry.FBX_Deformer) {
                                materials.forEach(function (material) {
                                    material.skinning = true;
                                });
                                material.skinning = true;
                                model = new THREE.SkinnedMesh(geometry, material);
                            }
                            else {
                                model = new THREE.Mesh(geometry, material);
                            }
                            break;
                        case "NurbsCurve":
                            var geometry = null;
                            conns.children.forEach(function (child) {
                                if (geometryMap.has(child.ID)) {
                                    geometry = geometryMap.get(child.ID);
                                }
                            });
                            material = new THREE.LineBasicMaterial({ color: 0x3300ff, linewidth: 5 });
                            model = new THREE.Line(geometry, material);
                            break;
                        default:
                            model = new THREE.Object3D();
                            break;
                    }
                }
                model.name = node.attrName.replace(/:/, '').replace(/_/, '').replace(/-/, '');
                model.FBX_ID = id;
                modelArray.push(model);
                modelMap.set(id, model);
            }
            modelArray.forEach(function (model) {
                var node = ModelNode[model.FBX_ID];
                if ('Lcl_Translation' in node.properties) {
                    model.position.fromArray(parseFloatArray(node.properties.Lcl_Translation.value));
                }
                if ('Lcl_Rotation' in node.properties) {
                    var rotation = parseFloatArray(node.properties.Lcl_Rotation.value).map(function (value) {
                        return value * Math.PI / 180;
                    });
                    rotation.push('ZYX');
                    model.rotation.fromArray(rotation);
                }
                if ('Lcl_Scaling' in node.properties) {
                    model.scale.fromArray(parseFloatArray(node.properties.Lcl_Scaling.value));
                }
                var conns = connections.get(model.FBX_ID);
                for (var parentIndex = 0; parentIndex < conns.parents.length; parentIndex++) {
                    var pIndex = modelArray.findIndex(function (mod) {
                        return mod.FBX_ID === conns.parents[parentIndex].ID;
                    });
                    if (pIndex > -1) {
                        modelArray[pIndex].add(model);
                        break;
                    }
                }
                if (model.parent === null) {
                    sceneGraph.add(model);
                }
            });
            sceneGraph.updateMatrixWorld(true);
            var BindPoseNode = FBXTree.Objects.subNodes.Pose;
            for (var nodeID in BindPoseNode) {
                if (BindPoseNode[nodeID].attrType === 'BindPose') {
                    BindPoseNode = BindPoseNode[nodeID];
                    break;
                }
            }
            if (BindPoseNode) {
                var PoseNode = BindPoseNode.subNodes.PoseNode;
                var worldMatrices = new Map();
                PoseNode.forEach(function (node) {
                    var rawMatWrd = parseMatrixArray(node.subNodes.Matrix.properties.a);
                    worldMatrices.set(parseInt(node.id), rawMatWrd);
                });
            }
            deformerMap.forEach(function (deformer, FBX_ID) {
                deformer.array.forEach(function (subDeformer, subDeformerIndex) {
                    var bone = deformer.bones[subDeformerIndex];
                    if (!worldMatrices.has(bone.FBX_ID)) {
                        return;
                    }
                    var mat = worldMatrices.get(bone.FBX_ID);
                    bone.matrixWorld.copy(mat);
                });
                deformer.skeleton = new THREE.Skeleton(deformer.bones);
                var conns = connections.get(FBX_ID);
                conns.parents.forEach(function (parent) {
                    if (geometryMap.has(parent.ID)) {
                        var geoID = parent.ID;
                        var geoConns = connections.get(geoID);
                        for (var i = 0; i < geoConns.parents.length; ++i) {
                            if (modelMap.has(geoConns.parents[i].ID)) {
                                var model = modelMap.get(geoConns.parents[i].ID);
                                model.bind(deformer.skeleton, model.matrixWorld);
                                break;
                            }
                        }
                    }
                });
            });
            modelArray.forEach(function (model) {
                var node = ModelNode[model.FBX_ID];
                if ('Lcl_Translation' in node.properties) {
                    model.position.fromArray(parseFloatArray(node.properties.Lcl_Translation.value));
                }
                if ('Lcl_Rotation' in node.properties) {
                    var rotation = parseFloatArray(node.properties.Lcl_Rotation.value).map(function (value) {
                        return value * Math.PI / 180;
                    });
                    rotation.push('ZYX');
                    model.rotation.fromArray(rotation);
                }
                if ('Lcl_Scaling' in node.properties) {
                    model.scale.fromArray(parseFloatArray(node.properties.Lcl_Scaling.value));
                }
            });
            sceneGraph.skeleton = {
                bones: modelArray
            };
            var animations = parseAnimations(FBXTree, connections, sceneGraph);
            addAnimations(sceneGraph, animations);
            return sceneGraph;
        }
        function parseAnimations(FBXTree, connections, sceneGraph) {
            var rawNodes = FBXTree.Objects.subNodes.AnimationCurveNode;
            var rawCurves = FBXTree.Objects.subNodes.AnimationCurve;
            var rawLayers = FBXTree.Objects.subNodes.AnimationLayer;
            var rawStacks = FBXTree.Objects.subNodes.AnimationStack;
            var returnObject = {
                curves: new Map(),
                layers: new Map(),
                stacks: new Map(),
                length: 0,
                fps: 30,
                frames: 0
            };
            var animationCurveNodes = [];
            for (var nodeID in rawNodes) {
                if (nodeID.match(/\d+/)) {
                    var animationNode = parseAnimationNode(FBXTree, rawNodes[nodeID], connections, sceneGraph);
                    animationCurveNodes.push(animationNode);
                }
            }
            var tmpMap = new Map();
            for (var animationCurveNodeIndex = 0; animationCurveNodeIndex < animationCurveNodes.length; ++animationCurveNodeIndex) {
                if (animationCurveNodes[animationCurveNodeIndex] === null) {
                    continue;
                }
                tmpMap.set(animationCurveNodes[animationCurveNodeIndex].id, animationCurveNodes[animationCurveNodeIndex]);
            }
            var animationCurves = [];
            for (nodeID in rawCurves) {
                if (nodeID.match(/\d+/)) {
                    var animationCurve = parseAnimationCurve(rawCurves[nodeID]);
                    animationCurves.push(animationCurve);
                    var firstParentConn = connections.get(animationCurve.id).parents[0];
                    var firstParentID = firstParentConn.ID;
                    var firstParentRelationship = firstParentConn.relationship;
                    var axis = '';
                    if (firstParentRelationship.match(/X/)) {
                        axis = 'x';
                    }
                    else if (firstParentRelationship.match(/Y/)) {
                        axis = 'y';
                    }
                    else if (firstParentRelationship.match(/Z/)) {
                        axis = 'z';
                    }
                    else {
                        continue;
                    }
                    tmpMap.get(firstParentID).curves[axis] = animationCurve;
                }
            }
            tmpMap.forEach(function (curveNode) {
                var id = curveNode.containerBoneID;
                if (!returnObject.curves.has(id)) {
                    returnObject.curves.set(id, { T: null, R: null, S: null });
                }
                returnObject.curves.get(id)[curveNode.attr] = curveNode;
            });
            for (var nodeID in rawLayers) {
                var layer = [];
                var children = connections.get(parseInt(nodeID)).children;
                for (var childIndex = 0; childIndex < children.length; childIndex++) {
                    if (tmpMap.has(children[childIndex].ID)) {
                        var curveNode = tmpMap.get(children[childIndex].ID);
                        var boneID = curveNode.containerBoneID;
                        if (layer[boneID] === undefined) {
                            layer[boneID] = {
                                T: null,
                                R: null,
                                S: null
                            };
                        }
                        layer[boneID][curveNode.attr] = curveNode;
                    }
                }
                returnObject.layers.set(parseInt(nodeID), layer);
            }
            for (var nodeID in rawStacks) {
                var layers = [];
                var children = connections.get(parseInt(nodeID)).children;
                var maxTimeStamp = 0;
                var minTimeStamp = Number.MAX_VALUE;
                for (var childIndex = 0; childIndex < children.length; ++childIndex) {
                    if (returnObject.layers.has(children[childIndex].ID)) {
                        var currentLayer = returnObject.layers.get(children[childIndex].ID);
                        layers.push(currentLayer);
                        currentLayer.forEach(function (layer) {
                            if (layer) {
                                getCurveNodeMaxMinTimeStamps(layer);
                            }
                            function getCurveNodeMaxMinTimeStamps(layer) {
                                function getCurveMaxMinTimeStamp(curve) {
                                    function getCurveAxisMaxMinTimeStamps(axis) {
                                        maxTimeStamp = axis.times[axis.times.length - 1] > maxTimeStamp ? axis.times[axis.times.length - 1] : maxTimeStamp;
                                        minTimeStamp = axis.times[0] < minTimeStamp ? axis.times[0] : minTimeStamp;
                                    }
                                    if (curve.x) {
                                        getCurveAxisMaxMinTimeStamps(curve.x);
                                    }
                                    if (curve.y) {
                                        getCurveAxisMaxMinTimeStamps(curve.y);
                                    }
                                    if (curve.z) {
                                        getCurveAxisMaxMinTimeStamps(curve.z);
                                    }
                                }
                                if (layer.R) {
                                    getCurveMaxMinTimeStamp(layer.R.curves);
                                }
                                if (layer.S) {
                                    getCurveMaxMinTimeStamp(layer.S.curves);
                                }
                                if (layer.T) {
                                    getCurveMaxMinTimeStamp(layer.T.curves);
                                }
                            }
                        });
                    }
                }
                if (maxTimeStamp > minTimeStamp) {
                    returnObject.stacks.set(parseInt(nodeID), {
                        name: rawStacks[nodeID].attrName,
                        layers: layers,
                        length: maxTimeStamp - minTimeStamp,
                        frames: (maxTimeStamp - minTimeStamp) * 30
                    });
                }
            }
            return returnObject;
            function parseAnimationNode(FBXTree, animationCurveNode, connections, sceneGraph) {
                var returnObject = {
                    id: animationCurveNode.id,
                    attr: animationCurveNode.attrName,
                    internalID: animationCurveNode.id,
                    attrX: false,
                    attrY: false,
                    attrZ: false,
                    containerBoneID: -1,
                    containerID: -1,
                    curves: {
                        x: null,
                        y: null,
                        z: null
                    }
                };
                if (returnObject.attr.match(/S|R|T/)) {
                    for (var attributeKey in animationCurveNode.properties) {
                        if (attributeKey.match(/X/)) {
                            returnObject.attrX = true;
                        }
                        if (attributeKey.match(/Y/)) {
                            returnObject.attrY = true;
                        }
                        if (attributeKey.match(/Z/)) {
                            returnObject.attrZ = true;
                        }
                    }
                }
                else {
                    return null;
                }
                var conns = connections.get(returnObject.id);
                var containerIndices = conns.parents;
                for (var containerIndicesIndex = containerIndices.length - 1; containerIndicesIndex >= 0; --containerIndicesIndex) {
                    var boneID = sceneGraph.skeleton.bones.findIndex(function (bone) {
                        return bone.FBX_ID === containerIndices[containerIndicesIndex].ID;
                    });
                    if (boneID > -1) {
                        returnObject.containerBoneID = boneID;
                        returnObject.containerID = containerIndices[containerIndicesIndex].ID;
                        break;
                    }
                }
                return returnObject;
            }
            function parseAnimationCurve(animationCurve) {
                return {
                    version: null,
                    id: animationCurve.id,
                    internalID: animationCurve.id,
                    times: parseFloatArray(animationCurve.subNodes.KeyTime.properties.a).map(function (time) {
                        return ConvertFBXTimeToSeconds(time);
                    }),
                    values: parseFloatArray(animationCurve.subNodes.KeyValueFloat.properties.a),
                    attrFlag: parseIntArray(animationCurve.subNodes.KeyAttrFlags.properties.a),
                    attrData: parseFloatArray(animationCurve.subNodes.KeyAttrDataFloat.properties.a)
                };
            }
        }
        function addAnimations(group, animations) {
            if (group.animations === undefined) {
                group.animations = [];
            }
            animations.stacks.forEach(function (stack) {
                var animationData = {
                    name: stack.name,
                    fps: 30,
                    length: stack.length,
                    hierarchy: []
                };
                var bones = group.skeleton.bones;
                bones.forEach(function (bone) {
                    var name = bone.name.replace(/.*:/, '');
                    var parentIndex = bones.findIndex(function (parentBone) {
                        return bone.parent === parentBone;
                    });
                    animationData.hierarchy.push({ parent: parentIndex, name: name, keys: [] });
                });
                for (var frame = 0; frame < stack.frames; frame++) {
                    bones.forEach(function (bone, boneIndex) {
                        var animationNode = stack.layers[0][boneIndex];
                        animationData.hierarchy.forEach(function (node) {
                            if (node.name === bone.name) {
                                node.keys.push(generateKey(animationNode, bone, frame));
                            }
                        });
                    });
                }
                group.animations.push(THREE.AnimationClip.parseAnimation(animationData, bones));
                function generateKey(animationNode, bone, frame) {
                    var key = {
                        time: frame / animations.fps,
                        pos: bone.position.toArray(),
                        rot: bone.quaternion.toArray(),
                        scl: bone.scale.toArray()
                    };
                    if (animationNode === undefined) {
                        return key;
                    }
                    try {
                        if (hasCurve(animationNode, 'T') && hasKeyOnFrame(animationNode.T, frame)) {
                            key.pos = [animationNode.T.curves.x.values[frame], animationNode.T.curves.y.values[frame], animationNode.T.curves.z.values[frame]];
                        }
                        if (hasCurve(animationNode, 'R') && hasKeyOnFrame(animationNode.R, frame)) {
                            var rotationX = degreeToRadian(animationNode.R.curves.x.values[frame]);
                            var rotationY = degreeToRadian(animationNode.R.curves.y.values[frame]);
                            var rotationZ = degreeToRadian(animationNode.R.curves.z.values[frame]);
                            var euler = new THREE.Euler(rotationX, rotationY, rotationZ, 'ZYX');
                            key.rot = new THREE.Quaternion().setFromEuler(euler).toArray();
                        }
                        if (hasCurve(animationNode, 'S') && hasKeyOnFrame(animationNode.S, frame)) {
                            key.scl = [animationNode.S.curves.x.values[frame], animationNode.S.curves.y.values[frame], animationNode.S.curves.z.values[frame]];
                        }
                    }
                    catch (error) {
                        console.log(bone);
                        console.log(error);
                    }
                    return key;
                    function hasCurve(animationNode, attribute) {
                        if (animationNode === undefined) {
                            return false;
                        }
                        var attributeNode = animationNode[attribute];
                        if (!attributeNode) {
                            return false;
                        }
                        return ['x', 'y', 'z'].every(function (key) {
                            return attributeNode.curves[key] !== undefined;
                        });
                    }
                    function hasKeyOnFrame(attributeNode, frame) {
                        return ['x', 'y', 'z'].every(function (key) {
                            return isKeyExistOnFrame(attributeNode.curves[key], frame);
                            function isKeyExistOnFrame(curve, frame) {
                                return curve.values[frame] !== undefined;
                            }
                        });
                    }
                }
            });
        }
        function parseVector3(property) {
            return new THREE.Vector3(parseFloat(property.value.x), parseFloat(property.value.y), parseFloat(property.value.z));
        }
        function parseColor(property) {
            return new THREE.Color().fromArray(parseVector3(property).toArray());
        }
    }
});
function Vertex() {
    this.position = new THREE.Vector3();
    this.normal = new THREE.Vector3();
    this.uv = new THREE.Vector2();
    this.skinIndices = new THREE.Vector4(0, 0, 0, 0);
    this.skinWeights = new THREE.Vector4(0, 0, 0, 0);
}
Object.assign(Vertex.prototype, {
    copy: function (target) {
        var returnVar = target || new Vertex();
        returnVar.position.copy(this.position);
        returnVar.normal.copy(this.normal);
        returnVar.uv.copy(this.uv);
        returnVar.skinIndices.copy(this.skinIndices);
        returnVar.skinWeights.copy(this.skinWeights);
        return returnVar;
    },
    flattenToBuffers: function () {
        var vertexBuffer = this.position.toArray();
        var normalBuffer = this.normal.toArray();
        var uvBuffer = this.uv.toArray();
        var skinIndexBuffer = this.skinIndices.toArray();
        var skinWeightBuffer = this.skinWeights.toArray();
        return {
            vertexBuffer: vertexBuffer,
            normalBuffer: normalBuffer,
            uvBuffer: uvBuffer,
            skinIndexBuffer: skinIndexBuffer,
            skinWeightBuffer: skinWeightBuffer,
        };
    }
});
function Triangle() {
    this.vertices = [];
}
Object.assign(Triangle.prototype, {
    copy: function (target) {
        var returnVar = target || new Triangle();
        for (var i = 0; i < this.vertices.length; ++i) {
            this.vertices[i].copy(returnVar.vertices[i]);
        }
        return returnVar;
    },
    flattenToBuffers: function () {
        var vertexBuffer = [];
        var normalBuffer = [];
        var uvBuffer = [];
        var skinIndexBuffer = [];
        var skinWeightBuffer = [];
        this.vertices.forEach(function (vertex) {
            var flatVertex = vertex.flattenToBuffers();
            vertexBuffer = vertexBuffer.concat(flatVertex.vertexBuffer);
            normalBuffer = normalBuffer.concat(flatVertex.normalBuffer);
            uvBuffer = uvBuffer.concat(flatVertex.uvBuffer);
            skinIndexBuffer = skinIndexBuffer.concat(flatVertex.skinIndexBuffer);
            skinWeightBuffer = skinWeightBuffer.concat(flatVertex.skinWeightBuffer);
        });
        return {
            vertexBuffer: vertexBuffer,
            normalBuffer: normalBuffer,
            uvBuffer: uvBuffer,
            skinIndexBuffer: skinIndexBuffer,
            skinWeightBuffer: skinWeightBuffer,
        };
    }
});
function Face() {
    this.triangles = [];
    this.materialIndex = 0;
}
Object.assign(Face.prototype, {
    copy: function (target) {
        var returnVar = target || new Face();
        for (var i = 0; i < this.triangles.length; ++i) {
            this.triangles[i].copy(returnVar.triangles[i]);
        }
        returnVar.materialIndex = this.materialIndex;
        return returnVar;
    },
    genTrianglesFromVertices: function (vertexArray) {
        for (var i = 2; i < vertexArray.length; ++i) {
            var triangle = new Triangle();
            triangle.vertices[0] = vertexArray[0];
            triangle.vertices[1] = vertexArray[i - 1];
            triangle.vertices[2] = vertexArray[i];
            this.triangles.push(triangle);
        }
    },
    flattenToBuffers: function () {
        var vertexBuffer = [];
        var normalBuffer = [];
        var uvBuffer = [];
        var skinIndexBuffer = [];
        var skinWeightBuffer = [];
        var materialIndexBuffer = [];
        var materialIndex = this.materialIndex;
        this.triangles.forEach(function (triangle) {
            var flatTriangle = triangle.flattenToBuffers();
            vertexBuffer = vertexBuffer.concat(flatTriangle.vertexBuffer);
            normalBuffer = normalBuffer.concat(flatTriangle.normalBuffer);
            uvBuffer = uvBuffer.concat(flatTriangle.uvBuffer);
            skinIndexBuffer = skinIndexBuffer.concat(flatTriangle.skinIndexBuffer);
            skinWeightBuffer = skinWeightBuffer.concat(flatTriangle.skinWeightBuffer);
            materialIndexBuffer = materialIndexBuffer.concat([materialIndex, materialIndex, materialIndex]);
        });
        return {
            vertexBuffer: vertexBuffer,
            normalBuffer: normalBuffer,
            uvBuffer: uvBuffer,
            skinIndexBuffer: skinIndexBuffer,
            skinWeightBuffer: skinWeightBuffer,
            materialIndexBuffer: materialIndexBuffer
        };
    }
});
function Geometry() {
    this.faces = [];
    this.skeleton = null;
}
Object.assign(Geometry.prototype, {
    flattenToBuffers: function () {
        var vertexBuffer = [];
        var normalBuffer = [];
        var uvBuffer = [];
        var skinIndexBuffer = [];
        var skinWeightBuffer = [];
        var materialIndexBuffer = [];
        this.faces.forEach(function (face) {
            var flatFace = face.flattenToBuffers();
            vertexBuffer = vertexBuffer.concat(flatFace.vertexBuffer);
            normalBuffer = normalBuffer.concat(flatFace.normalBuffer);
            uvBuffer = uvBuffer.concat(flatFace.uvBuffer);
            skinIndexBuffer = skinIndexBuffer.concat(flatFace.skinIndexBuffer);
            skinWeightBuffer = skinWeightBuffer.concat(flatFace.skinWeightBuffer);
            materialIndexBuffer = materialIndexBuffer.concat(flatFace.materialIndexBuffer);
        });
        return {
            vertexBuffer: vertexBuffer,
            normalBuffer: normalBuffer,
            uvBuffer: uvBuffer,
            skinIndexBuffer: skinIndexBuffer,
            skinWeightBuffer: skinWeightBuffer,
            materialIndexBuffer: materialIndexBuffer
        };
    }
});
function TextParser() { }
Object.assign(TextParser.prototype, {
    getPrevNode: function () {
        return this.nodeStack[this.currentIndent - 2];
    },
    getCurrentNode: function () {
        return this.nodeStack[this.currentIndent - 1];
    },
    getCurrentProp: function () {
        return this.currentProp;
    },
    pushStack: function (node) {
        this.nodeStack.push(node);
        this.currentIndent += 1;
    },
    popStack: function () {
        this.nodeStack.pop();
        this.currentIndent -= 1;
    },
    setCurrentProp: function (val, name) {
        this.currentProp = val;
        this.currentPropName = name;
    },
    parse: function (text) {
        this.currentIndent = 0;
        this.allNodes = new FBXTree();
        this.nodeStack = [];
        this.currentProp = [];
        this.currentPropName = '';
        var split = text.split("\n");
        for (var line in split) {
            var l = split[line];
            if (l.match(/^[\s\t]*;/)) {
                continue;
            }
            if (l.match(/^[\s\t]*$/)) {
                continue;
            }
            var beginningOfNodeExp = new RegExp("^\\t{" + this.currentIndent + "}(\\w+):(.*){", '');
            var match = l.match(beginningOfNodeExp);
            if (match) {
                var nodeName = match[1].trim().replace(/^"/, '').replace(/"$/, "");
                var nodeAttrs = match[2].split(',').map(function (element) {
                    return element.trim().replace(/^"/, '').replace(/"$/, '');
                });
                this.parseNodeBegin(l, nodeName, nodeAttrs || null);
                continue;
            }
            var propExp = new RegExp("^\\t{" + (this.currentIndent) + "}(\\w+):[\\s\\t\\r\\n](.*)");
            var match = l.match(propExp);
            if (match) {
                var propName = match[1].replace(/^"/, '').replace(/"$/, "").trim();
                var propValue = match[2].replace(/^"/, '').replace(/"$/, "").trim();
                this.parseNodeProperty(l, propName, propValue);
                continue;
            }
            var endOfNodeExp = new RegExp("^\\t{" + (this.currentIndent - 1) + "}}");
            if (l.match(endOfNodeExp)) {
                this.nodeEnd();
                continue;
            }
            if (l.match(/^[^\s\t}]/)) {
                this.parseNodePropertyContinued(l);
            }
        }
        return this.allNodes;
    },
    parseNodeBegin: function (line, nodeName, nodeAttrs) {
        var node = { 'name': nodeName, properties: {}, 'subNodes': {} };
        var attrs = this.parseNodeAttr(nodeAttrs);
        var currentNode = this.getCurrentNode();
        if (this.currentIndent === 0) {
            this.allNodes.add(nodeName, node);
        }
        else {
            if (nodeName in currentNode.subNodes) {
                var tmp = currentNode.subNodes[nodeName];
                if (this.isFlattenNode(currentNode.subNodes[nodeName])) {
                    if (attrs.id === '') {
                        currentNode.subNodes[nodeName] = [];
                        currentNode.subNodes[nodeName].push(tmp);
                    }
                    else {
                        currentNode.subNodes[nodeName] = {};
                        currentNode.subNodes[nodeName][tmp.id] = tmp;
                    }
                }
                if (attrs.id === '') {
                    currentNode.subNodes[nodeName].push(node);
                }
                else {
                    currentNode.subNodes[nodeName][attrs.id] = node;
                }
            }
            else if (typeof attrs.id === 'number' || attrs.id.match(/^\d+$/)) {
                currentNode.subNodes[nodeName] = {};
                currentNode.subNodes[nodeName][attrs.id] = node;
            }
            else {
                currentNode.subNodes[nodeName] = node;
            }
        }
        if (nodeAttrs) {
            node.id = attrs.id;
            node.attrName = attrs.name;
            node.attrType = attrs.type;
        }
        this.pushStack(node);
    },
    parseNodeAttr: function (attrs) {
        var id = attrs[0];
        if (attrs[0] !== "") {
            id = parseInt(attrs[0]);
            if (isNaN(id)) {
                id = attrs[0];
            }
        }
        var name;
        var type;
        if (attrs.length > 1) {
            name = attrs[1].replace(/^(\w+)::/, '');
            type = attrs[2];
        }
        return { id: id, name: name || '', type: type || '' };
    },
    parseNodeProperty: function (line, propName, propValue) {
        var currentNode = this.getCurrentNode();
        var parentName = currentNode.name;
        if (parentName !== undefined) {
            var propMatch = parentName.match(/Properties(\d)+/);
            if (propMatch) {
                this.parseNodeSpecialProperty(line, propName, propValue);
                return;
            }
        }
        if (propName == 'C') {
            var connProps = propValue.split(',').slice(1);
            var from = parseInt(connProps[0]);
            var to = parseInt(connProps[1]);
            var rest = propValue.split(',').slice(3);
            propName = 'connections';
            propValue = [from, to];
            propValue = propValue.concat(rest);
            if (currentNode.properties[propName] === undefined) {
                currentNode.properties[propName] = [];
            }
        }
        if (propName == 'Node') {
            var id = parseInt(propValue);
            currentNode.properties.id = id;
            currentNode.id = id;
        }
        if (propName in currentNode.properties) {
            if (Array.isArray(currentNode.properties[propName])) {
                currentNode.properties[propName].push(propValue);
            }
            else {
                currentNode.properties[propName] += propValue;
            }
        }
        else {
            if (Array.isArray(currentNode.properties[propName])) {
                currentNode.properties[propName].push(propValue);
            }
            else {
                currentNode.properties[propName] = propValue;
            }
        }
        this.setCurrentProp(currentNode.properties, propName);
    },
    parseNodePropertyContinued: function (line) {
        this.currentProp[this.currentPropName] += line;
    },
    parseNodeSpecialProperty: function (line, propName, propValue) {
        var props = propValue.split('",').map(function (element) {
            return element.trim().replace(/^\"/, '').replace(/\s/, '_');
        });
        var innerPropName = props[0];
        var innerPropType1 = props[1];
        var innerPropType2 = props[2];
        var innerPropFlag = props[3];
        var innerPropValue = props[4];
        switch (innerPropType1) {
            case "int":
                innerPropValue = parseInt(innerPropValue);
                break;
            case "double":
                innerPropValue = parseFloat(innerPropValue);
                break;
            case "ColorRGB":
            case "Vector3D":
                var tmp = innerPropValue.split(',');
                innerPropValue = new THREE.Vector3(tmp[0], tmp[1], tmp[2]);
                break;
        }
        this.getPrevNode().properties[innerPropName] = {
            'type': innerPropType1,
            'type2': innerPropType2,
            'flag': innerPropFlag,
            'value': innerPropValue
        };
        this.setCurrentProp(this.getPrevNode().properties, innerPropName);
    },
    nodeEnd: function () {
        this.popStack();
    },
    isFlattenNode: function (node) {
        return ('subNodes' in node && 'properties' in node) ? true : false;
    }
});
function FBXTree() { }
Object.assign(FBXTree.prototype, {
    add: function (key, val) {
        this[key] = val;
    },
    searchConnectionParent: function (id) {
        if (this.__cache_search_connection_parent === undefined) {
            this.__cache_search_connection_parent = [];
        }
        if (this.__cache_search_connection_parent[id] !== undefined) {
            return this.__cache_search_connection_parent[id];
        }
        else {
            this.__cache_search_connection_parent[id] = [];
        }
        var conns = this.Connections.properties.connections;
        var results = [];
        for (var i = 0; i < conns.length; ++i) {
            if (conns[i][0] == id) {
                var res = conns[i][1] === 0 ? -1 : conns[i][1];
                results.push(res);
            }
        }
        if (results.length > 0) {
            this.__cache_search_connection_parent[id] = this.__cache_search_connection_parent[id].concat(results);
            return results;
        }
        else {
            this.__cache_search_connection_parent[id] = [-1];
            return [-1];
        }
    },
    searchConnectionChildren: function (id) {
        if (this.__cache_search_connection_children === undefined) {
            this.__cache_search_connection_children = [];
        }
        if (this.__cache_search_connection_children[id] !== undefined) {
            return this.__cache_search_connection_children[id];
        }
        else {
            this.__cache_search_connection_children[id] = [];
        }
        var conns = this.Connections.properties.connections;
        var res = [];
        for (var i = 0; i < conns.length; ++i) {
            if (conns[i][1] == id) {
                res.push(conns[i][0] === 0 ? -1 : conns[i][0]);
            }
        }
        if (res.length > 0) {
            this.__cache_search_connection_children[id] = this.__cache_search_connection_children[id].concat(res);
            return res;
        }
        else {
            this.__cache_search_connection_children[id] = [];
            return [];
        }
    },
    searchConnectionType: function (id, to) {
        var key = id + ',' + to;
        if (this.__cache_search_connection_type === undefined) {
            this.__cache_search_connection_type = {};
        }
        if (this.__cache_search_connection_type[key] !== undefined) {
            return this.__cache_search_connection_type[key];
        }
        else {
            this.__cache_search_connection_type[key] = '';
        }
        var conns = this.Connections.properties.connections;
        for (var i = 0; i < conns.length; ++i) {
            if (conns[i][0] == id && conns[i][1] == to) {
                this.__cache_search_connection_type[key] = conns[i][2];
                return conns[i][2];
            }
        }
        this.__cache_search_connection_type[id] = null;
        return null;
    }
});
function isFbxFormatASCII(text) {
    var CORRECT = ['K', 'a', 'y', 'd', 'a', 'r', 'a', '\\', 'F', 'B', 'X', '\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\', '\\'];
    var cursor = 0;
    var read = function (offset) {
        var result = text[offset - 1];
        text = text.slice(cursor + offset);
        cursor++;
        return result;
    };
    for (var i = 0; i < CORRECT.length; ++i) {
        var num = read(1);
        if (num == CORRECT[i]) {
            return false;
        }
    }
    return true;
}
function getFbxVersion(text) {
    var versionRegExp = /FBXVersion: (\d+)/;
    var match = text.match(versionRegExp);
    if (match) {
        var version = parseInt(match[1]);
        return version;
    }
    throw new Error('FBXLoader: Cannot find the version number for the file given.');
}
function ConvertFBXTimeToSeconds(time) {
    return time / 46186158000;
}
function parseFloatArray(floatString) {
    return floatString.split(',').map(function (stringValue) {
        return parseFloat(stringValue);
    });
}
function parseIntArray(intString) {
    return intString.split(',').map(function (stringValue) {
        return parseInt(stringValue);
    });
}
function parseMatrixArray(floatString) {
    return new THREE.Matrix4().fromArray(parseFloatArray(floatString));
}
function degreeToRadian(value) {
    return value * Math.PI / 180;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzc2VydmljZS9mYnhMb2FkZXIyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQW9CQSw2QkFBK0I7QUFPM0IsS0FBSyxDQUFDLFNBQVMsR0FBRyxVQUFXLE9BQU87SUFFaEMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUUsSUFBSSxDQUFFLENBQUM7SUFDMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFFLE9BQU8sS0FBSyxTQUFTLENBQUUsR0FBRyxPQUFPLEdBQUcsS0FBSyxDQUFDLHFCQUFxQixDQUFDO0lBQ2pGLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxLQUFLLENBQUMsVUFBVSxDQUFFLElBQUksQ0FBQyxPQUFPLENBQUUsQ0FBQztJQUN2RCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksS0FBSyxDQUFDLGFBQWEsQ0FBRSxJQUFJLENBQUMsT0FBTyxDQUFFLENBQUM7QUFFakUsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sQ0FBRSxLQUFLLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBRSxDQUFDO0FBRW5FLEtBQUssQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDO0FBRXhELE1BQU0sQ0FBQyxNQUFNLENBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUU7SUFXdEMsSUFBSSxFQUFFLFVBQVcsR0FBRyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsT0FBTztRQUU3QyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7UUFFaEIsSUFBSSxpQkFBaUIsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFFLFFBQVEsQ0FBRSxDQUFDO1FBQzlDLGlCQUFpQixDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3hCLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDLElBQUksQ0FBRSxHQUFHLENBQUUsQ0FBQztRQUVsRCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBRSxHQUFHLEVBQUUsVUFBVyxJQUFJO1lBRXRDLEVBQUUsQ0FBQyxDQUFFLENBQUUsZ0JBQWdCLENBQUUsSUFBSSxDQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUUvQixPQUFPLENBQUMsS0FBSyxDQUFFLDZDQUE2QyxDQUFFLENBQUM7Z0JBQy9ELElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFFLEdBQUcsQ0FBRSxDQUFDO2dCQUM5QixNQUFNLENBQUM7WUFFWCxDQUFDO1lBQ0QsRUFBRSxDQUFDLENBQUUsYUFBYSxDQUFFLElBQUksQ0FBRSxHQUFHLElBQUssQ0FBQyxDQUFDLENBQUM7Z0JBRWpDLE9BQU8sQ0FBQyxLQUFLLENBQUUsbURBQW1ELEdBQUcsR0FBRyxHQUFHLGlCQUFpQixHQUFHLGFBQWEsQ0FBRSxJQUFJLENBQUUsQ0FBRSxDQUFDO2dCQUN2SCxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBRSxHQUFHLENBQUUsQ0FBQztnQkFDOUIsTUFBTSxDQUFDO1lBRVgsQ0FBQztZQUVELElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUUsSUFBSSxFQUFFLGlCQUFpQixDQUFFLENBQUM7WUFDbEQsTUFBTSxDQUFFLEtBQUssQ0FBRSxDQUFDO1FBRXBCLENBQUMsRUFBRSxVQUFVLEVBQUUsT0FBTyxDQUFFLENBQUM7SUFFN0IsQ0FBQztJQVVELEtBQUssRUFBRSxVQUFXLE9BQU8sRUFBRSxpQkFBaUI7UUFFeEMsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDO1FBRWxCLElBQUksT0FBTyxHQUFHLElBQUksVUFBVSxFQUFFLENBQUMsS0FBSyxDQUFFLE9BQU8sQ0FBRSxDQUFDO1FBRWhELElBQUksV0FBVyxHQUFHLGdCQUFnQixDQUFFLE9BQU8sQ0FBRSxDQUFDO1FBRTlDLElBQUksUUFBUSxHQUFHLGFBQWEsQ0FBRSxPQUFPLENBQUUsQ0FBQztRQUV4QyxJQUFJLFNBQVMsR0FBRyxjQUFjLENBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxXQUFXLENBQUUsQ0FBQztRQUVqRSxJQUFJLFdBQVcsR0FBRyxjQUFjLENBQUUsT0FBTyxFQUFFLFdBQVcsQ0FBRSxDQUFDO1FBRXpELElBQUksV0FBVyxHQUFHLGVBQWUsQ0FBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFdBQVcsQ0FBRSxDQUFDO1FBRXZFLElBQUksVUFBVSxHQUFHLFVBQVUsQ0FBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsU0FBUyxDQUFFLENBQUM7UUFFekYsTUFBTSxDQUFDLFVBQVUsQ0FBQztRQTJDbEIsMEJBQTJCLE9BQU87WUFLOUIsSUFBSSxhQUFhLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUU5QixFQUFFLENBQUMsQ0FBRSxhQUFhLElBQUksT0FBUSxDQUFDLENBQUMsQ0FBQztnQkFLN0IsSUFBSSxlQUFlLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDO2dCQUNqRSxlQUFlLENBQUMsT0FBTyxDQUFFLFVBQVcsVUFBVTtvQkFFMUMsRUFBRSxDQUFDLENBQUUsQ0FBRSxhQUFhLENBQUMsR0FBRyxDQUFFLFVBQVUsQ0FBRSxDQUFDLENBQUUsQ0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFFM0MsYUFBYSxDQUFDLEdBQUcsQ0FBRSxVQUFVLENBQUUsQ0FBQyxDQUFFLEVBQUU7NEJBQ2hDLE9BQU8sRUFBRSxFQUFFOzRCQUNYLFFBQVEsRUFBRSxFQUFFO3lCQUNmLENBQUUsQ0FBQztvQkFFUixDQUFDO29CQUVELElBQUksa0JBQWtCLEdBQUcsRUFBRSxFQUFFLEVBQUUsVUFBVSxDQUFFLENBQUMsQ0FBRSxFQUFFLFlBQVksRUFBRSxVQUFVLENBQUUsQ0FBQyxDQUFFLEVBQUUsQ0FBQztvQkFDaEYsYUFBYSxDQUFDLEdBQUcsQ0FBRSxVQUFVLENBQUUsQ0FBQyxDQUFFLENBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFFLGtCQUFrQixDQUFFLENBQUM7b0JBRXhFLEVBQUUsQ0FBQyxDQUFFLENBQUUsYUFBYSxDQUFDLEdBQUcsQ0FBRSxVQUFVLENBQUUsQ0FBQyxDQUFFLENBQUcsQ0FBQyxDQUFDLENBQUM7d0JBRTNDLGFBQWEsQ0FBQyxHQUFHLENBQUUsVUFBVSxDQUFFLENBQUMsQ0FBRSxFQUFFOzRCQUNoQyxPQUFPLEVBQUUsRUFBRTs0QkFDWCxRQUFRLEVBQUUsRUFBRTt5QkFDZixDQUFFLENBQUM7b0JBRVIsQ0FBQztvQkFFRCxJQUFJLGlCQUFpQixHQUFHLEVBQUUsRUFBRSxFQUFFLFVBQVUsQ0FBRSxDQUFDLENBQUUsRUFBRSxZQUFZLEVBQUUsVUFBVSxDQUFFLENBQUMsQ0FBRSxFQUFFLENBQUM7b0JBQy9FLGFBQWEsQ0FBQyxHQUFHLENBQUUsVUFBVSxDQUFFLENBQUMsQ0FBRSxDQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBRSxpQkFBaUIsQ0FBRSxDQUFDO2dCQUU1RSxDQUFDLENBQUUsQ0FBQztZQUVSLENBQUM7WUFFRCxNQUFNLENBQUMsYUFBYSxDQUFDO1FBRXpCLENBQUM7UUFPRCx1QkFBd0IsT0FBTztZQUszQixJQUFJLFVBQVUsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1lBRTNCLEVBQUUsQ0FBQyxDQUFFLFNBQVMsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBRTFDLElBQUksWUFBWSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQztnQkFDcEQsR0FBRyxDQUFDLENBQUUsSUFBSSxNQUFNLElBQUksWUFBYSxDQUFDLENBQUMsQ0FBQztvQkFFaEMsSUFBSSxPQUFPLEdBQUcsWUFBWSxDQUFFLFlBQVksQ0FBRSxNQUFNLENBQUUsQ0FBRSxDQUFDO29CQUNyRCxVQUFVLENBQUMsR0FBRyxDQUFFLFFBQVEsQ0FBRSxNQUFNLENBQUUsRUFBRSxPQUFPLENBQUUsQ0FBQztnQkFFbEQsQ0FBQztZQUVMLENBQUM7WUFFRCxNQUFNLENBQUMsVUFBVSxDQUFDO1lBTWxCLHNCQUF1QixXQUFXO2dCQUU5QixJQUFJLE1BQU0sR0FBRyxXQUFXLENBQUMsRUFBRSxDQUFDO2dCQUM1QixJQUFJLElBQUksR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDO2dCQUM1QixJQUFJLFFBQVEsR0FBRyxXQUFXLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztnQkFDL0MsSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBRSxRQUFRLENBQUUsQ0FBQztnQkFDdkMsRUFBRSxDQUFDLENBQUUsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFFLENBQUMsQ0FBQyxDQUFDO29CQUVyQixJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUUsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUUsQ0FBQztnQkFFN0MsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFFSixJQUFJLFFBQVEsR0FBRyxRQUFRLENBQUM7Z0JBRTVCLENBQUM7Z0JBSUQsSUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUUsaUJBQWlCLEdBQUcsR0FBRyxHQUFHLFFBQVEsQ0FBRSxDQUFDO2dCQUM5RSxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztnQkFDcEIsT0FBTyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7Z0JBRXhCLE1BQU0sQ0FBQyxPQUFPLENBQUM7WUFFbkIsQ0FBQztRQUVMLENBQUM7UUFTRCx3QkFBeUIsT0FBTyxFQUFFLFVBQVUsRUFBRSxXQUFXO1lBRXJELElBQUksV0FBVyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7WUFFNUIsRUFBRSxDQUFDLENBQUUsVUFBVSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUyxDQUFDLENBQUMsQ0FBQztnQkFFM0MsSUFBSSxhQUFhLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO2dCQUN0RCxHQUFHLENBQUMsQ0FBRSxJQUFJLE1BQU0sSUFBSSxhQUFjLENBQUMsQ0FBQyxDQUFDO29CQUVqQyxJQUFJLFFBQVEsR0FBRyxhQUFhLENBQUUsYUFBYSxDQUFFLE1BQU0sQ0FBRSxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUUsQ0FBQztvQkFDakYsV0FBVyxDQUFDLEdBQUcsQ0FBRSxRQUFRLENBQUUsTUFBTSxDQUFFLEVBQUUsUUFBUSxDQUFFLENBQUM7Z0JBRXBELENBQUM7WUFFTCxDQUFDO1lBRUQsTUFBTSxDQUFDLFdBQVcsQ0FBQztZQVNuQix1QkFBd0IsWUFBWSxFQUFFLFVBQVUsRUFBRSxXQUFXO2dCQUV6RCxJQUFJLE1BQU0sR0FBRyxZQUFZLENBQUMsRUFBRSxDQUFDO2dCQUM3QixJQUFJLElBQUksR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDO2dCQUNqQyxJQUFJLElBQUksR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQztnQkFFaEQsSUFBSSxRQUFRLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBRSxNQUFNLENBQUUsQ0FBQyxRQUFRLENBQUM7Z0JBRWxELElBQUksVUFBVSxHQUFHLGVBQWUsQ0FBRSxZQUFZLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxRQUFRLENBQUUsQ0FBQztnQkFFbEYsSUFBSSxRQUFRLENBQUM7Z0JBQ2IsTUFBTSxDQUFDLENBQUUsSUFBSyxDQUFDLENBQUMsQ0FBQztvQkFFYixLQUFLLE9BQU87d0JBQ1IsUUFBUSxHQUFHLElBQUksS0FBSyxDQUFDLGlCQUFpQixFQUFFLENBQUM7d0JBQ3pDLEtBQUssQ0FBQztvQkFDVixLQUFLLFNBQVM7d0JBQ1YsUUFBUSxHQUFHLElBQUksS0FBSyxDQUFDLG1CQUFtQixFQUFFLENBQUM7d0JBQzNDLEtBQUssQ0FBQztvQkFDVjt3QkFDSSxPQUFPLENBQUMsSUFBSSxDQUFFLDRDQUE0QyxHQUFHLElBQUksR0FBRyxpREFBaUQsQ0FBRSxDQUFDO3dCQUN4SCxRQUFRLEdBQUcsSUFBSSxLQUFLLENBQUMsaUJBQWlCLENBQUUsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLENBQUUsQ0FBQzt3QkFDOUQsS0FBSyxDQUFDO2dCQUVkLENBQUM7Z0JBRUQsUUFBUSxDQUFDLFNBQVMsQ0FBRSxVQUFVLENBQUUsQ0FBQztnQkFDakMsUUFBUSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7Z0JBRXJCLE1BQU0sQ0FBQyxRQUFRLENBQUM7Z0JBY2hCLHlCQUEwQixVQUFVLEVBQUUsVUFBVSxFQUFFLHFCQUFxQjtvQkFFbkUsSUFBSSxVQUFVLEdBQU8sRUFBRSxDQUFDO29CQUV4QixFQUFFLENBQUMsQ0FBRSxVQUFVLENBQUMsT0FBUSxDQUFDLENBQUMsQ0FBQzt3QkFFdkIsVUFBVSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUUsVUFBVSxDQUFDLE9BQU8sQ0FBRSxDQUFDO29CQUV4RCxDQUFDO29CQUNELEVBQUUsQ0FBQyxDQUFFLFVBQVUsQ0FBQyxRQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUV4QixVQUFVLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBRSxVQUFVLENBQUMsUUFBUSxDQUFFLENBQUM7b0JBRTVELENBQUM7b0JBQ0QsRUFBRSxDQUFDLENBQUUsVUFBVSxDQUFDLFNBQVUsQ0FBQyxDQUFDLENBQUM7d0JBRXpCLFVBQVUsQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7b0JBRXRELENBQUM7b0JBQ0QsRUFBRSxDQUFDLENBQUUsVUFBVSxDQUFDLFFBQVMsQ0FBQyxDQUFDLENBQUM7d0JBRXhCLFVBQVUsQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFFLFVBQVUsQ0FBQyxRQUFRLENBQUUsQ0FBQztvQkFFNUQsQ0FBQztvQkFDRCxFQUFFLENBQUMsQ0FBRSxVQUFVLENBQUMsY0FBZSxDQUFDLENBQUMsQ0FBQzt3QkFFOUIsVUFBVSxDQUFDLGlCQUFpQixHQUFHLFVBQVUsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDO29CQUVuRSxDQUFDO29CQUNELEVBQUUsQ0FBQyxDQUFFLFVBQVUsQ0FBQyxPQUFRLENBQUMsQ0FBQyxDQUFDO3dCQUV2QixVQUFVLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO29CQUVsRCxDQUFDO29CQUNELEVBQUUsQ0FBQyxDQUFFLFVBQVUsQ0FBQyxPQUFPLEdBQUcsR0FBSSxDQUFDLENBQUMsQ0FBQzt3QkFFN0IsVUFBVSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7b0JBRWxDLENBQUM7b0JBRUQscUJBQXFCLENBQUMsT0FBTyxDQUFFLFVBQVcsWUFBWTt3QkFFbEQsSUFBSSxJQUFJLEdBQUcsWUFBWSxDQUFDLFlBQVksQ0FBQzt3QkFDckMsTUFBTSxDQUFDLENBQUUsSUFBSyxDQUFDLENBQUMsQ0FBQzs0QkFFYixLQUFLLGlCQUFpQjtnQ0FFbEIsS0FBSyxDQUFDOzRCQUVWLEtBQUssaUJBQWlCO2dDQUNsQixVQUFVLENBQUMsR0FBRyxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUUsWUFBWSxDQUFDLEVBQUUsQ0FBRSxDQUFDO2dDQUNuRCxLQUFLLENBQUM7NEJBRVY7Z0NBQ0ksT0FBTyxDQUFDLElBQUksQ0FBRSxzQ0FBc0MsR0FBRyxJQUFJLEdBQUcsb0JBQW9CLENBQUUsQ0FBQztnQ0FDckYsS0FBSyxDQUFDO3dCQUVkLENBQUM7b0JBRUwsQ0FBQyxDQUFFLENBQUM7b0JBRUosTUFBTSxDQUFDLFVBQVUsQ0FBQztnQkFFdEIsQ0FBQztZQUVMLENBQUM7UUFFTCxDQUFDO1FBUUQsd0JBQXlCLE9BQU8sRUFBRSxXQUFXO1lBRXpDLElBQUksV0FBVyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7WUFFNUIsRUFBRSxDQUFDLENBQUUsVUFBVSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUyxDQUFDLENBQUMsQ0FBQztnQkFFM0MsSUFBSSxhQUFhLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO2dCQUN0RCxHQUFHLENBQUMsQ0FBRSxJQUFJLE1BQU0sSUFBSSxhQUFjLENBQUMsQ0FBQyxDQUFDO29CQUVqQyxJQUFJLFlBQVksR0FBRyxhQUFhLENBQUUsTUFBTSxDQUFFLENBQUM7b0JBQzNDLEVBQUUsQ0FBQyxDQUFFLFlBQVksQ0FBQyxRQUFRLEtBQUssTUFBTyxDQUFDLENBQUMsQ0FBQzt3QkFFckMsSUFBSSxLQUFLLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBRSxRQUFRLENBQUUsTUFBTSxDQUFFLENBQUUsQ0FBQzt3QkFDbEQsSUFBSSxRQUFRLEdBQU8sYUFBYSxDQUFFLEtBQUssRUFBRSxhQUFhLENBQUUsQ0FBQzt3QkFDekQsUUFBUSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUUsTUFBTSxDQUFFLENBQUM7d0JBQ3JDLFdBQVcsQ0FBQyxHQUFHLENBQUUsUUFBUSxDQUFFLE1BQU0sQ0FBRSxFQUFFLFFBQVEsQ0FBRSxDQUFDO29CQUVwRCxDQUFDO2dCQUVMLENBQUM7WUFFTCxDQUFDO1lBRUQsTUFBTSxDQUFDLFdBQVcsQ0FBQztZQVFuQix1QkFBd0IsV0FBVyxFQUFFLGFBQWE7Z0JBRTlDLElBQUksWUFBWSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7Z0JBQzdCLElBQUksZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO2dCQUMxQixXQUFXLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBRSxVQUFXLEtBQUs7b0JBRTFDLElBQUksZUFBZSxHQUFHLGFBQWEsQ0FBRSxLQUFLLENBQUMsRUFBRSxDQUFFLENBQUM7b0JBQ2hELElBQUksV0FBVyxHQUFHO3dCQUNkLE1BQU0sRUFBRSxLQUFLLENBQUMsRUFBRTt3QkFDaEIsT0FBTyxFQUFFLGFBQWEsQ0FBRSxlQUFlLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFFO3dCQUN2RSxPQUFPLEVBQUUsZUFBZSxDQUFFLGVBQWUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUU7d0JBQ3pFLFNBQVMsRUFBRSxnQkFBZ0IsQ0FBRSxlQUFlLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFFO3dCQUM5RSxhQUFhLEVBQUUsZ0JBQWdCLENBQUUsZUFBZSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBRTt3QkFDdEYsUUFBUSxFQUFFLGVBQWUsQ0FBQyxVQUFVLENBQUMsSUFBSTtxQkFDNUMsQ0FBQztvQkFDRixZQUFZLENBQUMsR0FBRyxDQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsV0FBVyxDQUFFLENBQUM7b0JBQzFDLGdCQUFnQixDQUFDLElBQUksQ0FBRSxXQUFXLENBQUUsQ0FBQztnQkFFekMsQ0FBQyxDQUFFLENBQUM7Z0JBRUosTUFBTSxDQUFDO29CQUNILEdBQUcsRUFBRSxZQUFZO29CQUNqQixLQUFLLEVBQUUsZ0JBQWdCO29CQUN2QixLQUFLLEVBQUUsRUFBRTtpQkFDWixDQUFDO1lBRU4sQ0FBQztRQUVMLENBQUM7UUFTRCx5QkFBMEIsT0FBTyxFQUFFLFdBQVcsRUFBRSxXQUFXO1lBRXZELElBQUksV0FBVyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7WUFFNUIsRUFBRSxDQUFDLENBQUUsVUFBVSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUyxDQUFDLENBQUMsQ0FBQztnQkFFM0MsSUFBSSxhQUFhLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDO2dCQUN0RCxHQUFHLENBQUMsQ0FBRSxJQUFJLE1BQU0sSUFBSSxhQUFjLENBQUMsQ0FBQyxDQUFDO29CQUVqQyxJQUFJLGFBQWEsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFFLFFBQVEsQ0FBRSxNQUFNLENBQUUsQ0FBRSxDQUFDO29CQUMxRCxJQUFJLEdBQUcsR0FBRyxhQUFhLENBQUUsYUFBYSxDQUFFLE1BQU0sQ0FBRSxFQUFFLGFBQWEsRUFBRSxXQUFXLENBQUUsQ0FBQztvQkFDL0UsV0FBVyxDQUFDLEdBQUcsQ0FBRSxRQUFRLENBQUUsTUFBTSxDQUFFLEVBQUUsR0FBRyxDQUFFLENBQUM7Z0JBRS9DLENBQUM7WUFFTCxDQUFDO1lBRUQsTUFBTSxDQUFDLFdBQVcsQ0FBQztZQVNuQix1QkFBd0IsWUFBWSxFQUFFLGFBQWEsRUFBRSxXQUFXO2dCQUU1RCxFQUFFLENBQUEsQ0FBRSxZQUFZLENBQUMsUUFBUSxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUM7b0JBQ3JDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBRSxZQUFZLEVBQUUsYUFBYSxFQUFFLFdBQVcsQ0FBQyxDQUFDO2dCQUN0RSxDQUFDO2dCQUFBLElBQUksQ0FBQyxFQUFFLENBQUEsQ0FBRSxZQUFZLENBQUMsUUFBUSxLQUFLLFlBQVksQ0FBQyxDQUFBLENBQUM7b0JBQzlDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBRSxZQUFZLEVBQUUsYUFBYSxDQUFFLENBQUM7Z0JBQzdELENBQUM7Z0JBU0QsMkJBQTRCLFlBQVksRUFBRSxhQUFhLEVBQUUsV0FBVztvQkFFaEUsSUFBSSxNQUFNLEdBQUcsWUFBWSxDQUFDLEVBQUUsQ0FBQztvQkFDN0IsSUFBSSxJQUFJLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQztvQkFDakMsR0FBRyxDQUFDLENBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxhQUFhLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxFQUFHLENBQUMsRUFBRyxDQUFDO3dCQUV4RCxFQUFFLENBQUMsQ0FBRSxXQUFXLENBQUMsR0FBRyxDQUFFLGFBQWEsQ0FBQyxRQUFRLENBQUUsQ0FBQyxDQUFFLENBQUMsRUFBRSxDQUFHLENBQUMsQ0FBQyxDQUFDOzRCQUV0RCxJQUFJLFFBQVEsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFFLGFBQWEsQ0FBQyxRQUFRLENBQUUsQ0FBQyxDQUFFLENBQUMsRUFBRSxDQUFFLENBQUM7NEJBQ2pFLEtBQUssQ0FBQzt3QkFFVixDQUFDO29CQUVMLENBQUM7b0JBRUQsSUFBSSxRQUFRLEdBQUcsV0FBVyxDQUFFLFlBQVksRUFBRSxRQUFRLENBQUUsQ0FBQztvQkFFckQsTUFBTSxDQUFDLFFBQVEsQ0FBQztvQkFNaEIscUJBQXNCLFlBQVksRUFBRSxRQUFRO3dCQUV4QyxJQUFJLFFBQVEsR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO3dCQUc5QixJQUFJLFlBQVksR0FBRyxlQUFlLENBQUUsWUFBWSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBRSxDQUFDO3dCQUNsRixJQUFJLFdBQVcsR0FBRyxhQUFhLENBQUUsWUFBWSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFFLENBQUM7d0JBRXpGLEVBQUUsQ0FBQyxDQUFFLG9CQUFvQixJQUFJLFlBQVksQ0FBQyxRQUFTLENBQUMsQ0FBQyxDQUFDOzRCQUVsRCxJQUFJLFVBQVUsR0FBRyxVQUFVLENBQUUsWUFBWSxDQUFFLENBQUM7d0JBRWhELENBQUM7d0JBRUQsRUFBRSxDQUFDLENBQUUsZ0JBQWdCLElBQUksWUFBWSxDQUFDLFFBQVMsQ0FBQyxDQUFDLENBQUM7NEJBRTlDLElBQUksTUFBTSxHQUFHLE1BQU0sQ0FBRSxZQUFZLENBQUUsQ0FBQzt3QkFFeEMsQ0FBQzt3QkFFRCxFQUFFLENBQUMsQ0FBRSxzQkFBc0IsSUFBSSxZQUFZLENBQUMsUUFBUyxDQUFDLENBQUMsQ0FBQzs0QkFFcEQsSUFBSSxZQUFZLEdBQUcsWUFBWSxDQUFFLFlBQVksQ0FBRSxDQUFDO3dCQUVwRCxDQUFDO3dCQUVELElBQUksZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO3dCQUMxQixJQUFJLFlBQVksR0FBRyxDQUFDLENBQUM7d0JBQ3JCLEdBQUcsQ0FBQyxDQUFFLElBQUksa0JBQWtCLEdBQUcsQ0FBQyxFQUFFLGtCQUFrQixHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsRUFBRyxrQkFBa0IsRUFBRyxDQUFDOzRCQUVoRyxJQUFJLFNBQVMsQ0FBQzs0QkFDZCxJQUFJLFdBQVcsR0FBRyxXQUFXLENBQUUsa0JBQWtCLENBQUUsQ0FBQzs0QkFDcEQsRUFBRSxDQUFDLENBQUUsV0FBVyxDQUFFLGtCQUFrQixDQUFFLEdBQUcsQ0FBRSxDQUFDLENBQUMsQ0FBQztnQ0FFMUMsV0FBVyxHQUFHLFdBQVcsR0FBRyxDQUFFLENBQUMsQ0FBQztnQ0FDaEMsV0FBVyxDQUFFLGtCQUFrQixDQUFFLEdBQUcsV0FBVyxDQUFDO2dDQUNoRCxTQUFTLEdBQUcsSUFBSSxDQUFDOzRCQUVyQixDQUFDOzRCQUNELElBQUksTUFBTSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7NEJBQzFCLElBQUksYUFBYSxHQUFHLEVBQUUsQ0FBQzs0QkFDdkIsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDOzRCQUNqQixNQUFNLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBRSxZQUFZLEVBQUUsV0FBVyxHQUFHLENBQUMsQ0FBRSxDQUFDOzRCQUszRCxFQUFFLENBQUMsQ0FBRSxRQUFTLENBQUMsQ0FBQyxDQUFDO2dDQUViLEdBQUcsQ0FBQyxDQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsRUFBRyxDQUFDLEVBQUcsQ0FBQztvQ0FFaEQsSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBRSxDQUFDLENBQUUsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFFLFVBQVcsS0FBSzt3Q0FFL0QsTUFBTSxDQUFDLEtBQUssS0FBSyxXQUFXLENBQUUsa0JBQWtCLENBQUUsQ0FBQztvQ0FFdkQsQ0FBQyxDQUFFLENBQUM7b0NBRUosRUFBRSxDQUFDLENBQUUsS0FBSyxLQUFLLENBQUUsQ0FBRSxDQUFDLENBQUMsQ0FBQzt3Q0FFbEIsT0FBTyxDQUFDLElBQUksQ0FBRSxRQUFRLENBQUMsS0FBSyxDQUFFLENBQUMsQ0FBRSxDQUFDLE9BQU8sQ0FBRSxLQUFLLENBQUUsQ0FBRSxDQUFDO3dDQUNyRCxhQUFhLENBQUMsSUFBSSxDQUFFLENBQUMsQ0FBRSxDQUFDO29DQUU1QixDQUFDO2dDQUVMLENBQUM7Z0NBRUQsRUFBRSxDQUFDLENBQUUsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFFLENBQUMsQ0FBQyxDQUFDO29DQUV2QixPQUFPLENBQUMsSUFBSSxDQUFFLHNHQUFzRyxDQUFFLENBQUM7b0NBRXZILElBQUksTUFBTSxHQUFHLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFFLENBQUM7b0NBQzVCLElBQUksTUFBTSxHQUFHLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFFLENBQUM7b0NBRTVCLEdBQUcsQ0FBQyxDQUFFLElBQUksa0JBQWtCLEdBQUcsQ0FBQyxFQUFFLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRyxrQkFBa0IsRUFBRyxDQUFDO3dDQUU1RixJQUFJLGFBQWEsR0FBRyxPQUFPLENBQUUsa0JBQWtCLENBQUUsQ0FBQzt3Q0FDbEQsSUFBSSxZQUFZLEdBQUcsYUFBYSxDQUFFLGtCQUFrQixDQUFFLENBQUM7d0NBQ3ZELEdBQUcsQ0FBQyxDQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFHLENBQUMsRUFBRyxDQUFDOzRDQUV4QyxFQUFFLENBQUMsQ0FBRSxhQUFhLEdBQUcsTUFBTSxDQUFFLENBQUMsQ0FBRyxDQUFDLENBQUMsQ0FBQztnREFFaEMsSUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFFLENBQUMsQ0FBRSxDQUFDO2dEQUN0QixNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUcsYUFBYSxDQUFDO2dEQUM1QixhQUFhLEdBQUcsR0FBRyxDQUFDO2dEQUVwQixHQUFHLEdBQUcsTUFBTSxDQUFFLENBQUMsQ0FBRSxDQUFDO2dEQUNsQixNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUcsWUFBWSxDQUFDO2dEQUMzQixZQUFZLEdBQUcsR0FBRyxDQUFDOzRDQUV2QixDQUFDO3dDQUVMLENBQUM7b0NBRUwsQ0FBQztvQ0FFRCxhQUFhLEdBQUcsTUFBTSxDQUFDO29DQUN2QixPQUFPLEdBQUcsTUFBTSxDQUFDO2dDQUVyQixDQUFDO2dDQUVELEdBQUcsQ0FBQyxDQUFFLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUcsRUFBRyxDQUFDO29DQUV6QyxPQUFPLENBQUUsQ0FBQyxDQUFFLEdBQUcsQ0FBQyxDQUFDO29DQUNqQixhQUFhLENBQUUsQ0FBQyxDQUFFLEdBQUcsQ0FBQyxDQUFDO2dDQUUzQixDQUFDO2dDQUVELE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFFLE9BQU8sQ0FBRSxDQUFDO2dDQUN4QyxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBRSxhQUFhLENBQUUsQ0FBQzs0QkFJbEQsQ0FBQzs0QkFFRCxFQUFFLENBQUMsQ0FBRSxVQUFXLENBQUMsQ0FBQyxDQUFDO2dDQUVmLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFFLE9BQU8sQ0FBRSxrQkFBa0IsRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLFVBQVUsQ0FBRSxDQUFFLENBQUM7NEJBRXBHLENBQUM7NEJBRUQsRUFBRSxDQUFDLENBQUUsTUFBTyxDQUFDLENBQUMsQ0FBQztnQ0FFWCxNQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBRSxPQUFPLENBQUUsa0JBQWtCLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUUsQ0FBRSxDQUFDOzRCQUU1RixDQUFDOzRCQUtELGdCQUFnQixDQUFDLElBQUksQ0FBRSxNQUFNLENBQUUsQ0FBQzs0QkFJaEMsRUFBRSxDQUFDLENBQUUsU0FBVSxDQUFDLENBQUMsQ0FBQztnQ0FFZCxJQUFJLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO2dDQUN0QixJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUUsa0JBQWtCLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxZQUFZLENBQUUsQ0FBQztnQ0FDdkYsSUFBSSxDQUFDLHdCQUF3QixDQUFFLGdCQUFnQixDQUFFLENBQUM7Z0NBQ2xELElBQUksQ0FBQyxhQUFhLEdBQUcsU0FBUyxDQUFFLENBQUMsQ0FBRSxDQUFDO2dDQUNwQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBRSxJQUFJLENBQUUsQ0FBQztnQ0FDNUIsZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO2dDQUN0QixZQUFZLEVBQUcsQ0FBQztnQ0FDaEIsU0FBUyxHQUFHLEtBQUssQ0FBQzs0QkFFdEIsQ0FBQzt3QkFFTCxDQUFDO3dCQUtELElBQUksVUFBVSxHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO3dCQUU3QyxJQUFJLEdBQUcsR0FBRyxJQUFJLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQzt3QkFDckMsR0FBRyxDQUFDLElBQUksR0FBRyxZQUFZLENBQUMsSUFBSSxDQUFDO3dCQUM3QixHQUFHLENBQUMsWUFBWSxDQUFFLFVBQVUsRUFBRSxJQUFJLEtBQUssQ0FBQyxlQUFlLENBQUUsSUFBSSxZQUFZLENBQUUsVUFBVSxDQUFDLFlBQVksQ0FBRSxFQUFFLENBQUMsQ0FBRSxDQUFFLENBQUM7d0JBRTVHLEVBQUUsQ0FBQyxDQUFFLFVBQVUsQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUUsQ0FBQyxDQUFDLENBQUM7NEJBRXZDLEdBQUcsQ0FBQyxZQUFZLENBQUUsUUFBUSxFQUFFLElBQUksS0FBSyxDQUFDLGVBQWUsQ0FBRSxJQUFJLFlBQVksQ0FBRSxVQUFVLENBQUMsWUFBWSxDQUFFLEVBQUUsQ0FBQyxDQUFFLENBQUUsQ0FBQzt3QkFFOUcsQ0FBQzt3QkFDRCxFQUFFLENBQUMsQ0FBRSxVQUFVLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFFLENBQUMsQ0FBQyxDQUFDOzRCQUVuQyxHQUFHLENBQUMsWUFBWSxDQUFFLElBQUksRUFBRSxJQUFJLEtBQUssQ0FBQyxlQUFlLENBQUUsSUFBSSxZQUFZLENBQUUsVUFBVSxDQUFDLFFBQVEsQ0FBRSxFQUFFLENBQUMsQ0FBRSxDQUFFLENBQUM7d0JBRXRHLENBQUM7d0JBRUQsRUFBRSxDQUFDLENBQUUsUUFBUyxDQUFDLENBQUMsQ0FBQzs0QkFFYixHQUFHLENBQUMsWUFBWSxDQUFFLFdBQVcsRUFBRSxJQUFJLEtBQUssQ0FBQyxlQUFlLENBQUUsSUFBSSxZQUFZLENBQUUsVUFBVSxDQUFDLGVBQWUsQ0FBRSxFQUFFLENBQUMsQ0FBRSxDQUFFLENBQUM7NEJBRWhILEdBQUcsQ0FBQyxZQUFZLENBQUUsWUFBWSxFQUFFLElBQUksS0FBSyxDQUFDLGVBQWUsQ0FBRSxJQUFJLFlBQVksQ0FBRSxVQUFVLENBQUMsZ0JBQWdCLENBQUUsRUFBRSxDQUFDLENBQUUsQ0FBRSxDQUFDOzRCQUVsSCxHQUFHLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQzt3QkFFaEMsQ0FBQzt3QkFHRCxJQUFJLGlCQUFpQixHQUFHLFVBQVUsQ0FBQyxtQkFBbUIsQ0FBRSxDQUFDLENBQUUsQ0FBQzt3QkFDNUQsSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDO3dCQUNuQixHQUFHLENBQUMsQ0FBRSxJQUFJLG1CQUFtQixHQUFHLENBQUMsRUFBRSxtQkFBbUIsR0FBRyxVQUFVLENBQUMsbUJBQW1CLENBQUMsTUFBTSxFQUFFLEVBQUcsbUJBQW1CLEVBQUcsQ0FBQzs0QkFFdEgsRUFBRSxDQUFDLENBQUUsVUFBVSxDQUFDLG1CQUFtQixDQUFFLG1CQUFtQixDQUFFLEtBQUssaUJBQWtCLENBQUMsQ0FBQyxDQUFDO2dDQUVoRixHQUFHLENBQUMsUUFBUSxDQUFFLFVBQVUsRUFBRSxtQkFBbUIsR0FBRyxVQUFVLEVBQUUsaUJBQWlCLENBQUUsQ0FBQztnQ0FDaEYsVUFBVSxHQUFHLG1CQUFtQixDQUFDO2dDQUNqQyxpQkFBaUIsR0FBRyxVQUFVLENBQUMsbUJBQW1CLENBQUUsbUJBQW1CLENBQUUsQ0FBQzs0QkFFOUUsQ0FBQzt3QkFFTCxDQUFDO3dCQUVELE1BQU0sQ0FBQyxHQUFHLENBQUM7d0JBT1gsb0JBQXFCLFlBQVk7NEJBRTdCLElBQUksVUFBVSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUUsQ0FBQyxDQUFFLENBQUM7NEJBRS9ELElBQUksV0FBVyxHQUFHLFVBQVUsQ0FBQyxVQUFVLENBQUMsc0JBQXNCLENBQUM7NEJBQy9ELElBQUksYUFBYSxHQUFHLFVBQVUsQ0FBQyxVQUFVLENBQUMsd0JBQXdCLENBQUM7NEJBQ25FLElBQUksTUFBTSxHQUFHLGVBQWUsQ0FBRSxVQUFVLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFFLENBQUM7NEJBQ3pFLElBQUksV0FBVyxHQUFHLEVBQUUsQ0FBQzs0QkFDckIsRUFBRSxDQUFDLENBQUUsYUFBYSxLQUFLLGVBQWdCLENBQUMsQ0FBQyxDQUFDO2dDQUV0QyxXQUFXLEdBQUcsYUFBYSxDQUFFLFVBQVUsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUUsQ0FBQzs0QkFFaEYsQ0FBQzs0QkFFRCxNQUFNLENBQUM7Z0NBQ0gsUUFBUSxFQUFFLENBQUM7Z0NBQ1gsTUFBTSxFQUFFLE1BQU07Z0NBQ2QsT0FBTyxFQUFFLFdBQVc7Z0NBQ3BCLFdBQVcsRUFBRSxXQUFXO2dDQUN4QixhQUFhLEVBQUUsYUFBYTs2QkFDL0IsQ0FBQzt3QkFFTixDQUFDO3dCQU9ELGdCQUFpQixZQUFZOzRCQUV6QixJQUFJLE1BQU0sR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBRSxDQUFDLENBQUUsQ0FBQzs0QkFFdkQsSUFBSSxXQUFXLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsQ0FBQzs0QkFDM0QsSUFBSSxhQUFhLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQzs0QkFDL0QsSUFBSSxNQUFNLEdBQUcsZUFBZSxDQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUUsQ0FBQzs0QkFDaEUsSUFBSSxXQUFXLEdBQUcsRUFBRSxDQUFDOzRCQUNyQixFQUFFLENBQUMsQ0FBRSxhQUFhLEtBQUssZUFBZ0IsQ0FBQyxDQUFDLENBQUM7Z0NBRXRDLFdBQVcsR0FBRyxhQUFhLENBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBRSxDQUFDOzRCQUV4RSxDQUFDOzRCQUVELE1BQU0sQ0FBQztnQ0FDSCxRQUFRLEVBQUUsQ0FBQztnQ0FDWCxNQUFNLEVBQUUsTUFBTTtnQ0FDZCxPQUFPLEVBQUUsV0FBVztnQ0FDcEIsV0FBVyxFQUFFLFdBQVc7Z0NBQ3hCLGFBQWEsRUFBRSxhQUFhOzZCQUMvQixDQUFDO3dCQUVOLENBQUM7d0JBT0Qsc0JBQXVCLFlBQVk7NEJBRS9CLElBQUksWUFBWSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsb0JBQW9CLENBQUUsQ0FBQyxDQUFFLENBQUM7NEJBQ25FLElBQUksV0FBVyxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUMsc0JBQXNCLENBQUM7NEJBQ2pFLElBQUksYUFBYSxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUMsd0JBQXdCLENBQUM7NEJBQ3JFLElBQUksbUJBQW1CLEdBQUcsYUFBYSxDQUFFLFlBQVksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUUsQ0FBQzs0QkFLeEYsSUFBSSxlQUFlLEdBQUcsRUFBRSxDQUFDOzRCQUN6QixtQkFBbUIsQ0FBQyxPQUFPLENBQUUsVUFBVyxhQUFhLEVBQUUsS0FBSztnQ0FFeEQsZUFBZSxDQUFDLElBQUksQ0FBRSxLQUFLLENBQUUsQ0FBQzs0QkFFbEMsQ0FBQyxDQUFFLENBQUM7NEJBRUosTUFBTSxDQUFDO2dDQUNILFFBQVEsRUFBRSxDQUFDO2dDQUNYLE1BQU0sRUFBRSxtQkFBbUI7Z0NBQzNCLE9BQU8sRUFBRSxlQUFlO2dDQUN4QixXQUFXLEVBQUUsV0FBVztnQ0FDeEIsYUFBYSxFQUFFLGFBQWE7NkJBQy9CLENBQUM7d0JBRU4sQ0FBQzt3QkFVRCxpQkFBa0Isa0JBQWtCLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxVQUFVOzRCQUV2RSxJQUFJLE9BQU8sR0FBRztnQ0FFVixlQUFlLEVBQUU7b0NBVWIsTUFBTSxFQUFFLFVBQVcsa0JBQWtCLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxVQUFVO3dDQUV4RSxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUUsQ0FBRSxrQkFBa0IsR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFFLEVBQUUsQ0FBRSxrQkFBa0IsR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFFLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBRSxDQUFDO29DQUV2SixDQUFDO29DQVVELGFBQWEsRUFBRSxVQUFXLGtCQUFrQixFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsVUFBVTt3Q0FFL0UsSUFBSSxLQUFLLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBRSxrQkFBa0IsQ0FBRSxDQUFDO3dDQUNyRCxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUUsQ0FBRSxLQUFLLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBRSxFQUFFLENBQUUsS0FBSyxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUUsR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFFLENBQUM7b0NBRTdILENBQUM7aUNBRUo7Z0NBRUQsU0FBUyxFQUFFO29DQVVQLE1BQU0sRUFBRSxVQUFXLGtCQUFrQixFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsVUFBVTt3Q0FFeEUsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFFLFlBQVksR0FBRyxVQUFVLENBQUMsUUFBUSxFQUFFLFlBQVksR0FBRyxVQUFVLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUUsQ0FBQztvQ0FFbkksQ0FBQztvQ0FVRCxhQUFhLEVBQUUsVUFBVyxrQkFBa0IsRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLFVBQVU7d0NBRS9FLElBQUksS0FBSyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUUsWUFBWSxDQUFFLENBQUM7d0NBQy9DLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBRSxLQUFLLEdBQUcsVUFBVSxDQUFDLFFBQVEsRUFBRSxLQUFLLEdBQUcsVUFBVSxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFFLENBQUM7b0NBRXJILENBQUM7aUNBRUo7Z0NBRUQsT0FBTyxFQUFFO29DQVVMLGFBQWEsRUFBRSxVQUFXLGtCQUFrQixFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsVUFBVTt3Q0FFL0UsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUUsQ0FBQyxDQUFFLEdBQUcsVUFBVSxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUMsT0FBTyxDQUFFLENBQUMsQ0FBRSxHQUFHLFVBQVUsQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBRSxDQUFDO29DQUV6SixDQUFDO2lDQUVKOzZCQUVKLENBQUM7NEJBRUYsTUFBTSxDQUFDLE9BQU8sQ0FBRSxVQUFVLENBQUMsV0FBVyxDQUFFLENBQUUsVUFBVSxDQUFDLGFBQWEsQ0FBRSxDQUFFLGtCQUFrQixFQUFFLFlBQVksRUFBRSxXQUFXLEVBQUUsVUFBVSxDQUFFLENBQUM7d0JBRXRJLENBQUM7b0JBRUwsQ0FBQztnQkFFTCxDQUFDO2dCQVFELDRCQUE2QixZQUFZLEVBQUUsYUFBYTtvQkFFcEQsRUFBRSxDQUFDLENBQUUsS0FBSyxDQUFDLFVBQVUsS0FBSyxTQUFVLENBQUMsQ0FBQyxDQUFDO3dCQUVuQyxPQUFPLENBQUMsS0FBSyxDQUFFLHVIQUF1SCxDQUFFLENBQUM7d0JBQ3pJLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztvQkFFdEMsQ0FBQztvQkFFRCxJQUFJLEtBQUssR0FBRyxRQUFRLENBQUUsWUFBWSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUUsQ0FBQztvQkFFdEQsRUFBRSxDQUFDLENBQUUsS0FBSyxDQUFFLEtBQUssQ0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFFbkIsT0FBTyxDQUFDLEtBQUssQ0FBRSwyQkFBMkIsR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDLEtBQUssR0FBRywwQkFBMEIsR0FBRyxZQUFZLENBQUMsRUFBRSxDQUFFLENBQUM7d0JBQzVILE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztvQkFFdEMsQ0FBQztvQkFFRCxJQUFJLEtBQUssR0FBRyxlQUFlLENBQUUsWUFBWSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBRSxDQUFDO29CQUM3RSxJQUFJLGFBQWEsR0FBRyxFQUFFLENBQUM7b0JBQ3ZCLElBQUksWUFBWSxHQUFHLGVBQWUsQ0FBRSxZQUFZLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFFLENBQUM7b0JBRWhGLEdBQUcsQ0FBQyxDQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFHLENBQUM7d0JBRWhELGFBQWEsQ0FBQyxJQUFJLENBQUUsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFFLFlBQVksQ0FBRSxDQUFDLENBQUUsRUFBRSxZQUFZLENBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBRSxFQUFFLFlBQVksQ0FBRSxDQUFDLEdBQUcsQ0FBQyxDQUFFLEVBQUUsWUFBWSxDQUFFLENBQUMsR0FBRyxDQUFDLENBQUUsQ0FBRSxDQUFFLENBQUM7b0JBRXRJLENBQUM7b0JBRUQsRUFBRSxDQUFDLENBQUUsWUFBWSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEtBQUssUUFBUyxDQUFDLENBQUMsQ0FBQzt3QkFFOUMsYUFBYSxDQUFDLElBQUksQ0FBRSxhQUFhLENBQUUsQ0FBQyxDQUFFLENBQUUsQ0FBQztvQkFFN0MsQ0FBQztvQkFFRCxJQUFJLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxVQUFVLENBQUUsS0FBSyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsYUFBYSxDQUFFLENBQUM7b0JBQ3BFLElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUUsYUFBYSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUUsQ0FBQztvQkFFN0QsSUFBSSxZQUFZLEdBQUcsRUFBRSxDQUFDO29CQUN0QixRQUFRLENBQUMsT0FBTyxDQUFFLFVBQVcsUUFBUTt3QkFFakMsSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO3dCQUMvQixZQUFZLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBRSxLQUFLLENBQUUsQ0FBQztvQkFFaEQsQ0FBQyxDQUFFLENBQUM7b0JBRUosSUFBSSxRQUFRLEdBQUcsSUFBSSxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7b0JBQzFDLFFBQVEsQ0FBQyxZQUFZLENBQUUsVUFBVSxFQUFFLElBQUksS0FBSyxDQUFDLGVBQWUsQ0FBRSxJQUFJLFlBQVksQ0FBRSxZQUFZLENBQUUsRUFBRSxDQUFDLENBQUUsQ0FBRSxDQUFDO29CQUV0RyxNQUFNLENBQUMsUUFBUSxDQUFDO2dCQUVwQixDQUFDO1lBRUwsQ0FBQztRQUVMLENBQUM7UUFXRCxvQkFBcUIsT0FBTyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLFdBQVc7WUFFNUUsSUFBSSxVQUFVLEdBQUcsSUFBSSxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7WUFFbkMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBSy9DLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztZQUtwQixJQUFJLFFBQVEsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1lBRXpCLEdBQUcsQ0FBQyxDQUFFLElBQUksTUFBTSxJQUFJLFNBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBRTdCLElBQUksRUFBRSxHQUFHLFFBQVEsQ0FBRSxNQUFNLENBQUUsQ0FBQztnQkFDNUIsSUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFFLE1BQU0sQ0FBRSxDQUFDO2dCQUMvQixJQUFJLEtBQUssR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFFLEVBQUUsQ0FBRSxDQUFDO2dCQUNsQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUM7Z0JBQ2pCLEdBQUcsQ0FBQyxDQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRyxDQUFDLEVBQUcsQ0FBQztvQkFFL0MsV0FBVyxDQUFDLE9BQU8sQ0FBRSxVQUFXLFFBQVE7d0JBRXBDLEVBQUUsQ0FBQyxDQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFFLEtBQUssQ0FBQyxPQUFPLENBQUUsQ0FBQyxDQUFFLENBQUMsRUFBRSxDQUFHLENBQUMsQ0FBQyxDQUFDOzRCQUU5QyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7NEJBQ3pCLElBQUksS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFFLFVBQVcsV0FBVztnQ0FFeEQsTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEtBQUssS0FBSyxDQUFDLE9BQU8sQ0FBRSxDQUFDLENBQUUsQ0FBQyxFQUFFLENBQUM7NEJBRXhELENBQUMsQ0FBRSxDQUFDOzRCQUNKLFFBQVEsQ0FBQyxLQUFLLENBQUUsS0FBSyxDQUFFLEdBQUcsS0FBSyxDQUFDO3dCQUVwQyxDQUFDO29CQUVMLENBQUMsQ0FBRSxDQUFDO2dCQUVSLENBQUM7Z0JBQ0QsRUFBRSxDQUFDLENBQUUsQ0FBRSxLQUFNLENBQUMsQ0FBQyxDQUFDO29CQUVaLE1BQU0sQ0FBQyxDQUFFLElBQUksQ0FBQyxRQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUV0QixLQUFLLE1BQU07NEJBSVAsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDOzRCQUtwQixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUM7NEJBS3BCLElBQUksU0FBUyxHQUFHLEVBQUUsQ0FBQzs0QkFFbkIsS0FBSyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUUsVUFBVyxLQUFLO2dDQUVwQyxFQUFFLENBQUMsQ0FBRSxXQUFXLENBQUMsR0FBRyxDQUFFLEtBQUssQ0FBQyxFQUFFLENBQUcsQ0FBQyxDQUFDLENBQUM7b0NBRWhDLFFBQVEsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFFLEtBQUssQ0FBQyxFQUFFLENBQUUsQ0FBQztnQ0FFM0MsQ0FBQztnQ0FFRCxFQUFFLENBQUMsQ0FBRSxXQUFXLENBQUMsR0FBRyxDQUFFLEtBQUssQ0FBQyxFQUFFLENBQUcsQ0FBQyxDQUFDLENBQUM7b0NBRWhDLFNBQVMsQ0FBQyxJQUFJLENBQUUsV0FBVyxDQUFDLEdBQUcsQ0FBRSxLQUFLLENBQUMsRUFBRSxDQUFFLENBQUUsQ0FBQztnQ0FFbEQsQ0FBQzs0QkFFTCxDQUFDLENBQUUsQ0FBQzs0QkFDSixFQUFFLENBQUMsQ0FBRSxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUUsQ0FBQyxDQUFDLENBQUM7Z0NBRXpCLFFBQVEsR0FBRyxJQUFJLEtBQUssQ0FBQyxhQUFhLENBQUUsU0FBUyxDQUFFLENBQUM7NEJBRXBELENBQUM7NEJBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFFLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBRSxDQUFDLENBQUMsQ0FBQztnQ0FFaEMsUUFBUSxHQUFHLFNBQVMsQ0FBRSxDQUFDLENBQUUsQ0FBQzs0QkFFOUIsQ0FBQzs0QkFBQyxJQUFJLENBQUMsQ0FBQztnQ0FFSixRQUFRLEdBQUcsSUFBSSxLQUFLLENBQUMsaUJBQWlCLENBQUUsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLENBQUUsQ0FBQzs0QkFFbEUsQ0FBQzs0QkFDRCxFQUFFLENBQUMsQ0FBRSxRQUFRLENBQUMsWUFBYSxDQUFDLENBQUMsQ0FBQztnQ0FFMUIsU0FBUyxDQUFDLE9BQU8sQ0FBRSxVQUFXLFFBQVE7b0NBRWxDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO2dDQUU3QixDQUFDLENBQUUsQ0FBQztnQ0FDSixRQUFRLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztnQ0FDekIsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLFdBQVcsQ0FBRSxRQUFRLEVBQUUsUUFBUSxDQUFFLENBQUM7NEJBRXhELENBQUM7NEJBQUMsSUFBSSxDQUFDLENBQUM7Z0NBRUosS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLElBQUksQ0FBRSxRQUFRLEVBQUUsUUFBUSxDQUFFLENBQUM7NEJBRWpELENBQUM7NEJBQ0QsS0FBSyxDQUFDO3dCQUVWLEtBQUssWUFBWTs0QkFDYixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUM7NEJBRXBCLEtBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFFLFVBQVcsS0FBSztnQ0FFcEMsRUFBRSxDQUFDLENBQUUsV0FBVyxDQUFDLEdBQUcsQ0FBRSxLQUFLLENBQUMsRUFBRSxDQUFHLENBQUMsQ0FBQyxDQUFDO29DQUVoQyxRQUFRLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBRSxLQUFLLENBQUMsRUFBRSxDQUFFLENBQUM7Z0NBRTNDLENBQUM7NEJBRUwsQ0FBQyxDQUFFLENBQUM7NEJBR0osUUFBUSxHQUFHLElBQUksS0FBSyxDQUFDLGlCQUFpQixDQUFFLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFLENBQUUsQ0FBQzs0QkFDNUUsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLElBQUksQ0FBRSxRQUFRLEVBQUUsUUFBUSxDQUFFLENBQUM7NEJBQzdDLEtBQUssQ0FBQzt3QkFFVjs0QkFDSSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7NEJBQzdCLEtBQUssQ0FBQztvQkFFZCxDQUFDO2dCQUVMLENBQUM7Z0JBRUQsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBRSxHQUFHLEVBQUUsRUFBRSxDQUFFLENBQUMsT0FBTyxDQUFFLEdBQUcsRUFBRSxFQUFFLENBQUUsQ0FBQyxPQUFPLENBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBRSxDQUFDO2dCQUNwRixLQUFLLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztnQkFFbEIsVUFBVSxDQUFDLElBQUksQ0FBRSxLQUFLLENBQUUsQ0FBQztnQkFDekIsUUFBUSxDQUFDLEdBQUcsQ0FBRSxFQUFFLEVBQUUsS0FBSyxDQUFFLENBQUM7WUFFOUIsQ0FBQztZQUVELFVBQVUsQ0FBQyxPQUFPLENBQUUsVUFBVyxLQUFLO2dCQUVoQyxJQUFJLElBQUksR0FBRyxTQUFTLENBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBRSxDQUFDO2dCQUVyQyxFQUFFLENBQUMsQ0FBRSxpQkFBaUIsSUFBSSxJQUFJLENBQUMsVUFBVyxDQUFDLENBQUMsQ0FBQztvQkFFekMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUUsZUFBZSxDQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBRSxDQUFFLENBQUM7Z0JBRXpGLENBQUM7Z0JBRUQsRUFBRSxDQUFDLENBQUUsY0FBYyxJQUFJLElBQUksQ0FBQyxVQUFXLENBQUMsQ0FBQyxDQUFDO29CQUV0QyxJQUFJLFFBQVEsR0FBRyxlQUFlLENBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFFLENBQUMsR0FBRyxDQUFFLFVBQVcsS0FBSzt3QkFFdEYsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQztvQkFFakMsQ0FBQyxDQUFFLENBQUM7b0JBQ0osUUFBUSxDQUFDLElBQUksQ0FBRSxLQUFLLENBQUUsQ0FBQztvQkFDdkIsS0FBSyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUUsUUFBUSxDQUFFLENBQUM7Z0JBRXpDLENBQUM7Z0JBRUQsRUFBRSxDQUFDLENBQUUsYUFBYSxJQUFJLElBQUksQ0FBQyxVQUFXLENBQUMsQ0FBQyxDQUFDO29CQUVyQyxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBRSxlQUFlLENBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFFLENBQUUsQ0FBQztnQkFFbEYsQ0FBQztnQkFFRCxJQUFJLEtBQUssR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFFLEtBQUssQ0FBQyxNQUFNLENBQUUsQ0FBQztnQkFDNUMsR0FBRyxDQUFDLENBQUUsSUFBSSxXQUFXLEdBQUcsQ0FBQyxFQUFFLFdBQVcsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUcsRUFBRyxDQUFDO29CQUU3RSxJQUFJLE1BQU0sR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFFLFVBQVcsR0FBRzt3QkFFN0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEtBQUssS0FBSyxDQUFDLE9BQU8sQ0FBRSxXQUFXLENBQUUsQ0FBQyxFQUFFLENBQUM7b0JBRTFELENBQUMsQ0FBRSxDQUFDO29CQUNKLEVBQUUsQ0FBQyxDQUFFLE1BQU0sR0FBRyxDQUFFLENBQUUsQ0FBQyxDQUFDLENBQUM7d0JBRWpCLFVBQVUsQ0FBRSxNQUFNLENBQUUsQ0FBQyxHQUFHLENBQUUsS0FBSyxDQUFFLENBQUM7d0JBQ2xDLEtBQUssQ0FBQztvQkFFVixDQUFDO2dCQUVMLENBQUM7Z0JBQ0QsRUFBRSxDQUFDLENBQUUsS0FBSyxDQUFDLE1BQU0sS0FBSyxJQUFLLENBQUMsQ0FBQyxDQUFDO29CQUUxQixVQUFVLENBQUMsR0FBRyxDQUFFLEtBQUssQ0FBRSxDQUFDO2dCQUU1QixDQUFDO1lBRUwsQ0FBQyxDQUFFLENBQUM7WUFJSixVQUFVLENBQUMsaUJBQWlCLENBQUUsSUFBSSxDQUFFLENBQUM7WUFHckMsSUFBSSxZQUFZLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDO1lBQ2pELEdBQUcsQ0FBQyxDQUFFLElBQUksTUFBTSxJQUFJLFlBQWEsQ0FBQyxDQUFDLENBQUM7Z0JBRWhDLEVBQUUsQ0FBQyxDQUFFLFlBQVksQ0FBRSxNQUFNLENBQUUsQ0FBQyxRQUFRLEtBQUssVUFBVyxDQUFDLENBQUMsQ0FBQztvQkFFbkQsWUFBWSxHQUFHLFlBQVksQ0FBRSxNQUFNLENBQUUsQ0FBQztvQkFDdEMsS0FBSyxDQUFDO2dCQUVWLENBQUM7WUFFTCxDQUFDO1lBQ0QsRUFBRSxDQUFDLENBQUUsWUFBYSxDQUFDLENBQUMsQ0FBQztnQkFFakIsSUFBSSxRQUFRLEdBQUcsWUFBWSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7Z0JBQzlDLElBQUksYUFBYSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7Z0JBRTlCLFFBQVEsQ0FBQyxPQUFPLENBQUUsVUFBVyxJQUFJO29CQUU3QixJQUFJLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBRSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFFLENBQUM7b0JBRXRFLGFBQWEsQ0FBQyxHQUFHLENBQUUsUUFBUSxDQUFFLElBQUksQ0FBQyxFQUFFLENBQUUsRUFBRSxTQUFTLENBQUUsQ0FBQztnQkFFeEQsQ0FBQyxDQUFFLENBQUM7WUFFUixDQUFDO1lBRUQsV0FBVyxDQUFDLE9BQU8sQ0FBRSxVQUFXLFFBQVEsRUFBRSxNQUFNO2dCQUU1QyxRQUFRLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBRSxVQUFXLFdBQVcsRUFBRSxnQkFBZ0I7b0JBSzVELElBQUksSUFBSSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUUsZ0JBQWdCLENBQUUsQ0FBQztvQkFDOUMsRUFBRSxDQUFDLENBQUUsQ0FBRSxhQUFhLENBQUMsR0FBRyxDQUFFLElBQUksQ0FBQyxNQUFNLENBQUcsQ0FBQyxDQUFDLENBQUM7d0JBRXZDLE1BQU0sQ0FBQztvQkFFWCxDQUFDO29CQUNELElBQUksR0FBRyxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBRSxDQUFDO29CQUMzQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBRSxHQUFHLENBQUUsQ0FBQztnQkFFakMsQ0FBQyxDQUFFLENBQUM7Z0JBR0osUUFBUSxDQUFDLFFBQVEsR0FBRyxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUUsUUFBUSxDQUFDLEtBQUssQ0FBRSxDQUFDO2dCQUN6RCxJQUFJLEtBQUssR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFFLE1BQU0sQ0FBRSxDQUFDO2dCQUN0QyxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBRSxVQUFXLE1BQU07b0JBRXBDLEVBQUUsQ0FBQyxDQUFFLFdBQVcsQ0FBQyxHQUFHLENBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFFakMsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQzt3QkFDdEIsSUFBSSxRQUFRLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBRSxLQUFLLENBQUUsQ0FBQzt3QkFDeEMsR0FBRyxDQUFDLENBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFHLENBQUMsRUFBRyxDQUFDOzRCQUVsRCxFQUFFLENBQUMsQ0FBRSxRQUFRLENBQUMsR0FBRyxDQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUUsQ0FBQyxDQUFFLENBQUMsRUFBRSxDQUFHLENBQUMsQ0FBQyxDQUFDO2dDQUU3QyxJQUFJLEtBQUssR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUUsQ0FBQyxDQUFFLENBQUMsRUFBRSxDQUFFLENBQUM7Z0NBRXJELEtBQUssQ0FBQyxJQUFJLENBQUUsUUFBUSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsV0FBVyxDQUFFLENBQUM7Z0NBQ25ELEtBQUssQ0FBQzs0QkFFVixDQUFDO3dCQUVMLENBQUM7b0JBRUwsQ0FBQztnQkFFTCxDQUFDLENBQUUsQ0FBQztZQUVSLENBQUMsQ0FBRSxDQUFDO1lBSUosVUFBVSxDQUFDLE9BQU8sQ0FBRSxVQUFXLEtBQUs7Z0JBRWhDLElBQUksSUFBSSxHQUFHLFNBQVMsQ0FBRSxLQUFLLENBQUMsTUFBTSxDQUFFLENBQUM7Z0JBRXJDLEVBQUUsQ0FBQyxDQUFFLGlCQUFpQixJQUFJLElBQUksQ0FBQyxVQUFXLENBQUMsQ0FBQyxDQUFDO29CQUV6QyxLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBRSxlQUFlLENBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFFLENBQUUsQ0FBQztnQkFFekYsQ0FBQztnQkFFRCxFQUFFLENBQUMsQ0FBRSxjQUFjLElBQUksSUFBSSxDQUFDLFVBQVcsQ0FBQyxDQUFDLENBQUM7b0JBRXRDLElBQUksUUFBUSxHQUFHLGVBQWUsQ0FBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUUsQ0FBQyxHQUFHLENBQUUsVUFBVyxLQUFLO3dCQUV0RixNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDO29CQUVqQyxDQUFDLENBQUUsQ0FBQztvQkFDSixRQUFRLENBQUMsSUFBSSxDQUFFLEtBQUssQ0FBRSxDQUFDO29CQUN2QixLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBRSxRQUFRLENBQUUsQ0FBQztnQkFFekMsQ0FBQztnQkFFRCxFQUFFLENBQUMsQ0FBRSxhQUFhLElBQUksSUFBSSxDQUFDLFVBQVcsQ0FBQyxDQUFDLENBQUM7b0JBRXJDLEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFFLGVBQWUsQ0FBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUUsQ0FBRSxDQUFDO2dCQUVsRixDQUFDO1lBRUwsQ0FBQyxDQUFFLENBQUM7WUFLSixVQUFVLENBQUMsUUFBUSxHQUFHO2dCQUNsQixLQUFLLEVBQUUsVUFBVTthQUNwQixDQUFDO1lBRUYsSUFBSSxVQUFVLEdBQUcsZUFBZSxDQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsVUFBVSxDQUFFLENBQUM7WUFFckUsYUFBYSxDQUFFLFVBQVUsRUFBRSxVQUFVLENBQUUsQ0FBQztZQUV4QyxNQUFNLENBQUMsVUFBVSxDQUFDO1FBRXRCLENBQUM7UUFPRCx5QkFBMEIsT0FBTyxFQUFFLFdBQVcsRUFBRSxVQUFVO1lBRXRELElBQUksUUFBUSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDO1lBQzNELElBQUksU0FBUyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQztZQUN4RCxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUM7WUFDeEQsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDO1lBa1h4RCxJQUFJLFlBQVksR0FBRztnQkFDZixNQUFNLEVBQUUsSUFBSSxHQUFHLEVBQUU7Z0JBQ2pCLE1BQU0sRUFBRSxJQUFJLEdBQUcsRUFBRTtnQkFDakIsTUFBTSxFQUFFLElBQUksR0FBRyxFQUFFO2dCQUNqQixNQUFNLEVBQUUsQ0FBQztnQkFDVCxHQUFHLEVBQUUsRUFBRTtnQkFDUCxNQUFNLEVBQUUsQ0FBQzthQUNaLENBQUM7WUFjRixJQUFJLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztZQUM3QixHQUFHLENBQUMsQ0FBRSxJQUFJLE1BQU0sSUFBSSxRQUFTLENBQUMsQ0FBQyxDQUFDO2dCQUU1QixFQUFFLENBQUMsQ0FBRSxNQUFNLENBQUMsS0FBSyxDQUFFLEtBQUssQ0FBRyxDQUFDLENBQUMsQ0FBQztvQkFFMUIsSUFBSSxhQUFhLEdBQUcsa0JBQWtCLENBQUUsT0FBTyxFQUFFLFFBQVEsQ0FBRSxNQUFNLENBQUUsRUFBRSxXQUFXLEVBQUUsVUFBVSxDQUFFLENBQUM7b0JBQy9GLG1CQUFtQixDQUFDLElBQUksQ0FBRSxhQUFhLENBQUUsQ0FBQztnQkFFOUMsQ0FBQztZQUVMLENBQUM7WUEyQ0QsSUFBSSxNQUFNLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUN2QixHQUFHLENBQUMsQ0FBRSxJQUFJLHVCQUF1QixHQUFHLENBQUMsRUFBRSx1QkFBdUIsR0FBRyxtQkFBbUIsQ0FBQyxNQUFNLEVBQUUsRUFBRyx1QkFBdUIsRUFBRyxDQUFDO2dCQUV2SCxFQUFFLENBQUMsQ0FBRSxtQkFBbUIsQ0FBRSx1QkFBdUIsQ0FBRSxLQUFLLElBQUssQ0FBQyxDQUFDLENBQUM7b0JBRTVELFFBQVEsQ0FBQztnQkFFYixDQUFDO2dCQUNELE1BQU0sQ0FBQyxHQUFHLENBQUUsbUJBQW1CLENBQUUsdUJBQXVCLENBQUUsQ0FBQyxFQUFFLEVBQUUsbUJBQW1CLENBQUUsdUJBQXVCLENBQUUsQ0FBRSxDQUFDO1lBRXBILENBQUM7WUFjRCxJQUFJLGVBQWUsR0FBRyxFQUFFLENBQUM7WUFDekIsR0FBRyxDQUFDLENBQUUsTUFBTSxJQUFJLFNBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBRXpCLEVBQUUsQ0FBQyxDQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUUsS0FBSyxDQUFHLENBQUMsQ0FBQyxDQUFDO29CQUUxQixJQUFJLGNBQWMsR0FBRyxtQkFBbUIsQ0FBRSxTQUFTLENBQUUsTUFBTSxDQUFFLENBQUUsQ0FBQztvQkFDaEUsZUFBZSxDQUFDLElBQUksQ0FBRSxjQUFjLENBQUUsQ0FBQztvQkFFdkMsSUFBSSxlQUFlLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBRSxjQUFjLENBQUMsRUFBRSxDQUFFLENBQUMsT0FBTyxDQUFFLENBQUMsQ0FBRSxDQUFDO29CQUN4RSxJQUFJLGFBQWEsR0FBRyxlQUFlLENBQUMsRUFBRSxDQUFDO29CQUN2QyxJQUFJLHVCQUF1QixHQUFHLGVBQWUsQ0FBQyxZQUFZLENBQUM7b0JBQzNELElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztvQkFFZCxFQUFFLENBQUMsQ0FBRSx1QkFBdUIsQ0FBQyxLQUFLLENBQUUsR0FBRyxDQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUV6QyxJQUFJLEdBQUcsR0FBRyxDQUFDO29CQUVmLENBQUM7b0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFFLHVCQUF1QixDQUFDLEtBQUssQ0FBRSxHQUFHLENBQUcsQ0FBQyxDQUFDLENBQUM7d0JBRWhELElBQUksR0FBRyxHQUFHLENBQUM7b0JBRWYsQ0FBQztvQkFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUUsdUJBQXVCLENBQUMsS0FBSyxDQUFFLEdBQUcsQ0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFFaEQsSUFBSSxHQUFHLEdBQUcsQ0FBQztvQkFFZixDQUFDO29CQUFDLElBQUksQ0FBQyxDQUFDO3dCQUVKLFFBQVEsQ0FBQztvQkFFYixDQUFDO29CQUVELE1BQU0sQ0FBQyxHQUFHLENBQUUsYUFBYSxDQUFFLENBQUMsTUFBTSxDQUFFLElBQUksQ0FBRSxHQUFHLGNBQWMsQ0FBQztnQkFFaEUsQ0FBQztZQUVMLENBQUM7WUFFRCxNQUFNLENBQUMsT0FBTyxDQUFFLFVBQVcsU0FBUztnQkFFaEMsSUFBSSxFQUFFLEdBQUcsU0FBUyxDQUFDLGVBQWUsQ0FBQztnQkFDbkMsRUFBRSxDQUFDLENBQUUsQ0FBRSxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBRSxFQUFFLENBQUcsQ0FBQyxDQUFDLENBQUM7b0JBRXBDLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUUsQ0FBQztnQkFFakUsQ0FBQztnQkFDRCxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBRSxFQUFFLENBQUUsQ0FBRSxTQUFTLENBQUMsSUFBSSxDQUFFLEdBQUcsU0FBUyxDQUFDO1lBRWhFLENBQUMsQ0FBRSxDQUFDO1lBRUosR0FBRyxDQUFDLENBQUUsSUFBSSxNQUFNLElBQUksU0FBVSxDQUFDLENBQUMsQ0FBQztnQkEySDdCLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztnQkFDZixJQUFJLFFBQVEsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFFLFFBQVEsQ0FBRSxNQUFNLENBQUUsQ0FBRSxDQUFDLFFBQVEsQ0FBQztnQkFDOUQsR0FBRyxDQUFDLENBQUUsSUFBSSxVQUFVLEdBQUcsQ0FBQyxFQUFFLFVBQVUsR0FBRyxRQUFRLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRyxFQUFHLENBQUM7b0JBR3JFLEVBQUUsQ0FBQyxDQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUUsUUFBUSxDQUFFLFVBQVUsQ0FBRSxDQUFDLEVBQUUsQ0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFFNUMsSUFBSSxTQUFTLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBRSxRQUFRLENBQUUsVUFBVSxDQUFFLENBQUMsRUFBRSxDQUFFLENBQUM7d0JBQ3hELElBQUksTUFBTSxHQUFHLFNBQVMsQ0FBQyxlQUFlLENBQUM7d0JBQ3ZDLEVBQUUsQ0FBQyxDQUFFLEtBQUssQ0FBRSxNQUFNLENBQUUsS0FBSyxTQUFVLENBQUMsQ0FBQyxDQUFDOzRCQUVsQyxLQUFLLENBQUUsTUFBTSxDQUFFLEdBQUc7Z0NBQ2QsQ0FBQyxFQUFFLElBQUk7Z0NBQ1AsQ0FBQyxFQUFFLElBQUk7Z0NBQ1AsQ0FBQyxFQUFFLElBQUk7NkJBQ1YsQ0FBQzt3QkFFTixDQUFDO3dCQUVELEtBQUssQ0FBRSxNQUFNLENBQUUsQ0FBRSxTQUFTLENBQUMsSUFBSSxDQUFFLEdBQUcsU0FBUyxDQUFDO29CQUVsRCxDQUFDO2dCQUVMLENBQUM7Z0JBRUQsWUFBWSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUUsUUFBUSxDQUFFLE1BQU0sQ0FBRSxFQUFFLEtBQUssQ0FBRSxDQUFDO1lBRXpELENBQUM7WUFFRCxHQUFHLENBQUMsQ0FBRSxJQUFJLE1BQU0sSUFBSSxTQUFVLENBQUMsQ0FBQyxDQUFDO2dCQUU3QixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7Z0JBQ2hCLElBQUksUUFBUSxHQUFHLFdBQVcsQ0FBQyxHQUFHLENBQUUsUUFBUSxDQUFFLE1BQU0sQ0FBRSxDQUFFLENBQUMsUUFBUSxDQUFDO2dCQUM5RCxJQUFJLFlBQVksR0FBRyxDQUFDLENBQUM7Z0JBQ3JCLElBQUksWUFBWSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7Z0JBQ3BDLEdBQUcsQ0FBQyxDQUFFLElBQUksVUFBVSxHQUFHLENBQUMsRUFBRSxVQUFVLEdBQUcsUUFBUSxDQUFDLE1BQU0sRUFBRSxFQUFHLFVBQVUsRUFBRyxDQUFDO29CQUVyRSxFQUFFLENBQUMsQ0FBRSxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBRSxRQUFRLENBQUUsVUFBVSxDQUFFLENBQUMsRUFBRSxDQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUV6RCxJQUFJLFlBQVksR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBRSxRQUFRLENBQUUsVUFBVSxDQUFFLENBQUMsRUFBRSxDQUFFLENBQUM7d0JBQ3hFLE1BQU0sQ0FBQyxJQUFJLENBQUUsWUFBWSxDQUFFLENBQUM7d0JBRTVCLFlBQVksQ0FBQyxPQUFPLENBQUUsVUFBVyxLQUFLOzRCQUVsQyxFQUFFLENBQUMsQ0FBRSxLQUFNLENBQUMsQ0FBQyxDQUFDO2dDQUVWLDRCQUE0QixDQUFFLEtBQUssQ0FBRSxDQUFDOzRCQUUxQyxDQUFDOzRCQTZIRCxzQ0FBdUMsS0FBSztnQ0FtQ3hDLGlDQUFrQyxLQUFLO29DQU1uQyxzQ0FBdUMsSUFBSTt3Q0FFdkMsWUFBWSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFFLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFFLEdBQUcsWUFBWSxDQUFDO3dDQUN2SCxZQUFZLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBRyxZQUFZLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBRyxZQUFZLENBQUM7b0NBRW5GLENBQUM7b0NBRUQsRUFBRSxDQUFDLENBQUUsS0FBSyxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUM7d0NBRVosNEJBQTRCLENBQUUsS0FBSyxDQUFDLENBQUMsQ0FBRSxDQUFDO29DQUU1QyxDQUFDO29DQUNELEVBQUUsQ0FBQyxDQUFFLEtBQUssQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDO3dDQUVaLDRCQUE0QixDQUFFLEtBQUssQ0FBQyxDQUFDLENBQUUsQ0FBQztvQ0FFNUMsQ0FBQztvQ0FDRCxFQUFFLENBQUMsQ0FBRSxLQUFLLENBQUMsQ0FBRSxDQUFDLENBQUMsQ0FBQzt3Q0FFWiw0QkFBNEIsQ0FBRSxLQUFLLENBQUMsQ0FBQyxDQUFFLENBQUM7b0NBRTVDLENBQUM7Z0NBRUwsQ0FBQztnQ0FFRCxFQUFFLENBQUMsQ0FBRSxLQUFLLENBQUMsQ0FBRSxDQUFDLENBQUMsQ0FBQztvQ0FFWix1QkFBdUIsQ0FBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBRSxDQUFDO2dDQUU5QyxDQUFDO2dDQUNELEVBQUUsQ0FBQyxDQUFFLEtBQUssQ0FBQyxDQUFFLENBQUMsQ0FBQyxDQUFDO29DQUVaLHVCQUF1QixDQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFFLENBQUM7Z0NBRTlDLENBQUM7Z0NBQ0QsRUFBRSxDQUFDLENBQUUsS0FBSyxDQUFDLENBQUUsQ0FBQyxDQUFDLENBQUM7b0NBRVosdUJBQXVCLENBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUUsQ0FBQztnQ0FFOUMsQ0FBQzs0QkFFTCxDQUFDO3dCQUVMLENBQUMsQ0FBRSxDQUFDO29CQUVSLENBQUM7Z0JBRUwsQ0FBQztnQkFHRCxFQUFFLENBQUMsQ0FBRSxZQUFZLEdBQUcsWUFBYSxDQUFDLENBQUMsQ0FBQztvQkFFaEMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUUsUUFBUSxDQUFFLE1BQU0sQ0FBRSxFQUFFO3dCQUN6QyxJQUFJLEVBQUUsU0FBUyxDQUFFLE1BQU0sQ0FBRSxDQUFDLFFBQVE7d0JBQ2xDLE1BQU0sRUFBRSxNQUFNO3dCQUNkLE1BQU0sRUFBRSxZQUFZLEdBQUcsWUFBWTt3QkFDbkMsTUFBTSxFQUFFLENBQUUsWUFBWSxHQUFHLFlBQVksQ0FBRSxHQUFHLEVBQUU7cUJBQy9DLENBQUUsQ0FBQztnQkFFUixDQUFDO1lBRUwsQ0FBQztZQUVELE1BQU0sQ0FBQyxZQUFZLENBQUM7WUFRcEIsNEJBQTZCLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsVUFBVTtnQkFFN0UsSUFBSSxZQUFZLEdBQUc7b0JBSWYsRUFBRSxFQUFFLGtCQUFrQixDQUFDLEVBQUU7b0JBS3pCLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxRQUFRO29CQUtqQyxVQUFVLEVBQUUsa0JBQWtCLENBQUMsRUFBRTtvQkFLakMsS0FBSyxFQUFFLEtBQUs7b0JBS1osS0FBSyxFQUFFLEtBQUs7b0JBS1osS0FBSyxFQUFFLEtBQUs7b0JBS1osZUFBZSxFQUFFLENBQUUsQ0FBQztvQkFLcEIsV0FBVyxFQUFFLENBQUUsQ0FBQztvQkFFaEIsTUFBTSxFQUFFO3dCQUNKLENBQUMsRUFBRSxJQUFJO3dCQUNQLENBQUMsRUFBRSxJQUFJO3dCQUNQLENBQUMsRUFBRSxJQUFJO3FCQUNWO2lCQUNKLENBQUM7Z0JBRUYsRUFBRSxDQUFDLENBQUUsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUUsT0FBTyxDQUFHLENBQUMsQ0FBQyxDQUFDO29CQUV2QyxHQUFHLENBQUMsQ0FBRSxJQUFJLFlBQVksSUFBSSxrQkFBa0IsQ0FBQyxVQUFXLENBQUMsQ0FBQyxDQUFDO3dCQUV2RCxFQUFFLENBQUMsQ0FBRSxZQUFZLENBQUMsS0FBSyxDQUFFLEdBQUcsQ0FBRyxDQUFDLENBQUMsQ0FBQzs0QkFFOUIsWUFBWSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7d0JBRTlCLENBQUM7d0JBQ0QsRUFBRSxDQUFDLENBQUUsWUFBWSxDQUFDLEtBQUssQ0FBRSxHQUFHLENBQUcsQ0FBQyxDQUFDLENBQUM7NEJBRTlCLFlBQVksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO3dCQUU5QixDQUFDO3dCQUNELEVBQUUsQ0FBQyxDQUFFLFlBQVksQ0FBQyxLQUFLLENBQUUsR0FBRyxDQUFHLENBQUMsQ0FBQyxDQUFDOzRCQUU5QixZQUFZLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQzt3QkFFOUIsQ0FBQztvQkFFTCxDQUFDO2dCQUVMLENBQUM7Z0JBQUMsSUFBSSxDQUFDLENBQUM7b0JBRUosTUFBTSxDQUFDLElBQUksQ0FBQztnQkFFaEIsQ0FBQztnQkFFRCxJQUFJLEtBQUssR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFFLFlBQVksQ0FBQyxFQUFFLENBQUUsQ0FBQztnQkFDL0MsSUFBSSxnQkFBZ0IsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDO2dCQUVyQyxHQUFHLENBQUMsQ0FBRSxJQUFJLHFCQUFxQixHQUFHLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUscUJBQXFCLElBQUksQ0FBQyxFQUFFLEVBQUcscUJBQXFCLEVBQUcsQ0FBQztvQkFFbkgsSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFFLFVBQVcsSUFBSTt3QkFFN0QsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssZ0JBQWdCLENBQUUscUJBQXFCLENBQUUsQ0FBQyxFQUFFLENBQUM7b0JBRXhFLENBQUMsQ0FBRSxDQUFDO29CQUNKLEVBQUUsQ0FBQyxDQUFFLE1BQU0sR0FBRyxDQUFFLENBQUUsQ0FBQyxDQUFDLENBQUM7d0JBRWpCLFlBQVksQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDO3dCQUN0QyxZQUFZLENBQUMsV0FBVyxHQUFHLGdCQUFnQixDQUFFLHFCQUFxQixDQUFFLENBQUMsRUFBRSxDQUFDO3dCQUN4RSxLQUFLLENBQUM7b0JBRVYsQ0FBQztnQkFFTCxDQUFDO2dCQUVELE1BQU0sQ0FBQyxZQUFZLENBQUM7WUFFeEIsQ0FBQztZQUtELDZCQUE4QixjQUFjO2dCQUV4QyxNQUFNLENBQUM7b0JBQ0gsT0FBTyxFQUFFLElBQUk7b0JBQ2IsRUFBRSxFQUFFLGNBQWMsQ0FBQyxFQUFFO29CQUNyQixVQUFVLEVBQUUsY0FBYyxDQUFDLEVBQUU7b0JBQzdCLEtBQUssRUFBRSxlQUFlLENBQUUsY0FBYyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBRSxDQUFDLEdBQUcsQ0FBRSxVQUFXLElBQUk7d0JBRXZGLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBRSxJQUFJLENBQUUsQ0FBQztvQkFFM0MsQ0FBQyxDQUFFO29CQUNILE1BQU0sRUFBRSxlQUFlLENBQUUsY0FBYyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBRTtvQkFFN0UsUUFBUSxFQUFFLGFBQWEsQ0FBRSxjQUFjLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFFO29CQUM1RSxRQUFRLEVBQUUsZUFBZSxDQUFFLGNBQWMsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBRTtpQkFDckYsQ0FBQztZQUVOLENBQUM7UUFFTCxDQUFDO1FBb1hELHVCQUF3QixLQUFLLEVBQUUsVUFBVTtZQUVyQyxFQUFFLENBQUMsQ0FBRSxLQUFLLENBQUMsVUFBVSxLQUFLLFNBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBRW5DLEtBQUssQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO1lBRTFCLENBQUM7WUFFRCxVQUFVLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBRSxVQUFXLEtBQUs7Z0JBRXZDLElBQUksYUFBYSxHQUFHO29CQUNoQixJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUk7b0JBQ2hCLEdBQUcsRUFBRSxFQUFFO29CQUNQLE1BQU0sRUFBRSxLQUFLLENBQUMsTUFBTTtvQkFDcEIsU0FBUyxFQUFFLEVBQUU7aUJBQ2hCLENBQUM7Z0JBRUYsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7Z0JBRWpDLEtBQUssQ0FBQyxPQUFPLENBQUUsVUFBVyxJQUFJO29CQUUxQixJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBRSxLQUFLLEVBQUUsRUFBRSxDQUFFLENBQUM7b0JBQzFDLElBQUksV0FBVyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUUsVUFBVyxVQUFVO3dCQUVwRCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxVQUFVLENBQUM7b0JBRXRDLENBQUMsQ0FBRSxDQUFDO29CQUNKLGFBQWEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFFLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBRSxDQUFDO2dCQUVsRixDQUFDLENBQUUsQ0FBQztnQkFFSixHQUFHLENBQUMsQ0FBRSxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFHLEVBQUcsQ0FBQztvQkFFbkQsS0FBSyxDQUFDLE9BQU8sQ0FBRSxVQUFXLElBQUksRUFBRSxTQUFTO3dCQUVyQyxJQUFJLGFBQWEsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFFLENBQUMsQ0FBRSxDQUFFLFNBQVMsQ0FBRSxDQUFDO3dCQUVuRCxhQUFhLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBRSxVQUFXLElBQUk7NEJBRTVDLEVBQUUsQ0FBQyxDQUFFLElBQUksQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLElBQUssQ0FBQyxDQUFDLENBQUM7Z0NBRTVCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFFLFdBQVcsQ0FBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBRSxDQUFFLENBQUM7NEJBRWhFLENBQUM7d0JBRUwsQ0FBQyxDQUFFLENBQUM7b0JBRVIsQ0FBQyxDQUFFLENBQUM7Z0JBRVIsQ0FBQztnQkFFRCxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBRSxLQUFLLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBRSxhQUFhLEVBQUUsS0FBSyxDQUFFLENBQUUsQ0FBQztnQkFNcEYscUJBQXNCLGFBQWEsRUFBRSxJQUFJLEVBQUUsS0FBSztvQkFFNUMsSUFBSSxHQUFHLEdBQUc7d0JBQ04sSUFBSSxFQUFFLEtBQUssR0FBRyxVQUFVLENBQUMsR0FBRzt3QkFDNUIsR0FBRyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFO3dCQUM1QixHQUFHLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUU7d0JBQzlCLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRTtxQkFDNUIsQ0FBQztvQkFFRixFQUFFLENBQUMsQ0FBRSxhQUFhLEtBQUssU0FBVSxDQUFDLENBQUMsQ0FBQzt3QkFFaEMsTUFBTSxDQUFDLEdBQUcsQ0FBQztvQkFFZixDQUFDO29CQUVELElBQUksQ0FBQzt3QkFFRCxFQUFFLENBQUMsQ0FBRSxRQUFRLENBQUUsYUFBYSxFQUFFLEdBQUcsQ0FBRSxJQUFJLGFBQWEsQ0FBRSxhQUFhLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBRyxDQUFDLENBQUMsQ0FBQzs0QkFFOUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUUsS0FBSyxDQUFFLEVBQUUsYUFBYSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBRSxLQUFLLENBQUUsRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFFLEtBQUssQ0FBRSxDQUFFLENBQUM7d0JBRS9JLENBQUM7d0JBRUQsRUFBRSxDQUFDLENBQUUsUUFBUSxDQUFFLGFBQWEsRUFBRSxHQUFHLENBQUUsSUFBSSxhQUFhLENBQUUsYUFBYSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUcsQ0FBQyxDQUFDLENBQUM7NEJBRTlFLElBQUksU0FBUyxHQUFHLGNBQWMsQ0FBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFFLEtBQUssQ0FBRSxDQUFFLENBQUM7NEJBQzNFLElBQUksU0FBUyxHQUFHLGNBQWMsQ0FBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFFLEtBQUssQ0FBRSxDQUFFLENBQUM7NEJBQzNFLElBQUksU0FBUyxHQUFHLGNBQWMsQ0FBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFFLEtBQUssQ0FBRSxDQUFFLENBQUM7NEJBQzNFLElBQUksS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUUsQ0FBQzs0QkFDdEUsR0FBRyxDQUFDLEdBQUcsR0FBRyxJQUFJLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQyxZQUFZLENBQUUsS0FBSyxDQUFFLENBQUMsT0FBTyxFQUFFLENBQUM7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Impzc2VydmljZS9mYnhMb2FkZXIyLnNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgS3lsZS1MYXJzb24gaHR0cHM6Ly9naXRodWIuY29tL0t5bGUtTGFyc29uXG4gKlxuICogTG9hZGVyIGxvYWRzIEZCWCBmaWxlIGFuZCBnZW5lcmF0ZXMgR3JvdXAgcmVwcmVzZW50aW5nIEZCWCBzY2VuZS5cbiAqIFJlcXVpcmVzIEZCWCBmaWxlIHRvIGJlID49IDcuMCBhbmQgaW4gQVNDSUkgZm9ybWF0LlxuICpcbiAqIFN1cHBvcnRzOlxuICogXHRNZXNoIEdlbmVyYXRpb24gKFBvc2l0aW9uYWwgRGF0YSlcbiAqIFx0Tm9ybWFsIERhdGEgKFBlciBWZXJ0ZXggRHJhd2luZyBJbnN0YW5jZSlcbiAqICBVViBEYXRhIChQZXIgVmVydGV4IERyYXdpbmcgSW5zdGFuY2UpXG4gKiAgU2tpbm5pbmdcbiAqICBBbmltYXRpb25cbiAqIFx0LSBTZXBhcmF0ZWQgQW5pbWF0aW9ucyBiYXNlZCBvbiBzdGFja3MuXG4gKiBcdC0gU2tlbGV0YWwgJiBOb24tU2tlbGV0YWwgQW5pbWF0aW9uc1xuICpcbiAqIE5lZWRzIFN1cHBvcnQ6XG4gKiBcdEluZGV4ZWQgQnVmZmVyc1xuICogXHRQcmVSb3RhdGlvbiBzdXBwb3J0LlxuICovXG5cbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIGxvYWRlciBmb3IgbG9hZGluZyBGQlggZmlsZXMgZnJvbSBVUkwgYW5kIHBhcnNpbmcgaW50b1xuICAgICAqIGEgVEhSRUUuR3JvdXAuXG4gICAgICogQHBhcmFtIHtUSFJFRS5Mb2FkaW5nTWFuYWdlcn0gbWFuYWdlciAtIExvYWRpbmcgTWFuYWdlciBmb3IgbG9hZGVyIHRvIHVzZS5cbiAgICAgKi9cbiAgICBUSFJFRS5GQlhMb2FkZXIgPSBmdW5jdGlvbiAoIG1hbmFnZXIgKSB7XG5cbiAgICAgICAgVEhSRUUuTG9hZGVyLmNhbGwoIHRoaXMgKTtcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gKCBtYW5hZ2VyICE9PSB1bmRlZmluZWQgKSA/IG1hbmFnZXIgOiBUSFJFRS5EZWZhdWx0TG9hZGluZ01hbmFnZXI7XG4gICAgICAgIHRoaXMuZmlsZUxvYWRlciA9IG5ldyBUSFJFRS5GaWxlTG9hZGVyKCB0aGlzLm1hbmFnZXIgKTtcbiAgICAgICAgdGhpcy50ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoIHRoaXMubWFuYWdlciApO1xuXG4gICAgfTtcblxuICAgIE9iamVjdC5hc3NpZ24oIFRIUkVFLkZCWExvYWRlci5wcm90b3R5cGUsIFRIUkVFLkxvYWRlci5wcm90b3R5cGUgKTtcblxuICAgIFRIUkVFLkZCWExvYWRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUSFJFRS5GQlhMb2FkZXI7XG5cbiAgICBPYmplY3QuYXNzaWduKCBUSFJFRS5GQlhMb2FkZXIucHJvdG90eXBlLCB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWRzIGFuIEFTQ0lJIEZCWCBmaWxlIGZyb20gVVJMIGFuZCBwYXJzZXMgaW50byBhIFRIUkVFLkdyb3VwLlxuICAgICAgICAgKiBUSFJFRS5Hcm91cCB3aWxsIGhhdmUgYW4gYW5pbWF0aW9ucyBwcm9wZXJ0eSBvZiBBbmltYXRpb25DbGlwc1xuICAgICAgICAgKiBvZiB0aGUgZGlmZmVyZW50IGFuaW1hdGlvbnMgZXhwb3J0ZWQgd2l0aCB0aGUgRkJYLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVVJMIG9mIHRoZSBGQlggZmlsZS5cbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbihUSFJFRS5Hcm91cCk6dm9pZH0gb25Mb2FkIC0gQ2FsbGJhY2sgZm9yIHdoZW4gRkJYIGZpbGUgaXMgbG9hZGVkIGFuZCBwYXJzZWQuXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oUHJvZ3Jlc3NFdmVudCk6dm9pZH0gb25Qcm9ncmVzcyAtIENhbGxiYWNrIGZpcmVkIHBlcmlvZGljYWxseSB3aGVuIGZpbGUgaXMgYmVpbmcgcmV0cmlldmVkIGZyb20gc2VydmVyLlxuICAgICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKEV2ZW50KTp2b2lkfSBvbkVycm9yIC0gQ2FsbGJhY2sgZmlyZWQgd2hlbiBlcnJvciBvY2N1cnMgKEN1cnJlbnRseSBvbmx5IHdpdGggcmV0cmlldmluZyBmaWxlLCBub3Qgd2l0aCBwYXJzaW5nIGVycm9ycykuXG4gICAgICAgICAqL1xuICAgICAgICBsb2FkOiBmdW5jdGlvbiAoIHVybCwgb25Mb2FkLCBvblByb2dyZXNzLCBvbkVycm9yICkge1xuXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciByZXNvdXJjZURpcmVjdG9yeSA9IHVybC5zcGxpdCggL1tcXFxcXFwvXS8gKTtcbiAgICAgICAgICAgIHJlc291cmNlRGlyZWN0b3J5LnBvcCgpO1xuICAgICAgICAgICAgcmVzb3VyY2VEaXJlY3RvcnkgPSByZXNvdXJjZURpcmVjdG9yeS5qb2luKCAnLycgKTtcblxuICAgICAgICAgICAgdGhpcy5maWxlTG9hZGVyLmxvYWQoIHVybCwgZnVuY3Rpb24gKCB0ZXh0ICkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCAhIGlzRmJ4Rm9ybWF0QVNDSUkoIHRleHQgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCAnRkJYTG9hZGVyOiBGQlggQmluYXJ5IGZvcm1hdCBub3Qgc3VwcG9ydGVkLicgKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5tYW5hZ2VyLml0ZW1FcnJvciggdXJsICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIGdldEZieFZlcnNpb24oIHRleHQgKSA8IDcwMDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvciggJ0ZCWExvYWRlcjogRkJYIHZlcnNpb24gbm90IHN1cHBvcnRlZCBmb3IgZmlsZSBhdCAnICsgdXJsICsgJywgRmlsZVZlcnNpb246ICcgKyBnZXRGYnhWZXJzaW9uKCB0ZXh0ICkgKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5tYW5hZ2VyLml0ZW1FcnJvciggdXJsICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBzY2VuZSA9IHNlbGYucGFyc2UoIHRleHQsIHJlc291cmNlRGlyZWN0b3J5ICk7XG4gICAgICAgICAgICAgICAgb25Mb2FkKCBzY2VuZSApO1xuXG4gICAgICAgICAgICB9LCBvblByb2dyZXNzLCBvbkVycm9yICk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogUGFyc2VzIGFuIEFTQ0lJIEZCWCBmaWxlIGFuZCByZXR1cm5zIGEgVEhSRUUuR3JvdXAuXG4gICAgICAgICAqIFRIUkVFLkdyb3VwIHdpbGwgaGF2ZSBhbiBhbmltYXRpb25zIHByb3BlcnR5IG9mIEFuaW1hdGlvbkNsaXBzXG4gICAgICAgICAqIG9mIHRoZSBkaWZmZXJlbnQgYW5pbWF0aW9ucyB3aXRoaW4gdGhlIEZCWCBmaWxlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gRkJYVGV4dCAtIENvbnRlbnRzIG9mIEZCWCBmaWxlIHRvIHBhcnNlLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzb3VyY2VEaXJlY3RvcnkgLSBEaXJlY3RvcnkgdG8gbG9hZCBleHRlcm5hbCBhc3NldHMgKGUuZy4gdGV4dHVyZXMgKSBmcm9tLlxuICAgICAgICAgKiBAcmV0dXJucyB7VEhSRUUuR3JvdXB9XG4gICAgICAgICAqL1xuICAgICAgICBwYXJzZTogZnVuY3Rpb24gKCBGQlhUZXh0LCByZXNvdXJjZURpcmVjdG9yeSApIHtcblxuICAgICAgICAgICAgdmFyIGxvYWRlciA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBGQlhUcmVlID0gbmV3IFRleHRQYXJzZXIoKS5wYXJzZSggRkJYVGV4dCApO1xuXG4gICAgICAgICAgICB2YXIgY29ubmVjdGlvbnMgPSBwYXJzZUNvbm5lY3Rpb25zKCBGQlhUcmVlICk7XG5cbiAgICAgICAgICAgIHZhciB0ZXh0dXJlcyA9IHBhcnNlVGV4dHVyZXMoIEZCWFRyZWUgKTtcblxuICAgICAgICAgICAgdmFyIG1hdGVyaWFscyA9IHBhcnNlTWF0ZXJpYWxzKCBGQlhUcmVlLCB0ZXh0dXJlcywgY29ubmVjdGlvbnMgKTtcblxuICAgICAgICAgICAgdmFyIGRlZm9ybWVyTWFwID0gcGFyc2VEZWZvcm1lcnMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zICk7XG5cbiAgICAgICAgICAgIHZhciBnZW9tZXRyeU1hcCA9IHBhcnNlR2VvbWV0cmllcyggRkJYVHJlZSwgY29ubmVjdGlvbnMsIGRlZm9ybWVyTWFwICk7XG5cbiAgICAgICAgICAgIHZhciBzY2VuZUdyYXBoID0gcGFyc2VTY2VuZSggRkJYVHJlZSwgY29ubmVjdGlvbnMsIGRlZm9ybWVyTWFwLCBnZW9tZXRyeU1hcCwgbWF0ZXJpYWxzICk7XG5cbiAgICAgICAgICAgIHJldHVybiBzY2VuZUdyYXBoO1xuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHR5cGVkZWYge3t2YWx1ZTogbnVtYmVyfX0gRkJYVmFsdWVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAdHlwZWRlZiB7e3ZhbHVlOiB7eDogc3RyaW5nLCB5OiBzdHJpbmcsIHo6IHN0cmluZ319fSBGQlhWZWN0b3IzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHR5cGVkZWYge3twcm9wZXJ0aWVzOiB7YTogc3RyaW5nfX19IEZCWEFycmF5Tm9kZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEB0eXBlZGVmIHt7cHJvcGVydGllczoge01hcHBpbmdJbmZvcm1hdGlvblR5cGU6IHN0cmluZywgUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlOiBzdHJpbmcgfSwgc3ViTm9kZXM6IE9iamVjdDxzdHJpbmcsIEZCWEFycmF5Tm9kZT59fSBGQlhNYXBwZWRBcnJheU5vZGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAdHlwZWRlZiB7e2lkOiBudW1iZXIsIG5hbWU6IHN0cmluZywgcHJvcGVydGllczoge0ZpbGVOYW1lOiBzdHJpbmd9fX0gRkJYVGV4dHVyZU5vZGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAdHlwZWRlZiB7e2lkOiBudW1iZXIsIGF0dHJOYW1lOiBzdHJpbmcsIHByb3BlcnRpZXM6IHtTaGFkaW5nTW9kZWw6IHN0cmluZywgRGlmZnVzZTogRkJYVmVjdG9yMywgU3BlY3VsYXI6IEZCWFZlY3RvcjMsIFNoaW5pbmVzczogRkJYVmFsdWUsIEVtaXNzaXZlOiBGQlhWZWN0b3IzLCBFbWlzc2l2ZUZhY3RvcjogRkJYVmFsdWUsIE9wYWNpdHk6IEZCWFZhbHVlfX19IEZCWE1hdGVyaWFsTm9kZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEB0eXBlZGVmIHt7c3ViTm9kZXM6IHtJbmRleGVzOiBGQlhBcnJheU5vZGUsIFdlaWdodHM6IEZCWEFycmF5Tm9kZSwgVHJhbnNmb3JtOiBGQlhBcnJheU5vZGUsIFRyYW5zZm9ybUxpbms6IEZCWEFycmF5Tm9kZX0sIHByb3BlcnRpZXM6IHsgTW9kZTogc3RyaW5nIH19fSBGQlhTdWJEZWZvcm1lck5vZGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAdHlwZWRlZiB7e2lkOiBudW1iZXIsIGF0dHJOYW1lOiBzdHJpbmcsIGF0dHJUeXBlOiBzdHJpbmcsIHN1Yk5vZGVzOiB7VmVydGljZXM6IEZCWEFycmF5Tm9kZSwgUG9seWdvblZlcnRleEluZGV4OiBGQlhBcnJheU5vZGUsIExheWVyRWxlbWVudE5vcm1hbDogRkJYTWFwcGVkQXJyYXlOb2RlW10sIExheWVyRWxlbWVudE1hdGVyaWFsOiBGQlhNYXBwZWRBcnJheU5vZGVbXSwgTGF5ZXJFbGVtZW50VVY6IEZCWE1hcHBlZEFycmF5Tm9kZVtdfX19IEZCWEdlb21ldHJ5Tm9kZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEB0eXBlZGVmIHt7aWQ6IG51bWJlciwgYXR0ck5hbWU6IHN0cmluZywgYXR0clR5cGU6IHN0cmluZywgcHJvcGVydGllczoge0xjbF9UcmFuc2xhdGlvbjogRkJYVmFsdWUsIExjbF9Sb3RhdGlvbjogRkJYVmFsdWUsIExjbF9TY2FsaW5nOiBGQlhWYWx1ZX19fSBGQlhNb2RlbE5vZGVcbiAgICAgICAgICAgICAqL1xuXG5cblxuXG5cblxuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUGFyc2VzIG1hcCBvZiByZWxhdGlvbnNoaXBzIGJldHdlZW4gb2JqZWN0cy5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7e0Nvbm5lY3Rpb25zOiB7IHByb3BlcnRpZXM6IHsgY29ubmVjdGlvbnM6IFtudW1iZXIsIG51bWJlciwgc3RyaW5nXVtdfX19fSBGQlhUcmVlXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7TWFwPG51bWJlciwge3BhcmVudHM6IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXSwgY2hpbGRyZW46IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXX0+fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUNvbm5lY3Rpb25zKCBGQlhUcmVlICkge1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQHR5cGUge01hcDxudW1iZXIsIHsgcGFyZW50czoge0lEOiBudW1iZXIsIHJlbGF0aW9uc2hpcDogc3RyaW5nfVtdLCBjaGlsZHJlbjoge0lEOiBudW1iZXIsIHJlbGF0aW9uc2hpcDogc3RyaW5nfVtdfT59XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb25NYXAgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoICdDb25uZWN0aW9ucycgaW4gRkJYVHJlZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQHR5cGUge1tudW1iZXIsIG51bWJlciwgc3RyaW5nXVtdfVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb25BcnJheSA9IEZCWFRyZWUuQ29ubmVjdGlvbnMucHJvcGVydGllcy5jb25uZWN0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbkFycmF5LmZvckVhY2goIGZ1bmN0aW9uICggY29ubmVjdGlvbiApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhIGNvbm5lY3Rpb25NYXAuaGFzKCBjb25uZWN0aW9uWyAwIF0gKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25NYXAuc2V0KCBjb25uZWN0aW9uWyAwIF0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50czogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50UmVsYXRpb25zaGlwID0geyBJRDogY29ubmVjdGlvblsgMSBdLCByZWxhdGlvbnNoaXA6IGNvbm5lY3Rpb25bIDIgXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbk1hcC5nZXQoIGNvbm5lY3Rpb25bIDAgXSApLnBhcmVudHMucHVzaCggcGFyZW50UmVsYXRpb25zaGlwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggISBjb25uZWN0aW9uTWFwLmhhcyggY29ubmVjdGlvblsgMSBdICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uTWFwLnNldCggY29ubmVjdGlvblsgMSBdLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudHM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkUmVsYXRpb25zaGlwID0geyBJRDogY29ubmVjdGlvblsgMCBdLCByZWxhdGlvbnNoaXA6IGNvbm5lY3Rpb25bIDIgXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbk1hcC5nZXQoIGNvbm5lY3Rpb25bIDEgXSApLmNoaWxkcmVuLnB1c2goIGNoaWxkUmVsYXRpb25zaGlwICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb25NYXA7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQYXJzZXMgbWFwIG9mIHRleHR1cmVzIHJlZmVyZW5jZWQgaW4gRkJYVHJlZS5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7e09iamVjdHM6IHtzdWJOb2Rlczoge1RleHR1cmU6IE9iamVjdC48c3RyaW5nLCBGQlhUZXh0dXJlTm9kZT59fX19IEZCWFRyZWVcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtNYXA8bnVtYmVyLCBUSFJFRS5UZXh0dXJlPn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VUZXh0dXJlcyggRkJYVHJlZSApIHtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEB0eXBlIHtNYXA8bnVtYmVyLCBUSFJFRS5UZXh0dXJlPn1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZU1hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICAgICAgICAgIGlmICggJ1RleHR1cmUnIGluIEZCWFRyZWUuT2JqZWN0cy5zdWJOb2RlcyApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZU5vZGVzID0gRkJYVHJlZS5PYmplY3RzLnN1Yk5vZGVzLlRleHR1cmU7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBub2RlSUQgaW4gdGV4dHVyZU5vZGVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZSA9IHBhcnNlVGV4dHVyZSggdGV4dHVyZU5vZGVzWyBub2RlSUQgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZU1hcC5zZXQoIHBhcnNlSW50KCBub2RlSUQgKSwgdGV4dHVyZSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0dXJlTWFwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHt0ZXh0dXJlTm9kZX0gdGV4dHVyZU5vZGUgLSBOb2RlIHRvIGdldCB0ZXh0dXJlIGluZm9ybWF0aW9uIGZyb20uXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge1RIUkVFLlRleHR1cmV9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VUZXh0dXJlKCB0ZXh0dXJlTm9kZSApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgRkJYX0lEID0gdGV4dHVyZU5vZGUuaWQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gdGV4dHVyZU5vZGUubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVQYXRoID0gdGV4dHVyZU5vZGUucHJvcGVydGllcy5GaWxlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwbGl0ID0gZmlsZVBhdGguc3BsaXQoIC9bXFxcXFxcL10vICk7XG4gICAgICAgICAgICAgICAgICAgIGlmICggc3BsaXQubGVuZ3RoID4gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gc3BsaXRbIHNwbGl0Lmxlbmd0aCAtIDEgXTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBmaWxlUGF0aDtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBAdHlwZSB7VEhSRUUuVGV4dHVyZX1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gbG9hZGVyLnRleHR1cmVMb2FkZXIubG9hZCggcmVzb3VyY2VEaXJlY3RvcnkgKyAnLycgKyBmaWxlTmFtZSApO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLkZCWF9JRCA9IEZCWF9JRDtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dHVyZTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFBhcnNlcyBtYXAgb2YgTWF0ZXJpYWwgaW5mb3JtYXRpb24uXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3tPYmplY3RzOiB7c3ViTm9kZXM6IHtNYXRlcmlhbDogT2JqZWN0LjxudW1iZXIsIEZCWE1hdGVyaWFsTm9kZT59fX19IEZCWFRyZWVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7TWFwPG51bWJlciwgVEhSRUUuVGV4dHVyZT59IHRleHR1cmVNYXBcbiAgICAgICAgICAgICAqIEBwYXJhbSB7TWFwPG51bWJlciwge3BhcmVudHM6IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXSwgY2hpbGRyZW46IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXX0+fSBjb25uZWN0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge01hcDxudW1iZXIsIFRIUkVFLk1hdGVyaWFsPn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VNYXRlcmlhbHMoIEZCWFRyZWUsIHRleHR1cmVNYXAsIGNvbm5lY3Rpb25zICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCAnTWF0ZXJpYWwnIGluIEZCWFRyZWUuT2JqZWN0cy5zdWJOb2RlcyApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxOb2RlcyA9IEZCWFRyZWUuT2JqZWN0cy5zdWJOb2Rlcy5NYXRlcmlhbDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIG5vZGVJRCBpbiBtYXRlcmlhbE5vZGVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBwYXJzZU1hdGVyaWFsKCBtYXRlcmlhbE5vZGVzWyBub2RlSUQgXSwgdGV4dHVyZU1hcCwgY29ubmVjdGlvbnMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsTWFwLnNldCggcGFyc2VJbnQoIG5vZGVJRCApLCBtYXRlcmlhbCApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRlcmlhbE1hcDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFRha2VzIGluZm9ybWF0aW9uIGZyb20gTWF0ZXJpYWwgbm9kZSBhbmQgcmV0dXJucyBhIGdlbmVyYXRlZCBUSFJFRS5NYXRlcmlhbFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RkJYTWF0ZXJpYWxOb2RlfSBtYXRlcmlhbE5vZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge01hcDxudW1iZXIsIFRIUkVFLlRleHR1cmU+fSB0ZXh0dXJlTWFwXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtNYXA8bnVtYmVyLCB7cGFyZW50czoge0lEOiBudW1iZXIsIHJlbGF0aW9uc2hpcDogc3RyaW5nfVtdLCBjaGlsZHJlbjoge0lEOiBudW1iZXIsIHJlbGF0aW9uc2hpcDogc3RyaW5nfVtdfT59IGNvbm5lY3Rpb25zXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge1RIUkVFLk1hdGVyaWFsfVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlTWF0ZXJpYWwoIG1hdGVyaWFsTm9kZSwgdGV4dHVyZU1hcCwgY29ubmVjdGlvbnMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIEZCWF9JRCA9IG1hdGVyaWFsTm9kZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBtYXRlcmlhbE5vZGUuYXR0ck5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gbWF0ZXJpYWxOb2RlLnByb3BlcnRpZXMuU2hhZGluZ01vZGVsO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGNvbm5lY3Rpb25zLmdldCggRkJYX0lEICkuY2hpbGRyZW47XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSBwYXJzZVBhcmFtZXRlcnMoIG1hdGVyaWFsTm9kZS5wcm9wZXJ0aWVzLCB0ZXh0dXJlTWFwLCBjaGlsZHJlbiApO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbDtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICggdHlwZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGhvbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsYW1iZXJ0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ05vIGltcGxlbWVudGF0aW9uIGdpdmVuIGZvciBtYXRlcmlhbCB0eXBlICcgKyB0eXBlICsgJyBpbiBGQlhMb2FkZXIuanMuICBEZWZhdWx0aW5nIHRvIGJhc2ljIG1hdGVyaWFsJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCB7IGNvbG9yOiAweDMzMDBmZiB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFZhbHVlcyggcGFyYW1ldGVycyApO1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5uYW1lID0gbmFtZTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEB0eXBlZGVmIHt7RGlmZnVzZTogRkJYVmVjdG9yMywgU3BlY3VsYXI6IEZCWFZlY3RvcjMsIFNoaW5pbmVzczogRkJYVmFsdWUsIEVtaXNzaXZlOiBGQlhWZWN0b3IzLCBFbWlzc2l2ZUZhY3RvcjogRkJYVmFsdWUsIE9wYWNpdHk6IEZCWFZhbHVlfX0gRkJYTWF0ZXJpYWxQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQHR5cGVkZWYge3tjb2xvcjogVEhSRUUuQ29sb3I9LCBzcGVjdWxhcjogVEhSRUUuQ29sb3I9LCBzaGluaW5lc3M6IG51bWJlcj0sIGVtaXNzaXZlOiBUSFJFRS5Db2xvcj0sIGVtaXNzaXZlSW50ZW5zaXR5OiBudW1iZXI9LCBvcGFjaXR5OiBudW1iZXI9LCB0cmFuc3BhcmVudDogYm9vbGVhbj0sIG1hcDogVEhSRUUuVGV4dHVyZT19fSBUSFJFRU1hdGVyaWFsUGFyYW1ldGVyUGFja1xuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RkJYTWF0ZXJpYWxQcm9wZXJ0aWVzfSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TWFwPG51bWJlciwgVEhSRUUuVGV4dHVyZT59IHRleHR1cmVNYXBcbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHt7SUQ6IG51bWJlciwgcmVsYXRpb25zaGlwOiBzdHJpbmd9W119IGNoaWxkcmVuUmVsYXRpb25zaGlwc1xuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7VEhSRUVNYXRlcmlhbFBhcmFtZXRlclBhY2t9XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwYXJzZVBhcmFtZXRlcnMoIHByb3BlcnRpZXMsIHRleHR1cmVNYXAsIGNoaWxkcmVuUmVsYXRpb25zaGlwcyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtZXRlcnMgOmFueT0ge307XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcHJvcGVydGllcy5EaWZmdXNlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5jb2xvciA9IHBhcnNlQ29sb3IoIHByb3BlcnRpZXMuRGlmZnVzZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByb3BlcnRpZXMuU3BlY3VsYXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnNwZWN1bGFyID0gcGFyc2VDb2xvciggcHJvcGVydGllcy5TcGVjdWxhciApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHByb3BlcnRpZXMuU2hpbmluZXNzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5zaGluaW5lc3MgPSBwcm9wZXJ0aWVzLlNoaW5pbmVzcy52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwcm9wZXJ0aWVzLkVtaXNzaXZlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5lbWlzc2l2ZSA9IHBhcnNlQ29sb3IoIHByb3BlcnRpZXMuRW1pc3NpdmUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwcm9wZXJ0aWVzLkVtaXNzaXZlRmFjdG9yICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5lbWlzc2l2ZUludGVuc2l0eSA9IHByb3BlcnRpZXMuRW1pc3NpdmVGYWN0b3IudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcHJvcGVydGllcy5PcGFjaXR5ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5vcGFjaXR5ID0gcHJvcGVydGllcy5PcGFjaXR5LnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmFtZXRlcnMub3BhY2l0eSA8IDEuMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMudHJhbnNwYXJlbnQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuUmVsYXRpb25zaGlwcy5mb3JFYWNoKCBmdW5jdGlvbiAoIHJlbGF0aW9uc2hpcCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gcmVsYXRpb25zaGlwLnJlbGF0aW9uc2hpcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCB0eXBlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIgXFxcIkFtYmllbnRDb2xvclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBTdXBwb3J0IEFtYmllbnRDb2xvciB0ZXh0dXJlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiBcXFwiRGlmZnVzZUNvbG9yXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLm1hcCA9IHRleHR1cmVNYXAuZ2V0KCByZWxhdGlvbnNoaXAuSUQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdVbmtub3duIHRleHR1cmUgYXBwbGljYXRpb24gb2YgdHlwZSAnICsgdHlwZSArICcsIHNraXBwaW5nIHRleHR1cmUnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1ldGVycztcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZW5lcmF0ZXMgbWFwIG9mIFNrZWxldG9uLWxpa2Ugb2JqZWN0cyBmb3IgdXNlIGxhdGVyIHdoZW4gZ2VuZXJhdGluZyBhbmQgYmluZGluZyBza2VsZXRvbnMuXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3tPYmplY3RzOiB7c3ViTm9kZXM6IHtEZWZvcm1lcjogT2JqZWN0LjxudW1iZXIsIEZCWFN1YkRlZm9ybWVyTm9kZT59fX19IEZCWFRyZWVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7TWFwPG51bWJlciwge3BhcmVudHM6IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXSwgY2hpbGRyZW46IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXX0+fSBjb25uZWN0aW9uc1xuICAgICAgICAgICAgICogQHJldHVybnMge01hcDxudW1iZXIsIHttYXA6IE1hcDxudW1iZXIsIHtGQlhfSUQ6IG51bWJlciwgaW5kaWNlczogbnVtYmVyW10sIHdlaWdodHM6IG51bWJlcltdLCB0cmFuc2Zvcm06IG51bWJlcltdLCB0cmFuc2Zvcm1MaW5rOiBudW1iZXJbXSwgbGlua01vZGU6IHN0cmluZ30+LCBhcnJheToge0ZCWF9JRDogbnVtYmVyLCBpbmRpY2VzOiBudW1iZXJbXSwgd2VpZ2h0czogbnVtYmVyW10sIHRyYW5zZm9ybTogbnVtYmVyW10sIHRyYW5zZm9ybUxpbms6IG51bWJlcltdLCBsaW5rTW9kZTogc3RyaW5nfVtdLCBza2VsZXRvbjogVEhSRUUuU2tlbGV0b258bnVsbH0+fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZURlZm9ybWVycyggRkJYVHJlZSwgY29ubmVjdGlvbnMgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2tlbGV0b25NYXAgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoICdEZWZvcm1lcicgaW4gRkJYVHJlZS5PYmplY3RzLnN1Yk5vZGVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBEZWZvcm1lck5vZGVzID0gRkJYVHJlZS5PYmplY3RzLnN1Yk5vZGVzLkRlZm9ybWVyO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIERlZm9ybWVyTm9kZXMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWZvcm1lck5vZGUgPSBEZWZvcm1lck5vZGVzWyBub2RlSUQgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZGVmb3JtZXJOb2RlLmF0dHJUeXBlID09PSAnU2tpbicgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29ubnMgPSBjb25uZWN0aW9ucy5nZXQoIHBhcnNlSW50KCBub2RlSUQgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBza2VsZXRvbjphbnkgPSBwYXJzZVNrZWxldG9uKCBjb25ucywgRGVmb3JtZXJOb2RlcyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNrZWxldG9uLkZCWF9JRCA9IHBhcnNlSW50KCBub2RlSUQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2VsZXRvbk1hcC5zZXQoIHBhcnNlSW50KCBub2RlSUQgKSwgc2tlbGV0b24gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBza2VsZXRvbk1hcDtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdlbmVyYXRlcyBhIFwiU2tlbGV0b24gUmVwcmVzZW50YXRpb25cIiBvZiBGQlggbm9kZXMgYmFzZWQgb24gYW4gRkJYIFNraW4gRGVmb3JtZXIncyBjb25uZWN0aW9ucyBhbmQgYW4gb2JqZWN0IGNvbnRhaW5pbmcgU3ViRGVmb3JtZXIgbm9kZXMuXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHt7cGFyZW50czoge0lEOiBudW1iZXIsIHJlbGF0aW9uc2hpcDogc3RyaW5nfVtdLCBjaGlsZHJlbjoge0lEOiBudW1iZXIsIHJlbGF0aW9uc2hpcDogc3RyaW5nfVtdfX0gY29ubmVjdGlvbnNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdC48bnVtYmVyLCBGQlhTdWJEZWZvcm1lck5vZGU+fSBEZWZvcm1lck5vZGVzXG4gICAgICAgICAgICAgICAgICogQHJldHVybnMge3ttYXA6IE1hcDxudW1iZXIsIHtGQlhfSUQ6IG51bWJlciwgaW5kaWNlczogbnVtYmVyW10sIHdlaWdodHM6IG51bWJlcltdLCB0cmFuc2Zvcm06IG51bWJlcltdLCB0cmFuc2Zvcm1MaW5rOiBudW1iZXJbXSwgbGlua01vZGU6IHN0cmluZ30+LCBhcnJheToge0ZCWF9JRDogbnVtYmVyLCBpbmRpY2VzOiBudW1iZXJbXSwgd2VpZ2h0czogbnVtYmVyW10sIHRyYW5zZm9ybTogbnVtYmVyW10sIHRyYW5zZm9ybUxpbms6IG51bWJlcltdLCBsaW5rTW9kZTogc3RyaW5nfVtdLCBza2VsZXRvbjogVEhSRUUuU2tlbGV0b258bnVsbH19XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VTa2VsZXRvbiggY29ubmVjdGlvbnMsIERlZm9ybWVyTm9kZXMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YkRlZm9ybWVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YkRlZm9ybWVyQXJyYXkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbnMuY2hpbGRyZW4uZm9yRWFjaCggZnVuY3Rpb24gKCBjaGlsZCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YkRlZm9ybWVyTm9kZSA9IERlZm9ybWVyTm9kZXNbIGNoaWxkLklEIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViRGVmb3JtZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRkJYX0lEOiBjaGlsZC5JRCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzOiBwYXJzZUludEFycmF5KCBzdWJEZWZvcm1lck5vZGUuc3ViTm9kZXMuSW5kZXhlcy5wcm9wZXJ0aWVzLmEgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzOiBwYXJzZUZsb2F0QXJyYXkoIHN1YkRlZm9ybWVyTm9kZS5zdWJOb2Rlcy5XZWlnaHRzLnByb3BlcnRpZXMuYSApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcGFyc2VNYXRyaXhBcnJheSggc3ViRGVmb3JtZXJOb2RlLnN1Yk5vZGVzLlRyYW5zZm9ybS5wcm9wZXJ0aWVzLmEgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1MaW5rOiBwYXJzZU1hdHJpeEFycmF5KCBzdWJEZWZvcm1lck5vZGUuc3ViTm9kZXMuVHJhbnNmb3JtTGluay5wcm9wZXJ0aWVzLmEgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rTW9kZTogc3ViRGVmb3JtZXJOb2RlLnByb3BlcnRpZXMuTW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YkRlZm9ybWVycy5zZXQoIGNoaWxkLklELCBzdWJEZWZvcm1lciApO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViRGVmb3JtZXJBcnJheS5wdXNoKCBzdWJEZWZvcm1lciApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBzdWJEZWZvcm1lcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheTogc3ViRGVmb3JtZXJBcnJheSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVzOiBbXVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2VuZXJhdGVzIEJ1ZmZlciBnZW9tZXRyaWVzIGZyb20gZ2VvbWV0cnkgaW5mb3JtYXRpb24gaW4gRkJYVHJlZSwgYW5kIGdlbmVyYXRlcyBtYXAgb2YgVEhSRUUuQnVmZmVyR2VvbWV0cmllc1xuICAgICAgICAgICAgICogQHBhcmFtIHt7T2JqZWN0czoge3N1Yk5vZGVzOiB7R2VvbWV0cnk6IE9iamVjdC48bnVtYmVyLCBGQlhHZW9tZXRyeU5vZGV9fX19IEZCWFRyZWVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7TWFwPG51bWJlciwge3BhcmVudHM6IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXSwgY2hpbGRyZW46IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXX0+fSBjb25uZWN0aW9uc1xuICAgICAgICAgICAgICogQHBhcmFtIHtNYXA8bnVtYmVyLCB7bWFwOiBNYXA8bnVtYmVyLCB7RkJYX0lEOiBudW1iZXIsIGluZGljZXM6IG51bWJlcltdLCB3ZWlnaHRzOiBudW1iZXJbXSwgdHJhbnNmb3JtOiBudW1iZXJbXSwgdHJhbnNmb3JtTGluazogbnVtYmVyW10sIGxpbmtNb2RlOiBzdHJpbmd9PiwgYXJyYXk6IHtGQlhfSUQ6IG51bWJlciwgaW5kaWNlczogbnVtYmVyW10sIHdlaWdodHM6IG51bWJlcltdLCB0cmFuc2Zvcm06IG51bWJlcltdLCB0cmFuc2Zvcm1MaW5rOiBudW1iZXJbXSwgbGlua01vZGU6IHN0cmluZ31bXSwgc2tlbGV0b246IFRIUkVFLlNrZWxldG9ufG51bGx9Pn0gZGVmb3JtZXJNYXBcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtNYXA8bnVtYmVyLCBUSFJFRS5CdWZmZXJHZW9tZXRyeT59XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlR2VvbWV0cmllcyggRkJYVHJlZSwgY29ubmVjdGlvbnMsIGRlZm9ybWVyTWFwICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5TWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCAnR2VvbWV0cnknIGluIEZCWFRyZWUuT2JqZWN0cy5zdWJOb2RlcyApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnlOb2RlcyA9IEZCWFRyZWUuT2JqZWN0cy5zdWJOb2Rlcy5HZW9tZXRyeTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIG5vZGVJRCBpbiBnZW9tZXRyeU5vZGVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVsYXRpb25zaGlwcyA9IGNvbm5lY3Rpb25zLmdldCggcGFyc2VJbnQoIG5vZGVJRCApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvID0gcGFyc2VHZW9tZXRyeSggZ2VvbWV0cnlOb2Rlc1sgbm9kZUlEIF0sIHJlbGF0aW9uc2hpcHMsIGRlZm9ybWVyTWFwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeU1hcC5zZXQoIHBhcnNlSW50KCBub2RlSUQgKSwgZ2VvICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdlb21ldHJ5TWFwO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2VuZXJhdGVzIEJ1ZmZlckdlb21ldHJ5IGZyb20gRkJYR2VvbWV0cnlOb2RlLlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RkJYR2VvbWV0cnlOb2RlfSBnZW9tZXRyeU5vZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3twYXJlbnRzOiB7SUQ6IG51bWJlciwgcmVsYXRpb25zaGlwOiBzdHJpbmd9W10sIGNoaWxkcmVuOiB7SUQ6IG51bWJlciwgcmVsYXRpb25zaGlwOiBzdHJpbmd9W119fSByZWxhdGlvbnNoaXBzXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtNYXA8bnVtYmVyLCB7bWFwOiBNYXA8bnVtYmVyLCB7RkJYX0lEOiBudW1iZXIsIGluZGljZXM6IG51bWJlcltdLCB3ZWlnaHRzOiBudW1iZXJbXSwgdHJhbnNmb3JtOiBudW1iZXJbXSwgdHJhbnNmb3JtTGluazogbnVtYmVyW10sIGxpbmtNb2RlOiBzdHJpbmd9PiwgYXJyYXk6IHtGQlhfSUQ6IG51bWJlciwgaW5kaWNlczogbnVtYmVyW10sIHdlaWdodHM6IG51bWJlcltdLCB0cmFuc2Zvcm06IG51bWJlcltdLCB0cmFuc2Zvcm1MaW5rOiBudW1iZXJbXSwgbGlua01vZGU6IHN0cmluZ31bXX0+fSBkZWZvcm1lck1hcFxuICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtUSFJFRS5CdWZmZXJHZW9tZXRyeX1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUdlb21ldHJ5KCBnZW9tZXRyeU5vZGUsIHJlbGF0aW9uc2hpcHMsIGRlZm9ybWVyTWFwICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBnZW9tZXRyeU5vZGUuYXR0clR5cGUgPT09ICdNZXNoJykge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZU1lc2hHZW9tZXRyeSggZ2VvbWV0cnlOb2RlLCByZWxhdGlvbnNoaXBzLCBkZWZvcm1lck1hcCk7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKCBnZW9tZXRyeU5vZGUuYXR0clR5cGUgPT09ICdOdXJic0N1cnZlJyl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VOdXJic0dlb21ldHJ5KCBnZW9tZXRyeU5vZGUsIHJlbGF0aW9uc2hpcHMgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBTcGVjaWFsdHkgZnVuY3Rpb24gZm9yIHBhcnNpbmcgTWVzaCBiYXNlZCBHZW9tZXRyeSBOb2Rlcy5cbiAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGQlhHZW9tZXRyeU5vZGV9IGdlb21ldHJ5Tm9kZVxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3twYXJlbnRzOiB7SUQ6IG51bWJlciwgcmVsYXRpb25zaGlwOiBzdHJpbmd9W10sIGNoaWxkcmVuOiB7SUQ6IG51bWJlciwgcmVsYXRpb25zaGlwOiBzdHJpbmd9W119fSByZWxhdGlvbnNoaXBzIC0gT2JqZWN0IHJlcHJlc2VudGluZyByZWxhdGlvbnNoaXBzIGJldHdlZW4gc3BlY2lmaWMgZ2VvbWV0cnkgbm9kZSBhbmQgb3RoZXIgbm9kZXMuXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TWFwPG51bWJlciwge21hcDogTWFwPG51bWJlciwge0ZCWF9JRDogbnVtYmVyLCBpbmRpY2VzOiBudW1iZXJbXSwgd2VpZ2h0czogbnVtYmVyW10sIHRyYW5zZm9ybTogbnVtYmVyW10sIHRyYW5zZm9ybUxpbms6IG51bWJlcltdLCBsaW5rTW9kZTogc3RyaW5nfT4sIGFycmF5OiB7RkJYX0lEOiBudW1iZXIsIGluZGljZXM6IG51bWJlcltdLCB3ZWlnaHRzOiBudW1iZXJbXSwgdHJhbnNmb3JtOiBudW1iZXJbXSwgdHJhbnNmb3JtTGluazogbnVtYmVyW10sIGxpbmtNb2RlOiBzdHJpbmd9W119Pn0gZGVmb3JtZXJNYXAgLSBNYXAgb2JqZWN0IG9mIGRlZm9ybWVycyBhbmQgc3ViRGVmb3JtZXJzIGJ5IElELlxuICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7VEhSRUUuQnVmZmVyR2VvbWV0cnl9XG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBwYXJzZU1lc2hHZW9tZXRyeSggZ2VvbWV0cnlOb2RlLCByZWxhdGlvbnNoaXBzLCBkZWZvcm1lck1hcCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEZCWF9JRCA9IGdlb21ldHJ5Tm9kZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gZ2VvbWV0cnlOb2RlLmF0dHJOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgcmVsYXRpb25zaGlwcy5jaGlsZHJlbi5sZW5ndGg7ICsrIGkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRlZm9ybWVyTWFwLmhhcyggcmVsYXRpb25zaGlwcy5jaGlsZHJlblsgaSBdLklEICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZm9ybWVyID0gZGVmb3JtZXJNYXAuZ2V0KCByZWxhdGlvbnNoaXBzLmNoaWxkcmVuWyBpIF0uSUQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gZ2VuR2VvbWV0cnkoIGdlb21ldHJ5Tm9kZSwgZGVmb3JtZXIgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlb21ldHJ5O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7e21hcDogTWFwPG51bWJlciwge0ZCWF9JRDogbnVtYmVyLCBpbmRpY2VzOiBudW1iZXJbXSwgd2VpZ2h0czogbnVtYmVyW10sIHRyYW5zZm9ybTogbnVtYmVyW10sIHRyYW5zZm9ybUxpbms6IG51bWJlcltdLCBsaW5rTW9kZTogc3RyaW5nfT4sIGFycmF5OiB7RkJYX0lEOiBudW1iZXIsIGluZGljZXM6IG51bWJlcltdLCB3ZWlnaHRzOiBudW1iZXJbXSwgdHJhbnNmb3JtOiBudW1iZXJbXSwgdHJhbnNmb3JtTGluazogbnVtYmVyW10sIGxpbmtNb2RlOiBzdHJpbmd9W119fSBkZWZvcm1lciAtIFNrZWxldG9uIHJlcHJlc2VudGF0aW9uIGZvciBnZW9tZXRyeSBpbnN0YW5jZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtUSFJFRS5CdWZmZXJHZW9tZXRyeX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2VuR2VvbWV0cnkoIGdlb21ldHJ5Tm9kZSwgZGVmb3JtZXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgR2VvbWV0cnkoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyc3QsIGVhY2ggaW5kZXggaXMgZ29pbmcgdG8gYmUgaXRzIG93biB2ZXJ0ZXguXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnRleEJ1ZmZlciA9IHBhcnNlRmxvYXRBcnJheSggZ2VvbWV0cnlOb2RlLnN1Yk5vZGVzLlZlcnRpY2VzLnByb3BlcnRpZXMuYSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleEJ1ZmZlciA9IHBhcnNlSW50QXJyYXkoIGdlb21ldHJ5Tm9kZS5zdWJOb2Rlcy5Qb2x5Z29uVmVydGV4SW5kZXgucHJvcGVydGllcy5hICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICdMYXllckVsZW1lbnROb3JtYWwnIGluIGdlb21ldHJ5Tm9kZS5zdWJOb2RlcyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsSW5mbyA9IGdldE5vcm1hbHMoIGdlb21ldHJ5Tm9kZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAnTGF5ZXJFbGVtZW50VVYnIGluIGdlb21ldHJ5Tm9kZS5zdWJOb2RlcyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXZJbmZvID0gZ2V0VVZzKCBnZW9tZXRyeU5vZGUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggJ0xheWVyRWxlbWVudE1hdGVyaWFsJyBpbiBnZW9tZXRyeU5vZGUuc3ViTm9kZXMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsSW5mbyA9IGdldE1hdGVyaWFscyggZ2VvbWV0cnlOb2RlICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmFjZVZlcnRleEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb2x5Z29uSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBwb2x5Z29uVmVydGV4SW5kZXggPSAwOyBwb2x5Z29uVmVydGV4SW5kZXggPCBpbmRleEJ1ZmZlci5sZW5ndGg7ICsrIHBvbHlnb25WZXJ0ZXhJbmRleCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kT2ZGYWNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4SW5kZXggPSBpbmRleEJ1ZmZlclsgcG9seWdvblZlcnRleEluZGV4IF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaW5kZXhCdWZmZXJbIHBvbHlnb25WZXJ0ZXhJbmRleCBdIDwgMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4SW5kZXggPSB2ZXJ0ZXhJbmRleCBeIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4QnVmZmVyWyBwb2x5Z29uVmVydGV4SW5kZXggXSA9IHZlcnRleEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kT2ZGYWNlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXggPSBuZXcgVmVydGV4KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ZWlnaHRJbmRpY2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ZWlnaHRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleC5wb3NpdGlvbi5mcm9tQXJyYXkoIHZlcnRleEJ1ZmZlciwgdmVydGV4SW5kZXggKiAzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIGRlZm9ybWVyIGZvciB0aGlzIGdlb21ldHJ5LCBnZXQgdGhlIHNraW5JbmRleCBhbmQgc2tpbldlaWdodHMgZm9yIHRoaXMgb2JqZWN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGV5IGFyZSBzdG9yZWQgYXMgdmVydGV4IGluZGljZXMgb24gZWFjaCBkZWZvcm1lciwgYW5kIHdlIG5lZWQgdGhlbSBhcyBkZWZvcm1lciBpbmRpY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBlYWNoIHZlcnRleC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWZvcm1lciApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDwgZGVmb3JtZXIuYXJyYXkubGVuZ3RoOyArKyBqICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZGVmb3JtZXIuYXJyYXlbIGogXS5pbmRpY2VzLmZpbmRJbmRleCggZnVuY3Rpb24gKCBpbmRleCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXggPT09IGluZGV4QnVmZmVyWyBwb2x5Z29uVmVydGV4SW5kZXggXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaW5kZXggIT09IC0gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRzLnB1c2goIGRlZm9ybWVyLmFycmF5WyBqIF0ud2VpZ2h0c1sgaW5kZXggXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRJbmRpY2VzLnB1c2goIGogKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHdlaWdodHMubGVuZ3RoID4gNCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ0ZCWExvYWRlcjogVmVydGV4IGhhcyBtb3JlIHRoYW4gNCBza2lubmluZyB3ZWlnaHRzIGFzc2lnbmVkIHRvIHZlcnRleC4gIERlbGV0aW5nIGFkZGl0aW9uYWwgd2VpZ2h0cy4nICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgV0luZGV4ID0gWyAwLCAwLCAwLCAwIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFdlaWdodCA9IFsgMCwgMCwgMCwgMCBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIHBvbHlnb25WZXJ0ZXhJbmRleCA9IDA7IHBvbHlnb25WZXJ0ZXhJbmRleCA8IHdlaWdodHMubGVuZ3RoOyArKyBwb2x5Z29uVmVydGV4SW5kZXggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRXZWlnaHQgPSB3ZWlnaHRzWyBwb2x5Z29uVmVydGV4SW5kZXggXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHdlaWdodEluZGljZXNbIHBvbHlnb25WZXJ0ZXhJbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaiA9IDA7IGogPCBXZWlnaHQubGVuZ3RoOyArKyBqICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1cnJlbnRXZWlnaHQgPiBXZWlnaHRbIGogXSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBXZWlnaHRbIGogXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXZWlnaHRbIGogXSA9IGN1cnJlbnRXZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdlaWdodCA9IHRtcDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IFdJbmRleFsgaiBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdJbmRleFsgaiBdID0gY3VycmVudEluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IHRtcDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodEluZGljZXMgPSBXSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0cyA9IFdlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IHdlaWdodHMubGVuZ3RoOyBpIDwgNDsgaSArKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodHNbIGkgXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0SW5kaWNlc1sgaSBdID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXguc2tpbldlaWdodHMuZnJvbUFycmF5KCB3ZWlnaHRzICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXguc2tpbkluZGljZXMuZnJvbUFycmF5KCB3ZWlnaHRJbmRpY2VzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmVydGV4LnNraW5XZWlnaHRzLm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG5vcm1hbEluZm8gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleC5ub3JtYWwuZnJvbUFycmF5KCBnZXREYXRhKCBwb2x5Z29uVmVydGV4SW5kZXgsIHBvbHlnb25JbmRleCwgdmVydGV4SW5kZXgsIG5vcm1hbEluZm8gKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHV2SW5mbyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4LnV2LmZyb21BcnJheSggZ2V0RGF0YSggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCB1dkluZm8gKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9BZGQgdmVydGV4IHRvIGZhY2UgYnVmZmVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNlVmVydGV4QnVmZmVyLnB1c2goIHZlcnRleCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGluZGV4IHdhcyBuZWdhdGl2ZSB0byBzdGFydCB3aXRoLCB3ZSBoYXZlIGZpbmlzaGVkIHRoaXMgaW5kaXZpZHVhbCBmYWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBjYW4gZ2VuZXJhdGUgdGhlIGZhY2UgZGF0YSB0byB0aGUgZ2VvbWV0cnkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZW5kT2ZGYWNlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmFjZSA9IG5ldyBGYWNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxzID0gZ2V0RGF0YSggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBtYXRlcmlhbEluZm8gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2UuZ2VuVHJpYW5nbGVzRnJvbVZlcnRpY2VzKCBmYWNlVmVydGV4QnVmZmVyICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNlLm1hdGVyaWFsSW5kZXggPSBtYXRlcmlhbHNbIDAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmZhY2VzLnB1c2goIGZhY2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2VWZXJ0ZXhCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb25JbmRleCArKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZE9mRmFjZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEB0eXBlIHt7dmVydGV4QnVmZmVyOiBudW1iZXJbXSwgbm9ybWFsQnVmZmVyOiBudW1iZXJbXSwgdXZCdWZmZXI6IG51bWJlcltdLCBza2luSW5kZXhCdWZmZXI6IG51bWJlcltdLCBza2luV2VpZ2h0QnVmZmVyOiBudW1iZXJbXSwgbWF0ZXJpYWxJbmRleEJ1ZmZlcjogbnVtYmVyW119fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWZmZXJJbmZvID0gZ2VvbWV0cnkuZmxhdHRlblRvQnVmZmVycygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdlbyA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlby5uYW1lID0gZ2VvbWV0cnlOb2RlLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvLmFkZEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggYnVmZmVySW5mby52ZXJ0ZXhCdWZmZXIgKSwgMyApICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGJ1ZmZlckluZm8ubm9ybWFsQnVmZmVyLmxlbmd0aCA+IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvLmFkZEF0dHJpYnV0ZSggJ25vcm1hbCcsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIG5ldyBGbG9hdDMyQXJyYXkoIGJ1ZmZlckluZm8ubm9ybWFsQnVmZmVyICksIDMgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYnVmZmVySW5mby51dkJ1ZmZlci5sZW5ndGggPiAwICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlby5hZGRBdHRyaWJ1dGUoICd1dicsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIG5ldyBGbG9hdDMyQXJyYXkoIGJ1ZmZlckluZm8udXZCdWZmZXIgKSwgMiApICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRlZm9ybWVyICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlby5hZGRBdHRyaWJ1dGUoICdza2luSW5kZXgnLCBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKCBuZXcgRmxvYXQzMkFycmF5KCBidWZmZXJJbmZvLnNraW5JbmRleEJ1ZmZlciApLCA0ICkgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW8uYWRkQXR0cmlidXRlKCAnc2tpbldlaWdodCcsIG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUoIG5ldyBGbG9hdDMyQXJyYXkoIGJ1ZmZlckluZm8uc2tpbldlaWdodEJ1ZmZlciApLCA0ICkgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW8uRkJYX0RlZm9ybWVyID0gZGVmb3JtZXI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBtYXRlcmlhbCBpbmRpY2VzIG9mIGVhY2ggdmVydGV4IGludG8gcmVuZGVyaW5nIGdyb3VwcyBvbiB0aGUgZ2VvbWV0cnkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZNYXRlcmlhbEluZGV4ID0gYnVmZmVySW5mby5tYXRlcmlhbEluZGV4QnVmZmVyWyAwIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBtYXRlcmlhbEJ1ZmZlckluZGV4ID0gMDsgbWF0ZXJpYWxCdWZmZXJJbmRleCA8IGJ1ZmZlckluZm8ubWF0ZXJpYWxJbmRleEJ1ZmZlci5sZW5ndGg7ICsrIG1hdGVyaWFsQnVmZmVySW5kZXggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBidWZmZXJJbmZvLm1hdGVyaWFsSW5kZXhCdWZmZXJbIG1hdGVyaWFsQnVmZmVySW5kZXggXSAhPT0gcHJldk1hdGVyaWFsSW5kZXggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlby5hZGRHcm91cCggc3RhcnRJbmRleCwgbWF0ZXJpYWxCdWZmZXJJbmRleCAtIHN0YXJ0SW5kZXgsIHByZXZNYXRlcmlhbEluZGV4ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEluZGV4ID0gbWF0ZXJpYWxCdWZmZXJJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZNYXRlcmlhbEluZGV4ID0gYnVmZmVySW5mby5tYXRlcmlhbEluZGV4QnVmZmVyWyBtYXRlcmlhbEJ1ZmZlckluZGV4IF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdlbztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFBhcnNlcyBub3JtYWwgaW5mb3JtYXRpb24gZm9yIGdlb21ldHJ5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RkJYR2VvbWV0cnlOb2RlfSBnZW9tZXRyeU5vZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7e2RhdGFTaXplOiBudW1iZXIsIGJ1ZmZlcjogbnVtYmVyW10sIGluZGljZXM6IG51bWJlcltdLCBtYXBwaW5nVHlwZTogc3RyaW5nLCByZWZlcmVuY2VUeXBlOiBzdHJpbmd9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldE5vcm1hbHMoIGdlb21ldHJ5Tm9kZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTm9ybWFsTm9kZSA9IGdlb21ldHJ5Tm9kZS5zdWJOb2Rlcy5MYXllckVsZW1lbnROb3JtYWxbIDAgXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwcGluZ1R5cGUgPSBOb3JtYWxOb2RlLnByb3BlcnRpZXMuTWFwcGluZ0luZm9ybWF0aW9uVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZmVyZW5jZVR5cGUgPSBOb3JtYWxOb2RlLnByb3BlcnRpZXMuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gcGFyc2VGbG9hdEFycmF5KCBOb3JtYWxOb2RlLnN1Yk5vZGVzLk5vcm1hbHMucHJvcGVydGllcy5hICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHJlZmVyZW5jZVR5cGUgPT09ICdJbmRleFRvRGlyZWN0JyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhCdWZmZXIgPSBwYXJzZUludEFycmF5KCBOb3JtYWxOb2RlLnN1Yk5vZGVzLk5vcm1hbEluZGV4LnByb3BlcnRpZXMuYSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNpemU6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IGJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXM6IGluZGV4QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGluZ1R5cGU6IG1hcHBpbmdUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogUGFyc2VzIFVWIGluZm9ybWF0aW9uIGZvciBnZW9tZXRyeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZCWEdlb21ldHJ5Tm9kZX0gZ2VvbWV0cnlOb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge3tkYXRhU2l6ZTogbnVtYmVyLCBidWZmZXI6IG51bWJlcltdLCBpbmRpY2VzOiBudW1iZXJbXSwgbWFwcGluZ1R5cGU6IHN0cmluZywgcmVmZXJlbmNlVHlwZTogc3RyaW5nfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRVVnMoIGdlb21ldHJ5Tm9kZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgVVZOb2RlID0gZ2VvbWV0cnlOb2RlLnN1Yk5vZGVzLkxheWVyRWxlbWVudFVWWyAwIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHBpbmdUeXBlID0gVVZOb2RlLnByb3BlcnRpZXMuTWFwcGluZ0luZm9ybWF0aW9uVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZmVyZW5jZVR5cGUgPSBVVk5vZGUucHJvcGVydGllcy5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWZmZXIgPSBwYXJzZUZsb2F0QXJyYXkoIFVWTm9kZS5zdWJOb2Rlcy5VVi5wcm9wZXJ0aWVzLmEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4QnVmZmVyID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcmVmZXJlbmNlVHlwZSA9PT0gJ0luZGV4VG9EaXJlY3QnICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleEJ1ZmZlciA9IHBhcnNlSW50QXJyYXkoIFVWTm9kZS5zdWJOb2Rlcy5VVkluZGV4LnByb3BlcnRpZXMuYSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVNpemU6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXI6IGJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXM6IGluZGV4QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGluZ1R5cGU6IG1hcHBpbmdUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlVHlwZTogcmVmZXJlbmNlVHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogUGFyc2VzIG1hdGVyaWFsIGFwcGxpY2F0aW9uIGluZm9ybWF0aW9uIGZvciBnZW9tZXRyeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZCWEdlb21ldHJ5Tm9kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7e2RhdGFTaXplOiBudW1iZXIsIGJ1ZmZlcjogbnVtYmVyW10sIGluZGljZXM6IG51bWJlcltdLCBtYXBwaW5nVHlwZTogc3RyaW5nLCByZWZlcmVuY2VUeXBlOiBzdHJpbmd9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldE1hdGVyaWFscyggZ2VvbWV0cnlOb2RlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBNYXRlcmlhbE5vZGUgPSBnZW9tZXRyeU5vZGUuc3ViTm9kZXMuTGF5ZXJFbGVtZW50TWF0ZXJpYWxbIDAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHBpbmdUeXBlID0gTWF0ZXJpYWxOb2RlLnByb3BlcnRpZXMuTWFwcGluZ0luZm9ybWF0aW9uVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZmVyZW5jZVR5cGUgPSBNYXRlcmlhbE5vZGUucHJvcGVydGllcy5SZWZlcmVuY2VJbmZvcm1hdGlvblR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbEluZGV4QnVmZmVyID0gcGFyc2VJbnRBcnJheSggTWF0ZXJpYWxOb2RlLnN1Yk5vZGVzLk1hdGVyaWFscy5wcm9wZXJ0aWVzLmEgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSBtYXRlcmlhbHMgYXJlIHN0b3JlZCBhcyBpbmRpY2VzLCB0aGVyZSdzIGEgYml0IG9mIGEgbWlzbWF0Y2ggYmV0d2VlbiBGQlggYW5kIHdoYXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgZXhwZWN0LiAgU28gd2UgY3JlYXRlIGFuIGludGVybWVkaWF0ZSBidWZmZXIgdGhhdCBwb2ludHMgdG8gdGhlIGluZGV4IGluIHRoZSBidWZmZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciBjb25mb3JtaW5nIHdpdGggdGhlIG90aGVyIGZ1bmN0aW9ucyB3ZSd2ZSB3cml0dGVuIGZvciBvdGhlciBkYXRhLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxJbmRpY2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsSW5kZXhCdWZmZXIuZm9yRWFjaCggZnVuY3Rpb24gKCBtYXRlcmlhbEluZGV4LCBpbmRleCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxJbmRpY2VzLnB1c2goIGluZGV4ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhU2l6ZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogbWF0ZXJpYWxJbmRleEJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXM6IG1hdGVyaWFsSW5kaWNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBpbmdUeXBlOiBtYXBwaW5nVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZVR5cGU6IHJlZmVyZW5jZVR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEZ1bmN0aW9uIHVzZXMgdGhlIGluZm9PYmplY3QgYW5kIGdpdmVuIGluZGljZXMgdG8gcmV0dXJuIHZhbHVlIGFycmF5IG9mIG9iamVjdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9seWdvblZlcnRleEluZGV4IC0gSW5kZXggb2YgdmVydGV4IGluIGRyYXcgb3JkZXIgKHdoaWNoIGluZGV4IG9mIHRoZSBpbmRleCBidWZmZXIgcmVmZXJzIHRvIHRoaXMgdmVydGV4KS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9seWdvbkluZGV4IC0gSW5kZXggb2YgcG9seWdvbiBpbiBnZW9tZXRyeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdmVydGV4SW5kZXggLSBJbmRleCBvZiB2ZXJ0ZXggaW5zaWRlIHZlcnRleCBidWZmZXIgKHVzZWQgYmVjYXVzZSBzb21lIGRhdGEgcmVmZXJzIHRvIG9sZCBpbmRleCBidWZmZXIgdGhhdCB3ZSBkb24ndCB1c2UgYW55bW9yZSkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHt7ZGF0YXNpemU6IG51bWJlciwgYnVmZmVyOiBudW1iZXJbXSwgaW5kaWNlczogbnVtYmVyW10sIG1hcHBpbmdUeXBlOiBzdHJpbmcsIHJlZmVyZW5jZVR5cGU6IHN0cmluZ319IGluZm9PYmplY3QgLSBPYmplY3QgY29udGFpbmluZyBkYXRhIGFuZCBob3cgdG8gYWNjZXNzIGRhdGEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge251bWJlcltdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldERhdGEoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgaW5mb09iamVjdCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgR2V0RGF0YSA9IHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnlQb2x5Z29uVmVydGV4OiB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBGdW5jdGlvbiB1c2VzIHRoZSBpbmZvT2JqZWN0IGFuZCBnaXZlbiBpbmRpY2VzIHRvIHJldHVybiB2YWx1ZSBhcnJheSBvZiBvYmplY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbHlnb25WZXJ0ZXhJbmRleCAtIEluZGV4IG9mIHZlcnRleCBpbiBkcmF3IG9yZGVyICh3aGljaCBpbmRleCBvZiB0aGUgaW5kZXggYnVmZmVyIHJlZmVycyB0byB0aGlzIHZlcnRleCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbHlnb25JbmRleCAtIEluZGV4IG9mIHBvbHlnb24gaW4gZ2VvbWV0cnkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZlcnRleEluZGV4IC0gSW5kZXggb2YgdmVydGV4IGluc2lkZSB2ZXJ0ZXggYnVmZmVyICh1c2VkIGJlY2F1c2Ugc29tZSBkYXRhIHJlZmVycyB0byBvbGQgaW5kZXggYnVmZmVyIHRoYXQgd2UgZG9uJ3QgdXNlIGFueW1vcmUpLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7e2RhdGFzaXplOiBudW1iZXIsIGJ1ZmZlcjogbnVtYmVyW10sIGluZGljZXM6IG51bWJlcltdLCBtYXBwaW5nVHlwZTogc3RyaW5nLCByZWZlcmVuY2VUeXBlOiBzdHJpbmd9fSBpbmZvT2JqZWN0IC0gT2JqZWN0IGNvbnRhaW5pbmcgZGF0YSBhbmQgaG93IHRvIGFjY2VzcyBkYXRhLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJbXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3Q6IGZ1bmN0aW9uICggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmZvT2JqZWN0LmJ1ZmZlci5zbGljZSggKCBwb2x5Z29uVmVydGV4SW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplICksICggcG9seWdvblZlcnRleEluZGV4ICogaW5mb09iamVjdC5kYXRhU2l6ZSApICsgaW5mb09iamVjdC5kYXRhU2l6ZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEZ1bmN0aW9uIHVzZXMgdGhlIGluZm9PYmplY3QgYW5kIGdpdmVuIGluZGljZXMgdG8gcmV0dXJuIHZhbHVlIGFycmF5IG9mIG9iamVjdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9seWdvblZlcnRleEluZGV4IC0gSW5kZXggb2YgdmVydGV4IGluIGRyYXcgb3JkZXIgKHdoaWNoIGluZGV4IG9mIHRoZSBpbmRleCBidWZmZXIgcmVmZXJzIHRvIHRoaXMgdmVydGV4KS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcG9seWdvbkluZGV4IC0gSW5kZXggb2YgcG9seWdvbiBpbiBnZW9tZXRyeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdmVydGV4SW5kZXggLSBJbmRleCBvZiB2ZXJ0ZXggaW5zaWRlIHZlcnRleCBidWZmZXIgKHVzZWQgYmVjYXVzZSBzb21lIGRhdGEgcmVmZXJzIHRvIG9sZCBpbmRleCBidWZmZXIgdGhhdCB3ZSBkb24ndCB1c2UgYW55bW9yZSkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHt7ZGF0YXNpemU6IG51bWJlciwgYnVmZmVyOiBudW1iZXJbXSwgaW5kaWNlczogbnVtYmVyW10sIG1hcHBpbmdUeXBlOiBzdHJpbmcsIHJlZmVyZW5jZVR5cGU6IHN0cmluZ319IGluZm9PYmplY3QgLSBPYmplY3QgY29udGFpbmluZyBkYXRhIGFuZCBob3cgdG8gYWNjZXNzIGRhdGEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge251bWJlcltdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluZGV4VG9EaXJlY3Q6IGZ1bmN0aW9uICggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGluZm9PYmplY3QuaW5kaWNlc1sgcG9seWdvblZlcnRleEluZGV4IF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmZvT2JqZWN0LmJ1ZmZlci5zbGljZSggKCBpbmRleCAqIGluZm9PYmplY3QuZGF0YVNpemUgKSwgKCBpbmRleCAqIGluZm9PYmplY3QuZGF0YVNpemUgKSArIGluZm9PYmplY3QuZGF0YVNpemUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnlQb2x5Z29uOiB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBGdW5jdGlvbiB1c2VzIHRoZSBpbmZvT2JqZWN0IGFuZCBnaXZlbiBpbmRpY2VzIHRvIHJldHVybiB2YWx1ZSBhcnJheSBvZiBvYmplY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbHlnb25WZXJ0ZXhJbmRleCAtIEluZGV4IG9mIHZlcnRleCBpbiBkcmF3IG9yZGVyICh3aGljaCBpbmRleCBvZiB0aGUgaW5kZXggYnVmZmVyIHJlZmVycyB0byB0aGlzIHZlcnRleCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbHlnb25JbmRleCAtIEluZGV4IG9mIHBvbHlnb24gaW4gZ2VvbWV0cnkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZlcnRleEluZGV4IC0gSW5kZXggb2YgdmVydGV4IGluc2lkZSB2ZXJ0ZXggYnVmZmVyICh1c2VkIGJlY2F1c2Ugc29tZSBkYXRhIHJlZmVycyB0byBvbGQgaW5kZXggYnVmZmVyIHRoYXQgd2UgZG9uJ3QgdXNlIGFueW1vcmUpLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7e2RhdGFzaXplOiBudW1iZXIsIGJ1ZmZlcjogbnVtYmVyW10sIGluZGljZXM6IG51bWJlcltdLCBtYXBwaW5nVHlwZTogc3RyaW5nLCByZWZlcmVuY2VUeXBlOiBzdHJpbmd9fSBpbmZvT2JqZWN0IC0gT2JqZWN0IGNvbnRhaW5pbmcgZGF0YSBhbmQgaG93IHRvIGFjY2VzcyBkYXRhLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJbXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaXJlY3Q6IGZ1bmN0aW9uICggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmZvT2JqZWN0LmJ1ZmZlci5zbGljZSggcG9seWdvbkluZGV4ICogaW5mb09iamVjdC5kYXRhU2l6ZSwgcG9seWdvbkluZGV4ICogaW5mb09iamVjdC5kYXRhU2l6ZSArIGluZm9PYmplY3QuZGF0YVNpemUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBGdW5jdGlvbiB1c2VzIHRoZSBpbmZvT2JqZWN0IGFuZCBnaXZlbiBpbmRpY2VzIHRvIHJldHVybiB2YWx1ZSBhcnJheSBvZiBvYmplY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbHlnb25WZXJ0ZXhJbmRleCAtIEluZGV4IG9mIHZlcnRleCBpbiBkcmF3IG9yZGVyICh3aGljaCBpbmRleCBvZiB0aGUgaW5kZXggYnVmZmVyIHJlZmVycyB0byB0aGlzIHZlcnRleCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbHlnb25JbmRleCAtIEluZGV4IG9mIHBvbHlnb24gaW4gZ2VvbWV0cnkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZlcnRleEluZGV4IC0gSW5kZXggb2YgdmVydGV4IGluc2lkZSB2ZXJ0ZXggYnVmZmVyICh1c2VkIGJlY2F1c2Ugc29tZSBkYXRhIHJlZmVycyB0byBvbGQgaW5kZXggYnVmZmVyIHRoYXQgd2UgZG9uJ3QgdXNlIGFueW1vcmUpLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7e2RhdGFzaXplOiBudW1iZXIsIGJ1ZmZlcjogbnVtYmVyW10sIGluZGljZXM6IG51bWJlcltdLCBtYXBwaW5nVHlwZTogc3RyaW5nLCByZWZlcmVuY2VUeXBlOiBzdHJpbmd9fSBpbmZvT2JqZWN0IC0gT2JqZWN0IGNvbnRhaW5pbmcgZGF0YSBhbmQgaG93IHRvIGFjY2VzcyBkYXRhLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJbXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRleFRvRGlyZWN0OiBmdW5jdGlvbiAoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgaW5mb09iamVjdCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBpbmZvT2JqZWN0LmluZGljZXNbIHBvbHlnb25JbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5mb09iamVjdC5idWZmZXIuc2xpY2UoIGluZGV4ICogaW5mb09iamVjdC5kYXRhU2l6ZSwgaW5kZXggKiBpbmZvT2JqZWN0LmRhdGFTaXplICsgaW5mb09iamVjdC5kYXRhU2l6ZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGxTYW1lOiB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBGdW5jdGlvbiB1c2VzIHRoZSBpbmZvT2JqZWN0IGFuZCBnaXZlbiBpbmRpY2VzIHRvIHJldHVybiB2YWx1ZSBhcnJheSBvZiBvYmplY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbHlnb25WZXJ0ZXhJbmRleCAtIEluZGV4IG9mIHZlcnRleCBpbiBkcmF3IG9yZGVyICh3aGljaCBpbmRleCBvZiB0aGUgaW5kZXggYnVmZmVyIHJlZmVycyB0byB0aGlzIHZlcnRleCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHBvbHlnb25JbmRleCAtIEluZGV4IG9mIHBvbHlnb24gaW4gZ2VvbWV0cnkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZlcnRleEluZGV4IC0gSW5kZXggb2YgdmVydGV4IGluc2lkZSB2ZXJ0ZXggYnVmZmVyICh1c2VkIGJlY2F1c2Ugc29tZSBkYXRhIHJlZmVycyB0byBvbGQgaW5kZXggYnVmZmVyIHRoYXQgd2UgZG9uJ3QgdXNlIGFueW1vcmUpLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7e2RhdGFzaXplOiBudW1iZXIsIGJ1ZmZlcjogbnVtYmVyW10sIGluZGljZXM6IG51bWJlcltdLCBtYXBwaW5nVHlwZTogc3RyaW5nLCByZWZlcmVuY2VUeXBlOiBzdHJpbmd9fSBpbmZvT2JqZWN0IC0gT2JqZWN0IGNvbnRhaW5pbmcgZGF0YSBhbmQgaG93IHRvIGFjY2VzcyBkYXRhLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJbXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbmRleFRvRGlyZWN0OiBmdW5jdGlvbiAoIHBvbHlnb25WZXJ0ZXhJbmRleCwgcG9seWdvbkluZGV4LCB2ZXJ0ZXhJbmRleCwgaW5mb09iamVjdCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5mb09iamVjdC5idWZmZXIuc2xpY2UoIGluZm9PYmplY3QuaW5kaWNlc1sgMCBdICogaW5mb09iamVjdC5kYXRhU2l6ZSwgaW5mb09iamVjdC5pbmRpY2VzWyAwIF0gKiBpbmZvT2JqZWN0LmRhdGFTaXplICsgaW5mb09iamVjdC5kYXRhU2l6ZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2V0RGF0YVsgaW5mb09iamVjdC5tYXBwaW5nVHlwZSBdWyBpbmZvT2JqZWN0LnJlZmVyZW5jZVR5cGUgXSggcG9seWdvblZlcnRleEluZGV4LCBwb2x5Z29uSW5kZXgsIHZlcnRleEluZGV4LCBpbmZvT2JqZWN0ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIFNwZWNpYWx0eSBmdW5jdGlvbiBmb3IgcGFyc2luZyBOdXJic0N1cnZlIGJhc2VkIEdlb21ldHJ5IE5vZGVzLlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZCWEdlb21ldHJ5Tm9kZX0gZ2VvbWV0cnlOb2RlXG4gICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7e3BhcmVudHM6IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXSwgY2hpbGRyZW46IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXX19IHJlbGF0aW9uc2hpcHNcbiAgICAgICAgICAgICAgICAgICAgICogQHJldHVybnMge1RIUkVFLkJ1ZmZlckdlb21ldHJ5fVxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VOdXJic0dlb21ldHJ5KCBnZW9tZXRyeU5vZGUsIHJlbGF0aW9uc2hpcHMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggVEhSRUUuTlVSQlNDdXJ2ZSA9PT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvciggXCJUSFJFRS5GQlhMb2FkZXIgcmVsaWVzIG9uIFRIUkVFLk5VUkJTQ3VydmUgZm9yIGFueSBudXJicyBwcmVzZW50IGluIHRoZSBtb2RlbC4gIE51cmJzIHdpbGwgc2hvdyB1cCBhcyBlbXB0eSBnZW9tZXRyeS5cIiApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXIgPSBwYXJzZUludCggZ2VvbWV0cnlOb2RlLnByb3BlcnRpZXMuT3JkZXIgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBpc05hTiggb3JkZXIgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIFwiRkJYTG9hZGVyOiBJbnZhbGlkIE9yZGVyIFwiICsgZ2VvbWV0cnlOb2RlLnByb3BlcnRpZXMuT3JkZXIgKyBcIiBnaXZlbiBmb3IgZ2VvbWV0cnkgSUQ6IFwiICsgZ2VvbWV0cnlOb2RlLmlkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrbm90cyA9IHBhcnNlRmxvYXRBcnJheSggZ2VvbWV0cnlOb2RlLnN1Yk5vZGVzLktub3RWZWN0b3IucHJvcGVydGllcy5hICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udHJvbFBvaW50cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50c1ZhbHVlcyA9IHBhcnNlRmxvYXRBcnJheSggZ2VvbWV0cnlOb2RlLnN1Yk5vZGVzLlBvaW50cy5wcm9wZXJ0aWVzLmEgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgcG9pbnRzVmFsdWVzLmxlbmd0aDsgaSArPSA0ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbFBvaW50cy5wdXNoKCBuZXcgVEhSRUUuVmVjdG9yNCggcG9pbnRzVmFsdWVzWyBpIF0sIHBvaW50c1ZhbHVlc1sgaSArIDEgXSwgcG9pbnRzVmFsdWVzWyBpICsgMiBdLCBwb2ludHNWYWx1ZXNbIGkgKyAzIF0gKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZ2VvbWV0cnlOb2RlLnByb3BlcnRpZXMuRm9ybSA9PT0gJ0Nsb3NlZCcgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sUG9pbnRzLnB1c2goIGNvbnRyb2xQb2ludHNbIDAgXSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJ2ZSA9IG5ldyBUSFJFRS5OVVJCU0N1cnZlKCBvcmRlciAtIDEsIGtub3RzLCBjb250cm9sUG9pbnRzICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGljZXMgPSBjdXJ2ZS5nZXRQb2ludHMoIGNvbnRyb2xQb2ludHMubGVuZ3RoICogMS41ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2VzLmZvckVhY2goIGZ1bmN0aW9uICggcG9zaXRpb24gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBwb3NpdGlvbi50b0FycmF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyID0gdmVydGV4QnVmZmVyLmNvbmNhdCggYXJyYXkgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3Bvc2l0aW9uJywgbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZSggbmV3IEZsb2F0MzJBcnJheSggdmVydGV4QnVmZmVyICksIDMgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VvbWV0cnk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRmluYWxseSBnZW5lcmF0ZXMgU2NlbmUgZ3JhcGggYW5kIFNjZW5lIGdyYXBoIE9iamVjdHMuXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3tPYmplY3RzOiB7c3ViTm9kZXM6IHtNb2RlbDogT2JqZWN0LjxudW1iZXIsIEZCWE1vZGVsTm9kZT59fX19IEZCWFRyZWVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7TWFwPG51bWJlciwge3BhcmVudHM6IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXSwgY2hpbGRyZW46IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXX0+fSBjb25uZWN0aW9uc1xuICAgICAgICAgICAgICogQHBhcmFtIHtNYXA8bnVtYmVyLCB7bWFwOiBNYXA8bnVtYmVyLCB7RkJYX0lEOiBudW1iZXIsIGluZGljZXM6IG51bWJlcltdLCB3ZWlnaHRzOiBudW1iZXJbXSwgdHJhbnNmb3JtOiBudW1iZXJbXSwgdHJhbnNmb3JtTGluazogbnVtYmVyW10sIGxpbmtNb2RlOiBzdHJpbmd9PiwgYXJyYXk6IHtGQlhfSUQ6IG51bWJlciwgaW5kaWNlczogbnVtYmVyW10sIHdlaWdodHM6IG51bWJlcltdLCB0cmFuc2Zvcm06IG51bWJlcltdLCB0cmFuc2Zvcm1MaW5rOiBudW1iZXJbXSwgbGlua01vZGU6IHN0cmluZ31bXSwgc2tlbGV0b246IFRIUkVFLlNrZWxldG9ufG51bGx9Pn0gZGVmb3JtZXJNYXBcbiAgICAgICAgICAgICAqIEBwYXJhbSB7TWFwPG51bWJlciwgVEhSRUUuQnVmZmVyR2VvbWV0cnk+fSBnZW9tZXRyeU1hcFxuICAgICAgICAgICAgICogQHBhcmFtIHtNYXA8bnVtYmVyLCBUSFJFRS5NYXRlcmlhbD59IG1hdGVyaWFsTWFwXG4gICAgICAgICAgICAgKiBAcmV0dXJucyB7VEhSRUUuR3JvdXB9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlU2NlbmUoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBkZWZvcm1lck1hcCwgZ2VvbWV0cnlNYXAsIG1hdGVyaWFsTWFwICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHNjZW5lR3JhcGggPSBuZXcgVEhSRUUuR3JvdXAoKTtcblxuICAgICAgICAgICAgICAgIHZhciBNb2RlbE5vZGUgPSBGQlhUcmVlLk9iamVjdHMuc3ViTm9kZXMuTW9kZWw7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPFRIUkVFLk9iamVjdDNEPn1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB2YXIgbW9kZWxBcnJheSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogQHR5cGUge01hcC48bnVtYmVyLCBUSFJFRS5PYmplY3QzRD59XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIG5vZGVJRCBpbiBNb2RlbE5vZGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gcGFyc2VJbnQoIG5vZGVJRCApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IE1vZGVsTm9kZVsgbm9kZUlEIF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25ucyA9IGNvbm5lY3Rpb25zLmdldCggaWQgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgY29ubnMucGFyZW50cy5sZW5ndGg7ICsrIGkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZm9ybWVyTWFwLmZvckVhY2goIGZ1bmN0aW9uICggZGVmb3JtZXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRlZm9ybWVyLm1hcC5oYXMoIGNvbm5zLnBhcmVudHNbIGkgXS5JRCApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLkJvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZGVmb3JtZXIuYXJyYXkuZmluZEluZGV4KCBmdW5jdGlvbiAoIHN1YkRlZm9ybWVyICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3ViRGVmb3JtZXIuRkJYX0lEID09PSBjb25ucy5wYXJlbnRzWyBpIF0uSUQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZvcm1lci5ib25lc1sgaW5kZXggXSA9IG1vZGVsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoICEgbW9kZWwgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIG5vZGUuYXR0clR5cGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTWVzaFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHR5cGUgez9USFJFRS5CdWZmZXJHZW9tZXRyeX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEB0eXBlIHtUSFJFRS5NdWx0aU1hdGVyaWFsfFRIUkVFLk1hdGVyaWFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHR5cGUge0FycmF5LjxUSFJFRS5NYXRlcmlhbD59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxzID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubnMuY2hpbGRyZW4uZm9yRWFjaCggZnVuY3Rpb24gKCBjaGlsZCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBnZW9tZXRyeU1hcC5oYXMoIGNoaWxkLklEICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5TWFwLmdldCggY2hpbGQuSUQgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1hdGVyaWFsTWFwLmhhcyggY2hpbGQuSUQgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFscy5wdXNoKCBtYXRlcmlhbE1hcC5nZXQoIGNoaWxkLklEICkgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRlcmlhbHMubGVuZ3RoID4gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTXVsdGlNYXRlcmlhbCggbWF0ZXJpYWxzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggbWF0ZXJpYWxzLmxlbmd0aCA+IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbWF0ZXJpYWxzWyAwIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoIHsgY29sb3I6IDB4MzMwMGZmIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZ2VvbWV0cnkuRkJYX0RlZm9ybWVyICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbHMuZm9yRWFjaCggZnVuY3Rpb24gKCBtYXRlcmlhbCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNraW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2tpbm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBuZXcgVEhSRUUuU2tpbm5lZE1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiTnVyYnNDdXJ2ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5zLmNoaWxkcmVuLmZvckVhY2goIGZ1bmN0aW9uICggY2hpbGQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZ2VvbWV0cnlNYXAuaGFzKCBjaGlsZC5JRCApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeU1hcC5nZXQoIGNoaWxkLklEICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRkJYIGRvZXMgbm90IGxpc3QgbWF0ZXJpYWxzIGZvciBOdXJicyBsaW5lcywgc28gd2UnbGwganVzdCBwdXQgb3VyIG93biBpbiBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCggeyBjb2xvcjogMHgzMzAwZmYsIGxpbmV3aWR0aDogNSB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLkxpbmUoIGdlb21ldHJ5LCBtYXRlcmlhbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLm5hbWUgPSBub2RlLmF0dHJOYW1lLnJlcGxhY2UoIC86LywgJycgKS5yZXBsYWNlKCAvXy8sICcnICkucmVwbGFjZSggLy0vLCAnJyApO1xuICAgICAgICAgICAgICAgICAgICBtb2RlbC5GQlhfSUQgPSBpZDtcblxuICAgICAgICAgICAgICAgICAgICBtb2RlbEFycmF5LnB1c2goIG1vZGVsICk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsTWFwLnNldCggaWQsIG1vZGVsICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtb2RlbEFycmF5LmZvckVhY2goIGZ1bmN0aW9uICggbW9kZWwgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBNb2RlbE5vZGVbIG1vZGVsLkZCWF9JRCBdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggJ0xjbF9UcmFuc2xhdGlvbicgaW4gbm9kZS5wcm9wZXJ0aWVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC5wb3NpdGlvbi5mcm9tQXJyYXkoIHBhcnNlRmxvYXRBcnJheSggbm9kZS5wcm9wZXJ0aWVzLkxjbF9UcmFuc2xhdGlvbi52YWx1ZSApICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICggJ0xjbF9Sb3RhdGlvbicgaW4gbm9kZS5wcm9wZXJ0aWVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRpb24gPSBwYXJzZUZsb2F0QXJyYXkoIG5vZGUucHJvcGVydGllcy5MY2xfUm90YXRpb24udmFsdWUgKS5tYXAoIGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKiBNYXRoLlBJIC8gMTgwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbi5wdXNoKCAnWllYJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwucm90YXRpb24uZnJvbUFycmF5KCByb3RhdGlvbiApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoICdMY2xfU2NhbGluZycgaW4gbm9kZS5wcm9wZXJ0aWVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC5zY2FsZS5mcm9tQXJyYXkoIHBhcnNlRmxvYXRBcnJheSggbm9kZS5wcm9wZXJ0aWVzLkxjbF9TY2FsaW5nLnZhbHVlICkgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbm5zID0gY29ubmVjdGlvbnMuZ2V0KCBtb2RlbC5GQlhfSUQgKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIHBhcmVudEluZGV4ID0gMDsgcGFyZW50SW5kZXggPCBjb25ucy5wYXJlbnRzLmxlbmd0aDsgcGFyZW50SW5kZXggKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwSW5kZXggPSBtb2RlbEFycmF5LmZpbmRJbmRleCggZnVuY3Rpb24gKCBtb2QgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kLkZCWF9JRCA9PT0gY29ubnMucGFyZW50c1sgcGFyZW50SW5kZXggXS5JRDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwSW5kZXggPiAtIDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbEFycmF5WyBwSW5kZXggXS5hZGQoIG1vZGVsICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICggbW9kZWwucGFyZW50ID09PSBudWxsICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2VuZUdyYXBoLmFkZCggbW9kZWwgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cblxuICAgICAgICAgICAgICAgIC8vIE5vdyB3aXRoIHRoZSBib25lcyBjcmVhdGVkLCB3ZSBjYW4gdXBkYXRlIHRoZSBza2VsZXRvbnMgYW5kIGJpbmQgdGhlbSB0byB0aGUgc2tpbm5lZCBtZXNoZXMuXG4gICAgICAgICAgICAgICAgc2NlbmVHcmFwaC51cGRhdGVNYXRyaXhXb3JsZCggdHJ1ZSApO1xuXG4gICAgICAgICAgICAgICAgLy8gUHV0IHNrZWxldG9uIGludG8gYmluZCBwb3NlLlxuICAgICAgICAgICAgICAgIHZhciBCaW5kUG9zZU5vZGUgPSBGQlhUcmVlLk9iamVjdHMuc3ViTm9kZXMuUG9zZTtcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIEJpbmRQb3NlTm9kZSApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIEJpbmRQb3NlTm9kZVsgbm9kZUlEIF0uYXR0clR5cGUgPT09ICdCaW5kUG9zZScgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIEJpbmRQb3NlTm9kZSA9IEJpbmRQb3NlTm9kZVsgbm9kZUlEIF07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCBCaW5kUG9zZU5vZGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIFBvc2VOb2RlID0gQmluZFBvc2VOb2RlLnN1Yk5vZGVzLlBvc2VOb2RlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgd29ybGRNYXRyaWNlcyA9IG5ldyBNYXAoKTtcblxuICAgICAgICAgICAgICAgICAgICBQb3NlTm9kZS5mb3JFYWNoKCBmdW5jdGlvbiAoIG5vZGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYXdNYXRXcmQgPSBwYXJzZU1hdHJpeEFycmF5KCBub2RlLnN1Yk5vZGVzLk1hdHJpeC5wcm9wZXJ0aWVzLmEgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgd29ybGRNYXRyaWNlcy5zZXQoIHBhcnNlSW50KCBub2RlLmlkICksIHJhd01hdFdyZCApO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlZm9ybWVyTWFwLmZvckVhY2goIGZ1bmN0aW9uICggZGVmb3JtZXIsIEZCWF9JRCApIHtcblxuICAgICAgICAgICAgICAgICAgICBkZWZvcm1lci5hcnJheS5mb3JFYWNoKCBmdW5jdGlvbiAoIHN1YkRlZm9ybWVyLCBzdWJEZWZvcm1lckluZGV4ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEB0eXBlIHtUSFJFRS5Cb25lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZSA9IGRlZm9ybWVyLmJvbmVzWyBzdWJEZWZvcm1lckluZGV4IF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICEgd29ybGRNYXRyaWNlcy5oYXMoIGJvbmUuRkJYX0lEICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXQgPSB3b3JsZE1hdHJpY2VzLmdldCggYm9uZS5GQlhfSUQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvbmUubWF0cml4V29ybGQuY29weSggbWF0ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdyB0aGF0IHNrZWxldG9uIGlzIGluIGJpbmQgcG9zZSwgYmluZCB0byBtb2RlbC5cbiAgICAgICAgICAgICAgICAgICAgZGVmb3JtZXIuc2tlbGV0b24gPSBuZXcgVEhSRUUuU2tlbGV0b24oIGRlZm9ybWVyLmJvbmVzICk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb25ucyA9IGNvbm5lY3Rpb25zLmdldCggRkJYX0lEICk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5zLnBhcmVudHMuZm9yRWFjaCggZnVuY3Rpb24gKCBwYXJlbnQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZ2VvbWV0cnlNYXAuaGFzKCBwYXJlbnQuSUQgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZW9JRCA9IHBhcmVudC5JRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2VvQ29ubnMgPSBjb25uZWN0aW9ucy5nZXQoIGdlb0lEICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgZ2VvQ29ubnMucGFyZW50cy5sZW5ndGg7ICsrIGkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtb2RlbE1hcC5oYXMoIGdlb0Nvbm5zLnBhcmVudHNbIGkgXS5JRCApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBtb2RlbE1hcC5nZXQoIGdlb0Nvbm5zLnBhcmVudHNbIGkgXS5JRCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9BU1NFUlQgbW9kZWwgdHlwZW9mIFNraW5uZWRNZXNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC5iaW5kKCBkZWZvcm1lci5za2VsZXRvbiwgbW9kZWwubWF0cml4V29ybGQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgIC8vIFNrZWxldG9uIGlzIG5vdyBib3VuZCwgd2UgYXJlIG5vdyBmcmVlIHRvIHNldCB1cCB0aGVcbiAgICAgICAgICAgICAgICAvLyBzY2VuZSBncmFwaC5cbiAgICAgICAgICAgICAgICBtb2RlbEFycmF5LmZvckVhY2goIGZ1bmN0aW9uICggbW9kZWwgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBNb2RlbE5vZGVbIG1vZGVsLkZCWF9JRCBdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggJ0xjbF9UcmFuc2xhdGlvbicgaW4gbm9kZS5wcm9wZXJ0aWVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC5wb3NpdGlvbi5mcm9tQXJyYXkoIHBhcnNlRmxvYXRBcnJheSggbm9kZS5wcm9wZXJ0aWVzLkxjbF9UcmFuc2xhdGlvbi52YWx1ZSApICk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICggJ0xjbF9Sb3RhdGlvbicgaW4gbm9kZS5wcm9wZXJ0aWVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRpb24gPSBwYXJzZUZsb2F0QXJyYXkoIG5vZGUucHJvcGVydGllcy5MY2xfUm90YXRpb24udmFsdWUgKS5tYXAoIGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKiBNYXRoLlBJIC8gMTgwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbi5wdXNoKCAnWllYJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwucm90YXRpb24uZnJvbUFycmF5KCByb3RhdGlvbiApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoICdMY2xfU2NhbGluZycgaW4gbm9kZS5wcm9wZXJ0aWVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC5zY2FsZS5mcm9tQXJyYXkoIHBhcnNlRmxvYXRBcnJheSggbm9kZS5wcm9wZXJ0aWVzLkxjbF9TY2FsaW5nLnZhbHVlICkgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAvLyBTaWxseSBoYWNrIHdpdGggdGhlIGFuaW1hdGlvbiBwYXJzaW5nLiAgV2UncmUgZ29ubmEgcHJldGVuZCB0aGUgc2NlbmUgZ3JhcGggaGFzIGEgc2tlbGV0b25cbiAgICAgICAgICAgICAgICAvLyB0byBhdHRhY2ggYW5pbWF0aW9ucyB0bywgc2luY2UgRkJYcyB0cmVhdCBhbmltYXRpb25zIGFzIGFuaW1hdGlvbnMgZm9yIHRoZSBlbnRpcmUgc2NlbmUsXG4gICAgICAgICAgICAgICAgLy8gbm90IGp1c3QgZm9yIGluZGl2aWR1YWwgb2JqZWN0cy5cbiAgICAgICAgICAgICAgICBzY2VuZUdyYXBoLnNrZWxldG9uID0ge1xuICAgICAgICAgICAgICAgICAgICBib25lczogbW9kZWxBcnJheVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9ucyA9IHBhcnNlQW5pbWF0aW9ucyggRkJYVHJlZSwgY29ubmVjdGlvbnMsIHNjZW5lR3JhcGggKTtcblxuICAgICAgICAgICAgICAgIGFkZEFuaW1hdGlvbnMoIHNjZW5lR3JhcGgsIGFuaW1hdGlvbnMgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzY2VuZUdyYXBoO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUGFyc2VzIGFuaW1hdGlvbiBpbmZvcm1hdGlvbiBmcm9tIEZCWFRyZWUgYW5kIGdlbmVyYXRlcyBhbiBBbmltYXRpb25JbmZvT2JqZWN0LlxuICAgICAgICAgICAgICogQHBhcmFtIHt7T2JqZWN0czoge3N1Yk5vZGVzOiB7QW5pbWF0aW9uQ3VydmVOb2RlOiBhbnksIEFuaW1hdGlvbkN1cnZlOiBhbnksIEFuaW1hdGlvbkxheWVyOiBhbnksIEFuaW1hdGlvblN0YWNrOiBhbnl9fX19IEZCWFRyZWVcbiAgICAgICAgICAgICAqIEBwYXJhbSB7TWFwPG51bWJlciwge3BhcmVudHM6IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXSwgY2hpbGRyZW46IHtJRDogbnVtYmVyLCByZWxhdGlvbnNoaXA6IHN0cmluZ31bXX0+fSBjb25uZWN0aW9uc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmdW5jdGlvbiBwYXJzZUFuaW1hdGlvbnMoIEZCWFRyZWUsIGNvbm5lY3Rpb25zLCBzY2VuZUdyYXBoICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHJhd05vZGVzID0gRkJYVHJlZS5PYmplY3RzLnN1Yk5vZGVzLkFuaW1hdGlvbkN1cnZlTm9kZTtcbiAgICAgICAgICAgICAgICB2YXIgcmF3Q3VydmVzID0gRkJYVHJlZS5PYmplY3RzLnN1Yk5vZGVzLkFuaW1hdGlvbkN1cnZlO1xuICAgICAgICAgICAgICAgIHZhciByYXdMYXllcnMgPSBGQlhUcmVlLk9iamVjdHMuc3ViTm9kZXMuQW5pbWF0aW9uTGF5ZXI7XG4gICAgICAgICAgICAgICAgdmFyIHJhd1N0YWNrcyA9IEZCWFRyZWUuT2JqZWN0cy5zdWJOb2Rlcy5BbmltYXRpb25TdGFjaztcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEB0eXBlIHt7XG5cdFx0XHRcdCAgICAgY3VydmVzOiBNYXA8bnVtYmVyLCB7XG5cdFx0XHRcdFx0XHQgVDoge1xuXHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0YXR0clg6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0Y29udGFpbmVyQm9uZUlEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHRcdHg6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0eToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR6OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdCBSOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGF0dHI6IHN0cmluZztcblx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRhdHRyWDogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0YXR0clk6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGF0dHJaOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRjb250YWluZXJCb25lSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0Y29udGFpbmVySUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0Y3VydmVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0eDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR5OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdHo6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0IFM6IHtcblx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0YXR0cjogc3RyaW5nO1xuXHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGF0dHJYOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRhdHRyWTogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0YXR0clo6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lckJvbmVJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRjb250YWluZXJJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRjdXJ2ZXM6IHtcblx0XHRcdFx0XHRcdFx0XHR4OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0ejoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQgfT4sXG5cdFx0XHRcdFx0IGxheWVyczogTWFwPG51bWJlciwge1xuXHRcdFx0XHRcdCBcdFQ6IHtcblx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0YXR0cjogc3RyaW5nO1xuXHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGF0dHJYOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRhdHRyWTogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0YXR0clo6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lckJvbmVJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRjb250YWluZXJJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRjdXJ2ZXM6IHtcblx0XHRcdFx0XHRcdFx0XHR4OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0ejoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRSOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGF0dHI6IHN0cmluZztcblx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRhdHRyWDogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0YXR0clk6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGF0dHJaOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRjb250YWluZXJCb25lSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0Y29udGFpbmVySUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0Y3VydmVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0eDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR5OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdHo6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0Uzoge1xuXHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0YXR0clg6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0Y29udGFpbmVyQm9uZUlEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHRcdHg6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0eToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR6OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVtdPixcblx0XHRcdFx0XHQgc3RhY2tzOiBNYXA8bnVtYmVyLCB7XG5cdFx0XHRcdFx0XHQgbmFtZTogc3RyaW5nLFxuXHRcdFx0XHRcdFx0IGxheWVyczoge1xuXHRcdFx0XHRcdFx0XHRUOiB7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJYOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJaOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckJvbmVJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0Y3VydmVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR4OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0ejoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0Ujoge1xuXHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0YXR0cjogc3RyaW5nO1xuXHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRhdHRyWDogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0XHRhdHRyWTogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJCb25lSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0eDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHR5OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdHo6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFM6IHtcblx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHI6IHN0cmluZztcblx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0YXR0clg6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdFx0YXR0clk6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdFx0YXR0clo6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyQm9uZUlEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVySUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRjdXJ2ZXM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHg6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0eToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHR6OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVtdW10sXG5cdFx0XHRcdFx0IGxlbmd0aDogbnVtYmVyLFxuXHRcdFx0XHRcdCBmcmFtZXM6IG51bWJlciB9Pixcblx0XHRcdFx0XHQgbGVuZ3RoOiBudW1iZXIsXG5cdFx0XHRcdFx0IGZwczogbnVtYmVyLFxuXHRcdFx0XHRcdCBmcmFtZXM6IG51bWJlclxuXHRcdFx0XHQgfX1cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB2YXIgcmV0dXJuT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgICAgICBjdXJ2ZXM6IG5ldyBNYXAoKSxcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzOiBuZXcgTWFwKCksXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrczogbmV3IE1hcCgpLFxuICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IDAsXG4gICAgICAgICAgICAgICAgICAgIGZwczogMzAsXG4gICAgICAgICAgICAgICAgICAgIGZyYW1lczogMFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPHtcblx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRhdHRyWDogYm9vbGVhbjtcblx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0YXR0clo6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRjb250YWluZXJCb25lSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXI7XG5cdFx0XHRcdFx0fT59XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbkN1cnZlTm9kZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIHJhd05vZGVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggbm9kZUlELm1hdGNoKCAvXFxkKy8gKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbk5vZGUgPSBwYXJzZUFuaW1hdGlvbk5vZGUoIEZCWFRyZWUsIHJhd05vZGVzWyBub2RlSUQgXSwgY29ubmVjdGlvbnMsIHNjZW5lR3JhcGggKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkN1cnZlTm9kZXMucHVzaCggYW5pbWF0aW9uTm9kZSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEB0eXBlIHtNYXAuPG51bWJlciwge1xuXHRcdFx0XHRcdFx0aWQ6IG51bWJlcixcblx0XHRcdFx0XHRcdGF0dHI6IHN0cmluZyxcblx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdGF0dHJYOiBib29sZWFuLFxuXHRcdFx0XHRcdFx0YXR0clk6IGJvb2xlYW4sXG5cdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbixcblx0XHRcdFx0XHRcdGNvbnRhaW5lckJvbmVJRDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0Y29udGFpbmVySUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHR4OiB7XG5cdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55LFxuXHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnksXG5cdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0ejoge1xuXHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueSxcblx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fT59XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdmFyIHRtcE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgYW5pbWF0aW9uQ3VydmVOb2RlSW5kZXggPSAwOyBhbmltYXRpb25DdXJ2ZU5vZGVJbmRleCA8IGFuaW1hdGlvbkN1cnZlTm9kZXMubGVuZ3RoOyArKyBhbmltYXRpb25DdXJ2ZU5vZGVJbmRleCApIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIGFuaW1hdGlvbkN1cnZlTm9kZXNbIGFuaW1hdGlvbkN1cnZlTm9kZUluZGV4IF0gPT09IG51bGwgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdG1wTWFwLnNldCggYW5pbWF0aW9uQ3VydmVOb2Rlc1sgYW5pbWF0aW9uQ3VydmVOb2RlSW5kZXggXS5pZCwgYW5pbWF0aW9uQ3VydmVOb2Rlc1sgYW5pbWF0aW9uQ3VydmVOb2RlSW5kZXggXSApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBAdHlwZSB7e1xuXHRcdFx0XHRcdFx0dmVyc2lvbjogYW55LFxuXHRcdFx0XHRcdFx0aWQ6IG51bWJlcixcblx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW10sXG5cdFx0XHRcdFx0fVtdfVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb25DdXJ2ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKCBub2RlSUQgaW4gcmF3Q3VydmVzICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggbm9kZUlELm1hdGNoKCAvXFxkKy8gKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbkN1cnZlID0gcGFyc2VBbmltYXRpb25DdXJ2ZSggcmF3Q3VydmVzWyBub2RlSUQgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uQ3VydmVzLnB1c2goIGFuaW1hdGlvbkN1cnZlICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdFBhcmVudENvbm4gPSBjb25uZWN0aW9ucy5nZXQoIGFuaW1hdGlvbkN1cnZlLmlkICkucGFyZW50c1sgMCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0UGFyZW50SUQgPSBmaXJzdFBhcmVudENvbm4uSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3RQYXJlbnRSZWxhdGlvbnNoaXAgPSBmaXJzdFBhcmVudENvbm4ucmVsYXRpb25zaGlwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF4aXMgPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBmaXJzdFBhcmVudFJlbGF0aW9uc2hpcC5tYXRjaCggL1gvICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzID0gJ3gnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBmaXJzdFBhcmVudFJlbGF0aW9uc2hpcC5tYXRjaCggL1kvICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzID0gJ3knO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBmaXJzdFBhcmVudFJlbGF0aW9uc2hpcC5tYXRjaCggL1ovICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGlzID0gJ3onO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wTWFwLmdldCggZmlyc3RQYXJlbnRJRCApLmN1cnZlc1sgYXhpcyBdID0gYW5pbWF0aW9uQ3VydmU7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdG1wTWFwLmZvckVhY2goIGZ1bmN0aW9uICggY3VydmVOb2RlICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGN1cnZlTm9kZS5jb250YWluZXJCb25lSUQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICggISByZXR1cm5PYmplY3QuY3VydmVzLmhhcyggaWQgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuT2JqZWN0LmN1cnZlcy5zZXQoIGlkLCB7IFQ6IG51bGwsIFI6IG51bGwsIFM6IG51bGwgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuT2JqZWN0LmN1cnZlcy5nZXQoIGlkIClbIGN1cnZlTm9kZS5hdHRyIF0gPSBjdXJ2ZU5vZGU7XG5cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIHJhd0xheWVycyApIHtcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQHR5cGUge3tcblx0XHRcdFx0XHQgXHRUOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGF0dHI6IHN0cmluZztcblx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRhdHRyWDogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0YXR0clk6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGF0dHJaOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRjb250YWluZXJCb25lSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0Y29udGFpbmVySUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0Y3VydmVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0eDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR5OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdHo6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0Ujoge1xuXHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0YXR0clg6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0Y29udGFpbmVyQm9uZUlEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHRcdHg6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0eToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR6OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFM6IHtcblx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0YXR0cjogc3RyaW5nO1xuXHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGF0dHJYOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRhdHRyWTogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0YXR0clo6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lckJvbmVJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRjb250YWluZXJJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRjdXJ2ZXM6IHtcblx0XHRcdFx0XHRcdFx0XHR4OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0ejoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1bXX1cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXllciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBjb25uZWN0aW9ucy5nZXQoIHBhcnNlSW50KCBub2RlSUQgKSApLmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgY2hpbGRJbmRleCA9IDA7IGNoaWxkSW5kZXggPCBjaGlsZHJlbi5sZW5ndGg7IGNoaWxkSW5kZXggKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNraXAgbG9ja0luZmx1ZW5jZVdlaWdodHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdG1wTWFwLmhhcyggY2hpbGRyZW5bIGNoaWxkSW5kZXggXS5JRCApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnZlTm9kZSA9IHRtcE1hcC5nZXQoIGNoaWxkcmVuWyBjaGlsZEluZGV4IF0uSUQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUlEID0gY3VydmVOb2RlLmNvbnRhaW5lckJvbmVJRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGxheWVyWyBib25lSUQgXSA9PT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyWyBib25lSUQgXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUzogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJbIGJvbmVJRCBdWyBjdXJ2ZU5vZGUuYXR0ciBdID0gY3VydmVOb2RlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybk9iamVjdC5sYXllcnMuc2V0KCBwYXJzZUludCggbm9kZUlEICksIGxheWVyICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgbm9kZUlEIGluIHJhd1N0YWNrcyApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbGF5ZXJzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IGNvbm5lY3Rpb25zLmdldCggcGFyc2VJbnQoIG5vZGVJRCApICkuY2hpbGRyZW47XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhUaW1lU3RhbXAgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWluVGltZVN0YW1wID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGNoaWxkSW5kZXggPSAwOyBjaGlsZEluZGV4IDwgY2hpbGRyZW4ubGVuZ3RoOyArKyBjaGlsZEluZGV4ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHJldHVybk9iamVjdC5sYXllcnMuaGFzKCBjaGlsZHJlblsgY2hpbGRJbmRleCBdLklEICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudExheWVyID0gcmV0dXJuT2JqZWN0LmxheWVycy5nZXQoIGNoaWxkcmVuWyBjaGlsZEluZGV4IF0uSUQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllcnMucHVzaCggY3VycmVudExheWVyICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50TGF5ZXIuZm9yRWFjaCggZnVuY3Rpb24gKCBsYXllciApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGxheWVyICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDdXJ2ZU5vZGVNYXhNaW5UaW1lU3RhbXBzKCBsYXllciApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2V0cyB0aGUgbWF4VGltZVN0YW1wIGFuZCBtaW5UaW1lU3RhbXAgdmFyaWFibGVzIGlmIGl0IGhhcyB0aW1lU3RhbXBzIHRoYXQgYXJlIGVpdGhlciBsYXJnZXIgb3Igc21hbGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB0aGFuIHRoZSBtYXggb3IgbWluIHJlc3BlY3RpdmVseS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHt7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0VDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmcsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0clg6IGJvb2xlYW4sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyQm9uZUlEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0eDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR6OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ujoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmcsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0clg6IGJvb2xlYW4sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyQm9uZUlEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0eDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR6OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Uzoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmcsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0clg6IGJvb2xlYW4sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyQm9uZUlEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0eDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR6OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR9fSBsYXllclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q3VydmVOb2RlTWF4TWluVGltZVN0YW1wcyggbGF5ZXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2V0cyB0aGUgbWF4VGltZVN0YW1wIGFuZCBtaW5UaW1lU3RhbXAgaWYgb25lIG9mIHRoZSBjdXJ2ZSdzIHRpbWUgc3RhbXBzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBleGNlZWRzIHRoZSBtYXhpbXVtIG9yIG1pbmltdW0uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3tcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHg6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR5OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ejoge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9fSBjdXJ2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRDdXJ2ZU1heE1pblRpbWVTdGFtcCggY3VydmUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTZXRzIHRoZSBtYXhUaW1lU3RhbXAgYW5kIG1pblRpbWVTdGFtcCBpZiBvbmUgb2YgaXRzIHRpbWVzdGFtcHMgZXhjZWVkcyB0aGUgbWF4aW11bSBvciBtaW5pbXVtLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7e3RpbWVzOiBudW1iZXJbXX19IGF4aXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRDdXJ2ZUF4aXNNYXhNaW5UaW1lU3RhbXBzKCBheGlzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFRpbWVTdGFtcCA9IGF4aXMudGltZXNbIGF4aXMudGltZXMubGVuZ3RoIC0gMSBdID4gbWF4VGltZVN0YW1wID8gYXhpcy50aW1lc1sgYXhpcy50aW1lcy5sZW5ndGggLSAxIF0gOiBtYXhUaW1lU3RhbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblRpbWVTdGFtcCA9IGF4aXMudGltZXNbIDAgXSA8IG1pblRpbWVTdGFtcCA/IGF4aXMudGltZXNbIDAgXSA6IG1pblRpbWVTdGFtcDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY3VydmUueCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDdXJ2ZUF4aXNNYXhNaW5UaW1lU3RhbXBzKCBjdXJ2ZS54ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJ2ZS55ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEN1cnZlQXhpc01heE1pblRpbWVTdGFtcHMoIGN1cnZlLnkgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1cnZlLnogKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q3VydmVBeGlzTWF4TWluVGltZVN0YW1wcyggY3VydmUueiApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbGF5ZXIuUiApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEN1cnZlTWF4TWluVGltZVN0YW1wKCBsYXllci5SLmN1cnZlcyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGxheWVyLlMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRDdXJ2ZU1heE1pblRpbWVTdGFtcCggbGF5ZXIuUy5jdXJ2ZXMgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBsYXllci5UICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0Q3VydmVNYXhNaW5UaW1lU3RhbXAoIGxheWVyLlQuY3VydmVzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gd2UgaGF2ZSBhbiBhbmltYXRpb24gY2xpcCB3aXRoIGFjdHVhbCBsZW5ndGg/XG4gICAgICAgICAgICAgICAgICAgIGlmICggbWF4VGltZVN0YW1wID4gbWluVGltZVN0YW1wICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5PYmplY3Quc3RhY2tzLnNldCggcGFyc2VJbnQoIG5vZGVJRCApLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcmF3U3RhY2tzWyBub2RlSUQgXS5hdHRyTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllcnM6IGxheWVycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGg6IG1heFRpbWVTdGFtcCAtIG1pblRpbWVTdGFtcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZXM6ICggbWF4VGltZVN0YW1wIC0gbWluVGltZVN0YW1wICkgKiAzMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiByZXR1cm5PYmplY3Q7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gRkJYVHJlZVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7e2lkOiBudW1iZXIsIGF0dHJOYW1lOiBzdHJpbmcsIHByb3BlcnRpZXM6IE9iamVjdDxzdHJpbmcsIGFueT59fSBhbmltYXRpb25DdXJ2ZU5vZGVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge01hcDxudW1iZXIsIHtwYXJlbnRzOiB7SUQ6IG51bWJlciwgcmVsYXRpb25zaGlwOiBzdHJpbmd9W10sIGNoaWxkcmVuOiB7SUQ6IG51bWJlciwgcmVsYXRpb25zaGlwOiBzdHJpbmd9W119Pn0gY29ubmVjdGlvbnNcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3tza2VsZXRvbjoge2JvbmVzOiB7RkJYX0lEOiBudW1iZXJ9W119fX0gc2NlbmVHcmFwaFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlQW5pbWF0aW9uTm9kZSggRkJYVHJlZSwgYW5pbWF0aW9uQ3VydmVOb2RlLCBjb25uZWN0aW9ucywgc2NlbmVHcmFwaCApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogYW5pbWF0aW9uQ3VydmVOb2RlLmlkLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6IGFuaW1hdGlvbkN1cnZlTm9kZS5hdHRyTmFtZSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbElEOiBhbmltYXRpb25DdXJ2ZU5vZGUuaWQsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJYOiBmYWxzZSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0clk6IGZhbHNlLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyWjogZmFsc2UsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyQm9uZUlEOiAtIDEsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySUQ6IC0gMSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgY3VydmVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHo6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIHJldHVybk9iamVjdC5hdHRyLm1hdGNoKCAvU3xSfFQvICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBhdHRyaWJ1dGVLZXkgaW4gYW5pbWF0aW9uQ3VydmVOb2RlLnByb3BlcnRpZXMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGF0dHJpYnV0ZUtleS5tYXRjaCggL1gvICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuT2JqZWN0LmF0dHJYID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGF0dHJpYnV0ZUtleS5tYXRjaCggL1kvICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuT2JqZWN0LmF0dHJZID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGF0dHJpYnV0ZUtleS5tYXRjaCggL1ovICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuT2JqZWN0LmF0dHJaID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgY29ubnMgPSBjb25uZWN0aW9ucy5nZXQoIHJldHVybk9iamVjdC5pZCApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVySW5kaWNlcyA9IGNvbm5zLnBhcmVudHM7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGNvbnRhaW5lckluZGljZXNJbmRleCA9IGNvbnRhaW5lckluZGljZXMubGVuZ3RoIC0gMTsgY29udGFpbmVySW5kaWNlc0luZGV4ID49IDA7IC0tIGNvbnRhaW5lckluZGljZXNJbmRleCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJRCA9IHNjZW5lR3JhcGguc2tlbGV0b24uYm9uZXMuZmluZEluZGV4KCBmdW5jdGlvbiAoIGJvbmUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYm9uZS5GQlhfSUQgPT09IGNvbnRhaW5lckluZGljZXNbIGNvbnRhaW5lckluZGljZXNJbmRleCBdLklEO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGJvbmVJRCA+IC0gMSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybk9iamVjdC5jb250YWluZXJCb25lSUQgPSBib25lSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuT2JqZWN0LmNvbnRhaW5lcklEID0gY29udGFpbmVySW5kaWNlc1sgY29udGFpbmVySW5kaWNlc0luZGV4IF0uSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldHVybk9iamVjdDtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7e2lkOiBudW1iZXIsIHN1Yk5vZGVzOiB7S2V5VGltZToge3Byb3BlcnRpZXM6IHthOiBzdHJpbmd9fSwgS2V5VmFsdWVGbG9hdDoge3Byb3BlcnRpZXM6IHthOiBzdHJpbmd9fSwgS2V5QXR0ckZsYWdzOiB7cHJvcGVydGllczoge2E6IHN0cmluZ319LCBLZXlBdHRyRGF0YUZsb2F0OiB7cHJvcGVydGllczoge2E6IHN0cmluZ319fX19IGFuaW1hdGlvbkN1cnZlXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VBbmltYXRpb25DdXJ2ZSggYW5pbWF0aW9uQ3VydmUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb246IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogYW5pbWF0aW9uQ3VydmUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbElEOiBhbmltYXRpb25DdXJ2ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzOiBwYXJzZUZsb2F0QXJyYXkoIGFuaW1hdGlvbkN1cnZlLnN1Yk5vZGVzLktleVRpbWUucHJvcGVydGllcy5hICkubWFwKCBmdW5jdGlvbiAoIHRpbWUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ29udmVydEZCWFRpbWVUb1NlY29uZHMoIHRpbWUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBwYXJzZUZsb2F0QXJyYXkoIGFuaW1hdGlvbkN1cnZlLnN1Yk5vZGVzLktleVZhbHVlRmxvYXQucHJvcGVydGllcy5hICksXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJGbGFnOiBwYXJzZUludEFycmF5KCBhbmltYXRpb25DdXJ2ZS5zdWJOb2Rlcy5LZXlBdHRyRmxhZ3MucHJvcGVydGllcy5hICksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyRGF0YTogcGFyc2VGbG9hdEFycmF5KCBhbmltYXRpb25DdXJ2ZS5zdWJOb2Rlcy5LZXlBdHRyRGF0YUZsb2F0LnByb3BlcnRpZXMuYSApXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3tcblx0XHRcdFx0Y3VydmVzOiBNYXA8bnVtYmVyLCB7XG5cdFx0XHRcdFx0VDoge1xuXHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdGF0dHI6IHN0cmluZztcblx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdGF0dHJYOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0YXR0clk6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbjtcblx0XHRcdFx0XHRcdGNvbnRhaW5lckJvbmVJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0Y29udGFpbmVySUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHR4OiB7XG5cdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0ejoge1xuXHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFI6IHtcblx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRhdHRyWDogYm9vbGVhbjtcblx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0YXR0clo6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRjb250YWluZXJCb25lSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRjdXJ2ZXM6IHtcblx0XHRcdFx0XHRcdFx0eDoge1xuXHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR5OiB7XG5cdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdHo6IHtcblx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRTOiB7XG5cdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0YXR0cjogc3RyaW5nO1xuXHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0YXR0clg6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRhdHRyWTogYm9vbGVhbjtcblx0XHRcdFx0XHRcdGF0dHJaOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0Y29udGFpbmVyQm9uZUlEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRjb250YWluZXJJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0Y3VydmVzOiB7XG5cdFx0XHRcdFx0XHRcdHg6IHtcblx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0eToge1xuXHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR6OiB7XG5cdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0+O1xuXHRcdFx0XHRsYXllcnM6IE1hcDxudW1iZXIsIHtcblx0XHRcdFx0XHRUOiB7XG5cdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0YXR0cjogc3RyaW5nO1xuXHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0YXR0clg6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRhdHRyWTogYm9vbGVhbjtcblx0XHRcdFx0XHRcdGF0dHJaOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0Y29udGFpbmVyQm9uZUlEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRjb250YWluZXJJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0Y3VydmVzOiB7XG5cdFx0XHRcdFx0XHRcdHg6IHtcblx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0eToge1xuXHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR6OiB7XG5cdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Ujoge1xuXHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdGF0dHI6IHN0cmluZztcblx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdGF0dHJYOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0YXR0clk6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbjtcblx0XHRcdFx0XHRcdGNvbnRhaW5lckJvbmVJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0Y29udGFpbmVySUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHR4OiB7XG5cdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0ejoge1xuXHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFM6IHtcblx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRhdHRyWDogYm9vbGVhbjtcblx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0YXR0clo6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRjb250YWluZXJCb25lSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRjdXJ2ZXM6IHtcblx0XHRcdFx0XHRcdFx0eDoge1xuXHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR5OiB7XG5cdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdHo6IHtcblx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVtdPjtcblx0XHRcdFx0c3RhY2tzOiBNYXA8bnVtYmVyLCB7XG5cdFx0XHRcdFx0bmFtZTogc3RyaW5nO1xuXHRcdFx0XHRcdGxheWVyczoge1xuXHRcdFx0XHRcdFx0VDoge1xuXHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRhdHRyOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0YXR0clg6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGF0dHJZOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRhdHRyWjogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0Y29udGFpbmVyQm9uZUlEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lcklEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGN1cnZlczoge1xuXHRcdFx0XHRcdFx0XHRcdHg6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0eToge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR6OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFI6IHtcblx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0YXR0cjogc3RyaW5nO1xuXHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGF0dHJYOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRhdHRyWTogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0YXR0clo6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lckJvbmVJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRjb250YWluZXJJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRjdXJ2ZXM6IHtcblx0XHRcdFx0XHRcdFx0XHR4OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdHk6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0ejoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRTOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdGF0dHI6IHN0cmluZztcblx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRhdHRyWDogYm9vbGVhbjtcblx0XHRcdFx0XHRcdFx0YXR0clk6IGJvb2xlYW47XG5cdFx0XHRcdFx0XHRcdGF0dHJaOiBib29sZWFuO1xuXHRcdFx0XHRcdFx0XHRjb250YWluZXJCb25lSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0Y29udGFpbmVySUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0Y3VydmVzOiB7XG5cdFx0XHRcdFx0XHRcdFx0eDoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmVyc2lvbjogYW55O1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdGludGVybmFsSUQ6IG51bWJlcjtcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRmxhZzogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHRhdHRyRGF0YTogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHR5OiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBhbnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0aW50ZXJuYWxJRDogbnVtYmVyO1xuXHRcdFx0XHRcdFx0XHRcdFx0dGltZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWVzOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJGbGFnOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHJEYXRhOiBudW1iZXJbXTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdHo6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHZlcnNpb246IGFueTtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnRlcm5hbElEOiBudW1iZXI7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lczogbnVtYmVyW107XG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZXM6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckZsYWc6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YXR0ckRhdGE6IG51bWJlcltdO1xuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1bXVtdO1xuXHRcdFx0XHRcdGxlbmd0aDogbnVtYmVyO1xuXHRcdFx0XHRcdGZyYW1lczogbnVtYmVyO1xuXHRcdFx0XHR9Pjtcblx0XHRcdFx0bGVuZ3RoOiBudW1iZXI7XG5cdFx0XHRcdGZwczogbnVtYmVyO1xuXHRcdFx0XHRmcmFtZXM6IG51bWJlcjtcblx0XHRcdH19IGFuaW1hdGlvbnMsXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3tza2VsZXRvbjogeyBib25lczogVEhSRUUuQm9uZVtdfX19IGdyb3VwXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZEFuaW1hdGlvbnMoIGdyb3VwLCBhbmltYXRpb25zICkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCBncm91cC5hbmltYXRpb25zID09PSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuYW5pbWF0aW9ucyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9ucy5zdGFja3MuZm9yRWFjaCggZnVuY3Rpb24gKCBzdGFjayApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHN0YWNrLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcHM6IDMwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiBzdGFjay5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWVyYXJjaHk6IFtdXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVzID0gZ3JvdXAuc2tlbGV0b24uYm9uZXM7XG5cbiAgICAgICAgICAgICAgICAgICAgYm9uZXMuZm9yRWFjaCggZnVuY3Rpb24gKCBib25lICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGJvbmUubmFtZS5yZXBsYWNlKCAvLio6LywgJycgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRJbmRleCA9IGJvbmVzLmZpbmRJbmRleCggZnVuY3Rpb24gKCBwYXJlbnRCb25lICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvbmUucGFyZW50ID09PSBwYXJlbnRCb25lO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25EYXRhLmhpZXJhcmNoeS5wdXNoKCB7IHBhcmVudDogcGFyZW50SW5kZXgsIG5hbWU6IG5hbWUsIGtleXM6IFtdIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGZyYW1lID0gMDsgZnJhbWUgPCBzdGFjay5mcmFtZXM7IGZyYW1lICsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBib25lcy5mb3JFYWNoKCBmdW5jdGlvbiAoIGJvbmUsIGJvbmVJbmRleCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb25Ob2RlID0gc3RhY2subGF5ZXJzWyAwIF1bIGJvbmVJbmRleCBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uRGF0YS5oaWVyYXJjaHkuZm9yRWFjaCggZnVuY3Rpb24gKCBub2RlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbm9kZS5uYW1lID09PSBib25lLm5hbWUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUua2V5cy5wdXNoKCBnZW5lcmF0ZUtleSggYW5pbWF0aW9uTm9kZSwgYm9uZSwgZnJhbWUgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBncm91cC5hbmltYXRpb25zLnB1c2goIFRIUkVFLkFuaW1hdGlvbkNsaXAucGFyc2VBbmltYXRpb24oIGFuaW1hdGlvbkRhdGEsIGJvbmVzICkgKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1RIUkVFLkJvbmV9IGJvbmVcbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlS2V5KCBhbmltYXRpb25Ob2RlLCBib25lLCBmcmFtZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBmcmFtZSAvIGFuaW1hdGlvbnMuZnBzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvczogYm9uZS5wb3NpdGlvbi50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm90OiBib25lLnF1YXRlcm5pb24udG9BcnJheSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjbDogYm9uZS5zY2FsZS50b0FycmF5KClcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYW5pbWF0aW9uTm9kZSA9PT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBoYXNDdXJ2ZSggYW5pbWF0aW9uTm9kZSwgJ1QnICkgJiYgaGFzS2V5T25GcmFtZSggYW5pbWF0aW9uTm9kZS5ULCBmcmFtZSApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleS5wb3MgPSBbIGFuaW1hdGlvbk5vZGUuVC5jdXJ2ZXMueC52YWx1ZXNbIGZyYW1lIF0sIGFuaW1hdGlvbk5vZGUuVC5jdXJ2ZXMueS52YWx1ZXNbIGZyYW1lIF0sIGFuaW1hdGlvbk5vZGUuVC5jdXJ2ZXMuei52YWx1ZXNbIGZyYW1lIF0gXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaGFzQ3VydmUoIGFuaW1hdGlvbk5vZGUsICdSJyApICYmIGhhc0tleU9uRnJhbWUoIGFuaW1hdGlvbk5vZGUuUiwgZnJhbWUgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRpb25YID0gZGVncmVlVG9SYWRpYW4oIGFuaW1hdGlvbk5vZGUuUi5jdXJ2ZXMueC52YWx1ZXNbIGZyYW1lIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvdGF0aW9uWSA9IGRlZ3JlZVRvUmFkaWFuKCBhbmltYXRpb25Ob2RlLlIuY3VydmVzLnkudmFsdWVzWyBmcmFtZSBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb3RhdGlvblogPSBkZWdyZWVUb1JhZGlhbiggYW5pbWF0aW9uTm9kZS5SLmN1cnZlcy56LnZhbHVlc1sgZnJhbWUgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXVsZXIgPSBuZXcgVEhSRUUuRXVsZXIoIHJvdGF0aW9uWCwgcm90YXRpb25ZLCByb3RhdGlvblosICdaWVgnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleS5yb3QgPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpLnNldEZyb21FdWxlciggZXVsZXIgKS50b0FycmF5KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGhhc0N1cnZlKCBhbmltYXRpb25Ob2RlLCAnUycgKSAmJiBoYXNLZXlPbkZyYW1lKCBhbmltYXRpb25Ob2RlLlMsIGZyYW1lICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LnNjbCA9IFsgYW5pbWF0aW9uTm9kZS5TLmN1cnZlcy54LnZhbHVlc1sgZnJhbWUgXSwgYW5pbWF0aW9uTm9kZS5TLmN1cnZlcy55LnZhbHVlc1sgZnJhbWUgXSwgYW5pbWF0aW9uTm9kZS5TLmN1cnZlcy56LnZhbHVlc1sgZnJhbWUgXSBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICggZXJyb3IgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDdXJ2ZSBpcyBub3QgZnVsbHkgcGxvdHRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggYm9uZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCBlcnJvciApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhc0N1cnZlKCBhbmltYXRpb25Ob2RlLCBhdHRyaWJ1dGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGFuaW1hdGlvbk5vZGUgPT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlTm9kZSA9IGFuaW1hdGlvbk5vZGVbIGF0dHJpYnV0ZSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggISBhdHRyaWJ1dGVOb2RlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbICd4JywgJ3knLCAneicgXS5ldmVyeSggZnVuY3Rpb24gKCBrZXkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZU5vZGUuY3VydmVzWyBrZXkgXSAhPT0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhhc0tleU9uRnJhbWUoIGF0dHJpYnV0ZU5vZGUsIGZyYW1lICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgJ3gnLCAneScsICd6JyBdLmV2ZXJ5KCBmdW5jdGlvbiAoIGtleSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNLZXlFeGlzdE9uRnJhbWUoIGF0dHJpYnV0ZU5vZGUuY3VydmVzWyBrZXkgXSwgZnJhbWUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBpc0tleUV4aXN0T25GcmFtZSggY3VydmUsIGZyYW1lICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VydmUudmFsdWVzWyBmcmFtZSBdICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICAvLyBVVElMU1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBQYXJzZXMgVmVjdG9yMyBwcm9wZXJ0eSBmcm9tIEZCWFRyZWUuICBQcm9wZXJ0eSBpcyBnaXZlbiBhcyAudmFsdWUueCwgLnZhbHVlLnksIGV0Yy5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7RkJYVmVjdG9yM30gcHJvcGVydHkgLSBQcm9wZXJ0eSB0byBwYXJzZSBhcyBWZWN0b3IzLlxuICAgICAgICAgICAgICogQHJldHVybnMge1RIUkVFLlZlY3RvcjN9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlVmVjdG9yMyggcHJvcGVydHkgKSB7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoIHBhcnNlRmxvYXQoIHByb3BlcnR5LnZhbHVlLnggKSwgcGFyc2VGbG9hdCggcHJvcGVydHkudmFsdWUueSApLCBwYXJzZUZsb2F0KCBwcm9wZXJ0eS52YWx1ZS56ICkgKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFBhcnNlcyBDb2xvciBwcm9wZXJ0eSBmcm9tIEZCWFRyZWUuICBQcm9wZXJ0eSBpcyBnaXZlbiBhcyAudmFsdWUueCwgLnZhbHVlLnksIGV0Yy5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7RkJYVmVjdG9yM30gcHJvcGVydHkgLSBQcm9wZXJ0eSB0byBwYXJzZSBhcyBDb2xvci5cbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtUSFJFRS5Db2xvcn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gcGFyc2VDb2xvciggcHJvcGVydHkgKSB7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRIUkVFLkNvbG9yKCkuZnJvbUFycmF5KCBwYXJzZVZlY3RvcjMoIHByb3BlcnR5ICkudG9BcnJheSgpICk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9ICk7XG5cbiAgICAvKipcbiAgICAgKiBBbiBpbnN0YW5jZSBvZiBhIFZlcnRleCB3aXRoIGRhdGEgZm9yIGRyYXdpbmcgdmVydGljZXMgdG8gdGhlIHNjcmVlbi5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBWZXJ0ZXgoKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvc2l0aW9uIG9mIHRoZSB2ZXJ0ZXguXG4gICAgICAgICAqIEB0eXBlIHtUSFJFRS5WZWN0b3IzfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCApO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBOb3JtYWwgb2YgdGhlIHZlcnRleFxuICAgICAgICAgKiBAdHlwZSB7VEhSRUUuVmVjdG9yM31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9ybWFsID0gbmV3IFRIUkVFLlZlY3RvcjMoICk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVWIGNvb3JkaW5hdGVzIG9mIHRoZSB2ZXJ0ZXguXG4gICAgICAgICAqIEB0eXBlIHtUSFJFRS5WZWN0b3IyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51diA9IG5ldyBUSFJFRS5WZWN0b3IyKCApO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2VzIG9mIHRoZSBib25lcyB2ZXJ0ZXggaXMgaW5mbHVlbmNlZCBieS5cbiAgICAgICAgICogQHR5cGUge1RIUkVFLlZlY3RvcjR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNraW5JbmRpY2VzID0gbmV3IFRIUkVFLlZlY3RvcjQoIDAsIDAsIDAsIDAgKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2VpZ2h0cyB0aGF0IGVhY2ggYm9uZSBpbmZsdWVuY2VzIHRoZSB2ZXJ0ZXguXG4gICAgICAgICAqIEB0eXBlIHtUSFJFRS5WZWN0b3I0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5za2luV2VpZ2h0cyA9IG5ldyBUSFJFRS5WZWN0b3I0KCAwLCAwLCAwLCAwICk7XG5cbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKCBWZXJ0ZXgucHJvdG90eXBlLCB7XG5cbiAgICAgICAgY29weTogZnVuY3Rpb24gKCB0YXJnZXQgKSB7XG5cbiAgICAgICAgICAgIHZhciByZXR1cm5WYXIgPSB0YXJnZXQgfHwgbmV3IFZlcnRleCgpO1xuXG4gICAgICAgICAgICByZXR1cm5WYXIucG9zaXRpb24uY29weSggdGhpcy5wb3NpdGlvbiApO1xuICAgICAgICAgICAgcmV0dXJuVmFyLm5vcm1hbC5jb3B5KCB0aGlzLm5vcm1hbCApO1xuICAgICAgICAgICAgcmV0dXJuVmFyLnV2LmNvcHkoIHRoaXMudXYgKTtcbiAgICAgICAgICAgIHJldHVyblZhci5za2luSW5kaWNlcy5jb3B5KCB0aGlzLnNraW5JbmRpY2VzICk7XG4gICAgICAgICAgICByZXR1cm5WYXIuc2tpbldlaWdodHMuY29weSggdGhpcy5za2luV2VpZ2h0cyApO1xuXG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFyO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgZmxhdHRlblRvQnVmZmVyczogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgdmVydGV4QnVmZmVyID0gdGhpcy5wb3NpdGlvbi50b0FycmF5KCk7XG4gICAgICAgICAgICB2YXIgbm9ybWFsQnVmZmVyID0gdGhpcy5ub3JtYWwudG9BcnJheSgpO1xuICAgICAgICAgICAgdmFyIHV2QnVmZmVyID0gdGhpcy51di50b0FycmF5KCk7XG4gICAgICAgICAgICB2YXIgc2tpbkluZGV4QnVmZmVyID0gdGhpcy5za2luSW5kaWNlcy50b0FycmF5KCk7XG4gICAgICAgICAgICB2YXIgc2tpbldlaWdodEJ1ZmZlciA9IHRoaXMuc2tpbldlaWdodHMudG9BcnJheSgpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZlcnRleEJ1ZmZlcjogdmVydGV4QnVmZmVyLFxuICAgICAgICAgICAgICAgIG5vcm1hbEJ1ZmZlcjogbm9ybWFsQnVmZmVyLFxuICAgICAgICAgICAgICAgIHV2QnVmZmVyOiB1dkJ1ZmZlcixcbiAgICAgICAgICAgICAgICBza2luSW5kZXhCdWZmZXI6IHNraW5JbmRleEJ1ZmZlcixcbiAgICAgICAgICAgICAgICBza2luV2VpZ2h0QnVmZmVyOiBza2luV2VpZ2h0QnVmZmVyLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9XG5cbiAgICB9ICk7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmlhbmdsZSgpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3twb3NpdGlvbjogVEhSRUUuVmVjdG9yMywgbm9ybWFsOiBUSFJFRS5WZWN0b3IzLCB1djogVEhSRUUuVmVjdG9yMiwgc2tpbkluZGljZXM6IFRIUkVFLlZlY3RvcjQsIHNraW5XZWlnaHRzOiBUSFJFRS5WZWN0b3I0fVtdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IFsgXTtcblxuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24oIFRyaWFuZ2xlLnByb3RvdHlwZSwge1xuXG4gICAgICAgIGNvcHk6IGZ1bmN0aW9uICggdGFyZ2V0ICkge1xuXG4gICAgICAgICAgICB2YXIgcmV0dXJuVmFyID0gdGFyZ2V0IHx8IG5ldyBUcmlhbmdsZSgpO1xuXG4gICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgKysgaSApIHtcblxuICAgICAgICAgICAgICAgIHRoaXMudmVydGljZXNbIGkgXS5jb3B5KCByZXR1cm5WYXIudmVydGljZXNbIGkgXSApO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYXI7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBmbGF0dGVuVG9CdWZmZXJzOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciB2ZXJ0ZXhCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHZhciBub3JtYWxCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHZhciB1dkJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdmFyIHNraW5JbmRleEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdmFyIHNraW5XZWlnaHRCdWZmZXIgPSBbXTtcblxuICAgICAgICAgICAgdGhpcy52ZXJ0aWNlcy5mb3JFYWNoKCBmdW5jdGlvbiAoIHZlcnRleCApIHtcblxuICAgICAgICAgICAgICAgIHZhciBmbGF0VmVydGV4ID0gdmVydGV4LmZsYXR0ZW5Ub0J1ZmZlcnMoKTtcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXIgPSB2ZXJ0ZXhCdWZmZXIuY29uY2F0KCBmbGF0VmVydGV4LnZlcnRleEJ1ZmZlciApO1xuICAgICAgICAgICAgICAgIG5vcm1hbEJ1ZmZlciA9IG5vcm1hbEJ1ZmZlci5jb25jYXQoIGZsYXRWZXJ0ZXgubm9ybWFsQnVmZmVyICk7XG4gICAgICAgICAgICAgICAgdXZCdWZmZXIgPSB1dkJ1ZmZlci5jb25jYXQoIGZsYXRWZXJ0ZXgudXZCdWZmZXIgKTtcbiAgICAgICAgICAgICAgICBza2luSW5kZXhCdWZmZXIgPSBza2luSW5kZXhCdWZmZXIuY29uY2F0KCBmbGF0VmVydGV4LnNraW5JbmRleEJ1ZmZlciApO1xuICAgICAgICAgICAgICAgIHNraW5XZWlnaHRCdWZmZXIgPSBza2luV2VpZ2h0QnVmZmVyLmNvbmNhdCggZmxhdFZlcnRleC5za2luV2VpZ2h0QnVmZmVyICk7XG5cbiAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXI6IHZlcnRleEJ1ZmZlcixcbiAgICAgICAgICAgICAgICBub3JtYWxCdWZmZXI6IG5vcm1hbEJ1ZmZlcixcbiAgICAgICAgICAgICAgICB1dkJ1ZmZlcjogdXZCdWZmZXIsXG4gICAgICAgICAgICAgICAgc2tpbkluZGV4QnVmZmVyOiBza2luSW5kZXhCdWZmZXIsXG4gICAgICAgICAgICAgICAgc2tpbldlaWdodEJ1ZmZlcjogc2tpbldlaWdodEJ1ZmZlcixcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfVxuXG4gICAgfSApO1xuXG4gICAgLyoqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgZnVuY3Rpb24gRmFjZSgpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3t2ZXJ0aWNlczoge3Bvc2l0aW9uOiBUSFJFRS5WZWN0b3IzLCBub3JtYWw6IFRIUkVFLlZlY3RvcjMsIHV2OiBUSFJFRS5WZWN0b3IyLCBza2luSW5kaWNlczogVEhSRUUuVmVjdG9yNCwgc2tpbldlaWdodHM6IFRIUkVFLlZlY3RvcjR9W119W119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyaWFuZ2xlcyA9IFsgXTtcbiAgICAgICAgdGhpcy5tYXRlcmlhbEluZGV4ID0gMDtcblxuICAgIH1cblxuICAgIE9iamVjdC5hc3NpZ24oIEZhY2UucHJvdG90eXBlLCB7XG5cbiAgICAgICAgY29weTogZnVuY3Rpb24gKCB0YXJnZXQgKSB7XG5cbiAgICAgICAgICAgIHZhciByZXR1cm5WYXIgPSB0YXJnZXQgfHwgbmV3IEZhY2UoKTtcblxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgdGhpcy50cmlhbmdsZXMubGVuZ3RoOyArKyBpICkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy50cmlhbmdsZXNbIGkgXS5jb3B5KCByZXR1cm5WYXIudHJpYW5nbGVzWyBpIF0gKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm5WYXIubWF0ZXJpYWxJbmRleCA9IHRoaXMubWF0ZXJpYWxJbmRleDtcblxuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhcjtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGdlblRyaWFuZ2xlc0Zyb21WZXJ0aWNlczogZnVuY3Rpb24gKCB2ZXJ0ZXhBcnJheSApIHtcblxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAyOyBpIDwgdmVydGV4QXJyYXkubGVuZ3RoOyArKyBpICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHRyaWFuZ2xlID0gbmV3IFRyaWFuZ2xlKCk7XG4gICAgICAgICAgICAgICAgdHJpYW5nbGUudmVydGljZXNbIDAgXSA9IHZlcnRleEFycmF5WyAwIF07XG4gICAgICAgICAgICAgICAgdHJpYW5nbGUudmVydGljZXNbIDEgXSA9IHZlcnRleEFycmF5WyBpIC0gMSBdO1xuICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnZlcnRpY2VzWyAyIF0gPSB2ZXJ0ZXhBcnJheVsgaSBdO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpYW5nbGVzLnB1c2goIHRyaWFuZ2xlICk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIGZsYXR0ZW5Ub0J1ZmZlcnM6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIHZlcnRleEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdmFyIG5vcm1hbEJ1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdmFyIHV2QnVmZmVyID0gW107XG4gICAgICAgICAgICB2YXIgc2tpbkluZGV4QnVmZmVyID0gW107XG4gICAgICAgICAgICB2YXIgc2tpbldlaWdodEJ1ZmZlciA9IFtdO1xuXG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWxJbmRleEJ1ZmZlciA9IFtdO1xuXG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWxJbmRleCA9IHRoaXMubWF0ZXJpYWxJbmRleDtcblxuICAgICAgICAgICAgdGhpcy50cmlhbmdsZXMuZm9yRWFjaCggZnVuY3Rpb24gKCB0cmlhbmdsZSApIHtcblxuICAgICAgICAgICAgICAgIHZhciBmbGF0VHJpYW5nbGUgPSB0cmlhbmdsZS5mbGF0dGVuVG9CdWZmZXJzKCk7XG4gICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyID0gdmVydGV4QnVmZmVyLmNvbmNhdCggZmxhdFRyaWFuZ2xlLnZlcnRleEJ1ZmZlciApO1xuICAgICAgICAgICAgICAgIG5vcm1hbEJ1ZmZlciA9IG5vcm1hbEJ1ZmZlci5jb25jYXQoIGZsYXRUcmlhbmdsZS5ub3JtYWxCdWZmZXIgKTtcbiAgICAgICAgICAgICAgICB1dkJ1ZmZlciA9IHV2QnVmZmVyLmNvbmNhdCggZmxhdFRyaWFuZ2xlLnV2QnVmZmVyICk7XG4gICAgICAgICAgICAgICAgc2tpbkluZGV4QnVmZmVyID0gc2tpbkluZGV4QnVmZmVyLmNvbmNhdCggZmxhdFRyaWFuZ2xlLnNraW5JbmRleEJ1ZmZlciApO1xuICAgICAgICAgICAgICAgIHNraW5XZWlnaHRCdWZmZXIgPSBza2luV2VpZ2h0QnVmZmVyLmNvbmNhdCggZmxhdFRyaWFuZ2xlLnNraW5XZWlnaHRCdWZmZXIgKTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbEluZGV4QnVmZmVyID0gbWF0ZXJpYWxJbmRleEJ1ZmZlci5jb25jYXQoIFsgbWF0ZXJpYWxJbmRleCwgbWF0ZXJpYWxJbmRleCwgbWF0ZXJpYWxJbmRleCBdICk7XG5cbiAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXI6IHZlcnRleEJ1ZmZlcixcbiAgICAgICAgICAgICAgICBub3JtYWxCdWZmZXI6IG5vcm1hbEJ1ZmZlcixcbiAgICAgICAgICAgICAgICB1dkJ1ZmZlcjogdXZCdWZmZXIsXG4gICAgICAgICAgICAgICAgc2tpbkluZGV4QnVmZmVyOiBza2luSW5kZXhCdWZmZXIsXG4gICAgICAgICAgICAgICAgc2tpbldlaWdodEJ1ZmZlcjogc2tpbldlaWdodEJ1ZmZlcixcbiAgICAgICAgICAgICAgICBtYXRlcmlhbEluZGV4QnVmZmVyOiBtYXRlcmlhbEluZGV4QnVmZmVyXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cblxuICAgIH0gKTtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEdlb21ldHJ5KCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7e3RyaWFuZ2xlczoge3ZlcnRpY2VzOiB7cG9zaXRpb246IFRIUkVFLlZlY3RvcjMsIG5vcm1hbDogVEhSRUUuVmVjdG9yMywgdXY6IFRIUkVFLlZlY3RvcjIsIHNraW5JbmRpY2VzOiBUSFJFRS5WZWN0b3I0LCBza2luV2VpZ2h0czogVEhSRUUuVmVjdG9yNH1bXX1bXSwgbWF0ZXJpYWxJbmRleDogbnVtYmVyfVtdfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5mYWNlcyA9IFsgXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3t9fFRIUkVFLlNrZWxldG9ufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5za2VsZXRvbiA9IG51bGw7XG5cbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKCBHZW9tZXRyeS5wcm90b3R5cGUsIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHJldHVybnNcdHt7dmVydGV4QnVmZmVyOiBudW1iZXJbXSwgbm9ybWFsQnVmZmVyOiBudW1iZXJbXSwgdXZCdWZmZXI6IG51bWJlcltdLCBza2luSW5kZXhCdWZmZXI6IG51bWJlcltdLCBza2luV2VpZ2h0QnVmZmVyOiBudW1iZXJbXSwgbWF0ZXJpYWxJbmRleEJ1ZmZlcjogbnVtYmVyW119fVxuICAgICAgICAgKi9cbiAgICAgICAgZmxhdHRlblRvQnVmZmVyczogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgdmVydGV4QnVmZmVyID0gW107XG4gICAgICAgICAgICB2YXIgbm9ybWFsQnVmZmVyID0gW107XG4gICAgICAgICAgICB2YXIgdXZCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHZhciBza2luSW5kZXhCdWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHZhciBza2luV2VpZ2h0QnVmZmVyID0gW107XG5cbiAgICAgICAgICAgIHZhciBtYXRlcmlhbEluZGV4QnVmZmVyID0gW107XG5cbiAgICAgICAgICAgIHRoaXMuZmFjZXMuZm9yRWFjaCggZnVuY3Rpb24gKCBmYWNlICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGZsYXRGYWNlID0gZmFjZS5mbGF0dGVuVG9CdWZmZXJzKCk7XG4gICAgICAgICAgICAgICAgdmVydGV4QnVmZmVyID0gdmVydGV4QnVmZmVyLmNvbmNhdCggZmxhdEZhY2UudmVydGV4QnVmZmVyICk7XG4gICAgICAgICAgICAgICAgbm9ybWFsQnVmZmVyID0gbm9ybWFsQnVmZmVyLmNvbmNhdCggZmxhdEZhY2Uubm9ybWFsQnVmZmVyICk7XG4gICAgICAgICAgICAgICAgdXZCdWZmZXIgPSB1dkJ1ZmZlci5jb25jYXQoIGZsYXRGYWNlLnV2QnVmZmVyICk7XG4gICAgICAgICAgICAgICAgc2tpbkluZGV4QnVmZmVyID0gc2tpbkluZGV4QnVmZmVyLmNvbmNhdCggZmxhdEZhY2Uuc2tpbkluZGV4QnVmZmVyICk7XG4gICAgICAgICAgICAgICAgc2tpbldlaWdodEJ1ZmZlciA9IHNraW5XZWlnaHRCdWZmZXIuY29uY2F0KCBmbGF0RmFjZS5za2luV2VpZ2h0QnVmZmVyICk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxJbmRleEJ1ZmZlciA9IG1hdGVyaWFsSW5kZXhCdWZmZXIuY29uY2F0KCBmbGF0RmFjZS5tYXRlcmlhbEluZGV4QnVmZmVyICk7XG5cbiAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2ZXJ0ZXhCdWZmZXI6IHZlcnRleEJ1ZmZlcixcbiAgICAgICAgICAgICAgICBub3JtYWxCdWZmZXI6IG5vcm1hbEJ1ZmZlcixcbiAgICAgICAgICAgICAgICB1dkJ1ZmZlcjogdXZCdWZmZXIsXG4gICAgICAgICAgICAgICAgc2tpbkluZGV4QnVmZmVyOiBza2luSW5kZXhCdWZmZXIsXG4gICAgICAgICAgICAgICAgc2tpbldlaWdodEJ1ZmZlcjogc2tpbldlaWdodEJ1ZmZlcixcbiAgICAgICAgICAgICAgICBtYXRlcmlhbEluZGV4QnVmZmVyOiBtYXRlcmlhbEluZGV4QnVmZmVyXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cblxuICAgIH0gKTtcblxuICAgIGZ1bmN0aW9uIFRleHRQYXJzZXIoKSB7fVxuXG4gICAgT2JqZWN0LmFzc2lnbiggVGV4dFBhcnNlci5wcm90b3R5cGUsIHtcblxuICAgICAgICBnZXRQcmV2Tm9kZTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2tbIHRoaXMuY3VycmVudEluZGVudCAtIDIgXTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGdldEN1cnJlbnROb2RlOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFja1sgdGhpcy5jdXJyZW50SW5kZW50IC0gMSBdO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0Q3VycmVudFByb3A6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFByb3A7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBwdXNoU3RhY2s6IGZ1bmN0aW9uICggbm9kZSApIHtcblxuICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCggbm9kZSApO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZW50ICs9IDE7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBwb3BTdGFjazogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGVudCAtPSAxO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0Q3VycmVudFByb3A6IGZ1bmN0aW9uICggdmFsLCBuYW1lICkge1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQcm9wID0gdmFsO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UHJvcE5hbWUgPSBuYW1lO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLXBhcnNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICBwYXJzZTogZnVuY3Rpb24gKCB0ZXh0ICkge1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRlbnQgPSAwO1xuICAgICAgICAgICAgdGhpcy5hbGxOb2RlcyA9IG5ldyBGQlhUcmVlKCk7XG4gICAgICAgICAgICB0aGlzLm5vZGVTdGFjayA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UHJvcCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UHJvcE5hbWUgPSAnJztcblxuICAgICAgICAgICAgdmFyIHNwbGl0ID0gdGV4dC5zcGxpdCggXCJcXG5cIiApO1xuICAgICAgICAgICAgZm9yICggdmFyIGxpbmUgaW4gc3BsaXQgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgbCA9IHNwbGl0WyBsaW5lIF07XG5cbiAgICAgICAgICAgICAgICAvLyBzaG9ydCBjdXRcbiAgICAgICAgICAgICAgICBpZiAoIGwubWF0Y2goIC9eW1xcc1xcdF0qOy8gKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIH0gLy8gc2tpcCBjb21tZW50IGxpbmVcbiAgICAgICAgICAgICAgICBpZiAoIGwubWF0Y2goIC9eW1xcc1xcdF0qJC8gKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIH0gLy8gc2tpcCBlbXB0eSBsaW5lXG5cbiAgICAgICAgICAgICAgICAvLyBiZWdpbm5pbmcgb2Ygbm9kZVxuICAgICAgICAgICAgICAgIHZhciBiZWdpbm5pbmdPZk5vZGVFeHAgPSBuZXcgUmVnRXhwKCBcIl5cXFxcdHtcIiArIHRoaXMuY3VycmVudEluZGVudCArIFwifShcXFxcdyspOiguKil7XCIsICcnICk7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbC5tYXRjaCggYmVnaW5uaW5nT2ZOb2RlRXhwICk7XG4gICAgICAgICAgICAgICAgaWYgKCBtYXRjaCApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZU5hbWUgPSBtYXRjaFsgMSBdLnRyaW0oKS5yZXBsYWNlKCAvXlwiLywgJycgKS5yZXBsYWNlKCAvXCIkLywgXCJcIiApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZUF0dHJzID0gbWF0Y2hbIDIgXS5zcGxpdCggJywnICkubWFwKCBmdW5jdGlvbiAoIGVsZW1lbnQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnRyaW0oKS5yZXBsYWNlKCAvXlwiLywgJycgKS5yZXBsYWNlKCAvXCIkLywgJycgKTtcblxuICAgICAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZU5vZGVCZWdpbiggbCwgbm9kZU5hbWUsIG5vZGVBdHRycyB8fCBudWxsICk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gbm9kZSdzIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgdmFyIHByb3BFeHAgPSBuZXcgUmVnRXhwKCBcIl5cXFxcdHtcIiArICggdGhpcy5jdXJyZW50SW5kZW50ICkgKyBcIn0oXFxcXHcrKTpbXFxcXHNcXFxcdFxcXFxyXFxcXG5dKC4qKVwiICk7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbC5tYXRjaCggcHJvcEV4cCApO1xuICAgICAgICAgICAgICAgIGlmICggbWF0Y2ggKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BOYW1lID0gbWF0Y2hbIDEgXS5yZXBsYWNlKCAvXlwiLywgJycgKS5yZXBsYWNlKCAvXCIkLywgXCJcIiApLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IG1hdGNoWyAyIF0ucmVwbGFjZSggL15cIi8sICcnICkucmVwbGFjZSggL1wiJC8sIFwiXCIgKS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZU5vZGVQcm9wZXJ0eSggbCwgcHJvcE5hbWUsIHByb3BWYWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGVuZCBvZiBub2RlXG4gICAgICAgICAgICAgICAgdmFyIGVuZE9mTm9kZUV4cCA9IG5ldyBSZWdFeHAoIFwiXlxcXFx0e1wiICsgKCB0aGlzLmN1cnJlbnRJbmRlbnQgLSAxICkgKyBcIn19XCIgKTtcbiAgICAgICAgICAgICAgICBpZiAoIGwubWF0Y2goIGVuZE9mTm9kZUV4cCApICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZUVuZCgpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGZvciBzcGVjaWFsIGNhc2UsXG4gICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAvL1x0ICBWZXJ0aWNlczogKjg2NzAge1xuICAgICAgICAgICAgICAgIC8vXHRcdCAgYTogMC4wMzU2MjI5OTUzNDY3ODQ2LDEzLjk1OTk3MzMzNTI2NjEsLTAuMzk5MTk2NzczLi4uLi4oc25pcClcbiAgICAgICAgICAgICAgICAvLyAtMC4wNjEyMDMwNTEzNTg0NjE0LDEzLjk2MDQ4NTQ1ODM3NCwtMC40MDk3NDg3MDMyNDEzNDgsLTAuMTAuLi4uLlxuICAgICAgICAgICAgICAgIC8vIDAuMTI0OTA1MzkyNTI3NTgsMTMuNzQ1MDczMzE4NDgxNCwtMC40NTQxMTkzODQyODg3ODgsMC4wOTI3Mi4uLi4uXG4gICAgICAgICAgICAgICAgLy8gMC4wODM2MTU4NzY3MzQyNTY3LDEzLjU0MzIwMDQ5Mjg1ODksLTAuNDM1Mzk3NDE2MzUzMjI2LDAuMDI4Li4uLi5cbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIC8vIHRoZXNlIGNhc2UgdGhlIGxpbmVzIG11c3QgY29udGl1ZSB3aXRoIHByZXZpb3VzIGxpbmVcbiAgICAgICAgICAgICAgICBpZiAoIGwubWF0Y2goIC9eW15cXHNcXHR9XS8gKSApIHtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlTm9kZVByb3BlcnR5Q29udGludWVkKCBsICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWxsTm9kZXM7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBwYXJzZU5vZGVCZWdpbjogZnVuY3Rpb24gKCBsaW5lLCBub2RlTmFtZSwgbm9kZUF0dHJzICkge1xuXG4gICAgICAgICAgICAvLyB2YXIgbm9kZU5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgIHZhciBub2RlOmFueSA9IHsgJ25hbWUnOiBub2RlTmFtZSwgcHJvcGVydGllczoge30sICdzdWJOb2Rlcyc6IHt9IH07XG4gICAgICAgICAgICB2YXIgYXR0cnMgPSB0aGlzLnBhcnNlTm9kZUF0dHIoIG5vZGVBdHRycyApO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnROb2RlID0gdGhpcy5nZXRDdXJyZW50Tm9kZSgpO1xuXG4gICAgICAgICAgICAvLyBhIHRvcCBub2RlXG4gICAgICAgICAgICBpZiAoIHRoaXMuY3VycmVudEluZGVudCA9PT0gMCApIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuYWxsTm9kZXMuYWRkKCBub2RlTmFtZSwgbm9kZSApO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgLy8gYSBzdWJub2RlXG5cbiAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGV4aXN0cyBzdWJub2RlLCB0aGVuIGFwcGVuZCBpdFxuICAgICAgICAgICAgICAgIGlmICggbm9kZU5hbWUgaW4gY3VycmVudE5vZGUuc3ViTm9kZXMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IGN1cnJlbnROb2RlLnN1Yk5vZGVzWyBub2RlTmFtZSBdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCBcImR1cGVkIGVudHJ5IGZvdW5kXFxua2V5OiBcIiArIG5vZGVOYW1lICsgXCJcXG52YWx1ZTogXCIgKyBwcm9wVmFsdWUgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLmlzRmxhdHRlbk5vZGUoIGN1cnJlbnROb2RlLnN1Yk5vZGVzWyBub2RlTmFtZSBdICkgKSB7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBhdHRycy5pZCA9PT0gJycgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5zdWJOb2Rlc1sgbm9kZU5hbWUgXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLnN1Yk5vZGVzWyBub2RlTmFtZSBdLnB1c2goIHRtcCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUuc3ViTm9kZXNbIG5vZGVOYW1lIF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5zdWJOb2Rlc1sgbm9kZU5hbWUgXVsgdG1wLmlkIF0gPSB0bXA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBhdHRycy5pZCA9PT0gJycgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLnN1Yk5vZGVzWyBub2RlTmFtZSBdLnB1c2goIG5vZGUgKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5zdWJOb2Rlc1sgbm9kZU5hbWUgXVsgYXR0cnMuaWQgXSA9IG5vZGU7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggdHlwZW9mIGF0dHJzLmlkID09PSAnbnVtYmVyJyB8fCBhdHRycy5pZC5tYXRjaCggL15cXGQrJC8gKSApIHtcblxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5zdWJOb2Rlc1sgbm9kZU5hbWUgXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5zdWJOb2Rlc1sgbm9kZU5hbWUgXVsgYXR0cnMuaWQgXSA9IG5vZGU7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLnN1Yk5vZGVzWyBub2RlTmFtZSBdID0gbm9kZTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBmb3IgdGhpc1x0XHQgIOKGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk+KGk1xuICAgICAgICAgICAgLy8gTm9kZUF0dHJpYnV0ZTogMTAwMTQ2MzA3MiwgXCJOb2RlQXR0cmlidXRlOjpcIiwgXCJMaW1iTm9kZVwiIHtcbiAgICAgICAgICAgIGlmICggbm9kZUF0dHJzICkge1xuXG4gICAgICAgICAgICAgICAgbm9kZS5pZCA9IGF0dHJzLmlkO1xuICAgICAgICAgICAgICAgIG5vZGUuYXR0ck5hbWUgPSBhdHRycy5uYW1lO1xuICAgICAgICAgICAgICAgIG5vZGUuYXR0clR5cGUgPSBhdHRycy50eXBlO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucHVzaFN0YWNrKCBub2RlICk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBwYXJzZU5vZGVBdHRyOiBmdW5jdGlvbiAoIGF0dHJzICkge1xuXG4gICAgICAgICAgICB2YXIgaWQgPSBhdHRyc1sgMCBdO1xuXG4gICAgICAgICAgICBpZiAoIGF0dHJzWyAwIF0gIT09IFwiXCIgKSB7XG5cbiAgICAgICAgICAgICAgICBpZCA9IHBhcnNlSW50KCBhdHRyc1sgMCBdICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIGlzTmFOKCBpZCApICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFBvbHlnb25WZXJ0ZXhJbmRleDogKjE2MzgwIHtcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBhdHRyc1sgMCBdO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBuYW1lO1xuICAgICAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgICAgICBpZiAoIGF0dHJzLmxlbmd0aCA+IDEgKSB7XG5cbiAgICAgICAgICAgICAgICBuYW1lID0gYXR0cnNbIDEgXS5yZXBsYWNlKCAvXihcXHcrKTo6LywgJycgKTtcbiAgICAgICAgICAgICAgICB0eXBlID0gYXR0cnNbIDIgXTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4geyBpZDogaWQsIG5hbWU6IG5hbWUgfHwgJycsIHR5cGU6IHR5cGUgfHwgJycgfTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIHBhcnNlTm9kZVByb3BlcnR5OiBmdW5jdGlvbiAoIGxpbmUsIHByb3BOYW1lLCBwcm9wVmFsdWUgKSB7XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50Tm9kZSA9IHRoaXMuZ2V0Q3VycmVudE5vZGUoKTtcbiAgICAgICAgICAgIHZhciBwYXJlbnROYW1lID0gY3VycmVudE5vZGUubmFtZTtcblxuICAgICAgICAgICAgLy8gc3BlY2lhbCBjYXNlIHBhcmVudCBub2RlJ3MgaXMgbGlrZSBcIlByb3BlcnRpZXM3MFwiXG4gICAgICAgICAgICAvLyB0aGVzZSBjaGlscmVuIG5vZGVzIG11c3QgdHJlYXQgd2l0aCBjYXJlZnVsXG4gICAgICAgICAgICBpZiAoIHBhcmVudE5hbWUgIT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgIHZhciBwcm9wTWF0Y2ggPSBwYXJlbnROYW1lLm1hdGNoKCAvUHJvcGVydGllcyhcXGQpKy8gKTtcbiAgICAgICAgICAgICAgICBpZiAoIHByb3BNYXRjaCApIHtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlTm9kZVNwZWNpYWxQcm9wZXJ0eSggbGluZSwgcHJvcE5hbWUsIHByb3BWYWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc3BlY2lhbCBjYXNlIENvbm5lY3Rpb25zXG4gICAgICAgICAgICBpZiAoIHByb3BOYW1lID09ICdDJyApIHtcblxuICAgICAgICAgICAgICAgIHZhciBjb25uUHJvcHMgPSBwcm9wVmFsdWUuc3BsaXQoICcsJyApLnNsaWNlKCAxICk7XG4gICAgICAgICAgICAgICAgdmFyIGZyb20gPSBwYXJzZUludCggY29ublByb3BzWyAwIF0gKTtcbiAgICAgICAgICAgICAgICB2YXIgdG8gPSBwYXJzZUludCggY29ublByb3BzWyAxIF0gKTtcblxuICAgICAgICAgICAgICAgIHZhciByZXN0ID0gcHJvcFZhbHVlLnNwbGl0KCAnLCcgKS5zbGljZSggMyApO1xuXG4gICAgICAgICAgICAgICAgcHJvcE5hbWUgPSAnY29ubmVjdGlvbnMnO1xuICAgICAgICAgICAgICAgIHByb3BWYWx1ZSA9IFsgZnJvbSwgdG8gXTtcbiAgICAgICAgICAgICAgICBwcm9wVmFsdWUgPSBwcm9wVmFsdWUuY29uY2F0KCByZXN0ICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIGN1cnJlbnROb2RlLnByb3BlcnRpZXNbIHByb3BOYW1lIF0gPT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5wcm9wZXJ0aWVzWyBwcm9wTmFtZSBdID0gW107XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc3BlY2lhbCBjYXNlIENvbm5lY3Rpb25zXG4gICAgICAgICAgICBpZiAoIHByb3BOYW1lID09ICdOb2RlJyApIHtcblxuICAgICAgICAgICAgICAgIHZhciBpZCA9IHBhcnNlSW50KCBwcm9wVmFsdWUgKTtcbiAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5wcm9wZXJ0aWVzLmlkID0gaWQ7XG4gICAgICAgICAgICAgICAgY3VycmVudE5vZGUuaWQgPSBpZDtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBhbHJlYWR5IGV4aXN0cyBpbiBwcm9wZXJ0aWVzLCB0aGVuIGFwcGVuZCB0aGlzXG4gICAgICAgICAgICBpZiAoIHByb3BOYW1lIGluIGN1cnJlbnROb2RlLnByb3BlcnRpZXMgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyggXCJkdXBlZCBlbnRyeSBmb3VuZFxcbmtleTogXCIgKyBwcm9wTmFtZSArIFwiXFxudmFsdWU6IFwiICsgcHJvcFZhbHVlICk7XG4gICAgICAgICAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KCBjdXJyZW50Tm9kZS5wcm9wZXJ0aWVzWyBwcm9wTmFtZSBdICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUucHJvcGVydGllc1sgcHJvcE5hbWUgXS5wdXNoKCBwcm9wVmFsdWUgKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUucHJvcGVydGllc1sgcHJvcE5hbWUgXSArPSBwcm9wVmFsdWU7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyggcHJvcE5hbWUgKyBcIjogIFwiICsgcHJvcFZhbHVlICk7XG4gICAgICAgICAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KCBjdXJyZW50Tm9kZS5wcm9wZXJ0aWVzWyBwcm9wTmFtZSBdICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUucHJvcGVydGllc1sgcHJvcE5hbWUgXS5wdXNoKCBwcm9wVmFsdWUgKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUucHJvcGVydGllc1sgcHJvcE5hbWUgXSA9IHByb3BWYWx1ZTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRQcm9wKCBjdXJyZW50Tm9kZS5wcm9wZXJ0aWVzLCBwcm9wTmFtZSApO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gVE9ETzpcbiAgICAgICAgcGFyc2VOb2RlUHJvcGVydHlDb250aW51ZWQ6IGZ1bmN0aW9uICggbGluZSApIHtcblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UHJvcFsgdGhpcy5jdXJyZW50UHJvcE5hbWUgXSArPSBsaW5lO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFyc2VOb2RlU3BlY2lhbFByb3BlcnR5OiBmdW5jdGlvbiAoIGxpbmUsIHByb3BOYW1lLCBwcm9wVmFsdWUgKSB7XG5cbiAgICAgICAgICAgIC8vIHNwbGl0IHRoaXNcbiAgICAgICAgICAgIC8vIFA6IFwiTGNsIFNjYWxpbmdcIiwgXCJMY2wgU2NhbGluZ1wiLCBcIlwiLCBcIkFcIiwxLDEsMVxuICAgICAgICAgICAgLy8gaW50byBhcnJheSBsaWtlIGJlbG93XG4gICAgICAgICAgICAvLyBbXCJMY2wgU2NhbGluZ1wiLCBcIkxjbCBTY2FsaW5nXCIsIFwiXCIsIFwiQVwiLCBcIjEsMSwxXCIgXVxuICAgICAgICAgICAgdmFyIHByb3BzID0gcHJvcFZhbHVlLnNwbGl0KCAnXCIsJyApLm1hcCggZnVuY3Rpb24gKCBlbGVtZW50ICkge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQudHJpbSgpLnJlcGxhY2UoIC9eXFxcIi8sICcnICkucmVwbGFjZSggL1xccy8sICdfJyApO1xuXG4gICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIHZhciBpbm5lclByb3BOYW1lID0gcHJvcHNbIDAgXTtcbiAgICAgICAgICAgIHZhciBpbm5lclByb3BUeXBlMSA9IHByb3BzWyAxIF07XG4gICAgICAgICAgICB2YXIgaW5uZXJQcm9wVHlwZTIgPSBwcm9wc1sgMiBdO1xuICAgICAgICAgICAgdmFyIGlubmVyUHJvcEZsYWcgPSBwcm9wc1sgMyBdO1xuICAgICAgICAgICAgdmFyIGlubmVyUHJvcFZhbHVlID0gcHJvcHNbIDQgXTtcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICBpZiAoIGlubmVyUHJvcFZhbHVlID09PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgaW5uZXJQcm9wVmFsdWUgPSBwcm9wc1szXTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgLy8gY2FzdCB2YWx1ZSBpbiBpdHMgdHlwZVxuICAgICAgICAgICAgc3dpdGNoICggaW5uZXJQcm9wVHlwZTEgKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFwiaW50XCI6XG4gICAgICAgICAgICAgICAgICAgIGlubmVyUHJvcFZhbHVlID0gcGFyc2VJbnQoIGlubmVyUHJvcFZhbHVlICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBcImRvdWJsZVwiOlxuICAgICAgICAgICAgICAgICAgICBpbm5lclByb3BWYWx1ZSA9IHBhcnNlRmxvYXQoIGlubmVyUHJvcFZhbHVlICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSBcIkNvbG9yUkdCXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIlZlY3RvcjNEXCI6XG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBpbm5lclByb3BWYWx1ZS5zcGxpdCggJywnICk7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyUHJvcFZhbHVlID0gbmV3IFRIUkVFLlZlY3RvcjMoIHRtcFsgMCBdLCB0bXBbIDEgXSwgdG1wWyAyIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ0FVVElPTjogdGhlc2UgcHJvcHMgbXVzdCBhcHBlbmQgdG8gcGFyZW50J3MgcGFyZW50XG4gICAgICAgICAgICB0aGlzLmdldFByZXZOb2RlKCkucHJvcGVydGllc1sgaW5uZXJQcm9wTmFtZSBdID0ge1xuXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiBpbm5lclByb3BUeXBlMSxcbiAgICAgICAgICAgICAgICAndHlwZTInOiBpbm5lclByb3BUeXBlMixcbiAgICAgICAgICAgICAgICAnZmxhZyc6IGlubmVyUHJvcEZsYWcsXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogaW5uZXJQcm9wVmFsdWVcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5zZXRDdXJyZW50UHJvcCggdGhpcy5nZXRQcmV2Tm9kZSgpLnByb3BlcnRpZXMsIGlubmVyUHJvcE5hbWUgKTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIG5vZGVFbmQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdGhpcy5wb3BTdGFjaygpO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAgICAgICAvKlx0XHR1dGlsXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQgICovXG4gICAgICAgIGlzRmxhdHRlbk5vZGU6IGZ1bmN0aW9uICggbm9kZSApIHtcblxuICAgICAgICAgICAgcmV0dXJuICggJ3N1Yk5vZGVzJyBpbiBub2RlICYmICdwcm9wZXJ0aWVzJyBpbiBub2RlICkgPyB0cnVlIDogZmFsc2U7XG5cbiAgICAgICAgfVxuXG4gICAgfSApO1xuXG4gICAgZnVuY3Rpb24gRkJYVHJlZSgpIHt9XG5cbiAgICBPYmplY3QuYXNzaWduKCBGQlhUcmVlLnByb3RvdHlwZSwge1xuXG4gICAgICAgIGFkZDogZnVuY3Rpb24gKCBrZXksIHZhbCApIHtcblxuICAgICAgICAgICAgdGhpc1sga2V5IF0gPSB2YWw7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBzZWFyY2hDb25uZWN0aW9uUGFyZW50OiBmdW5jdGlvbiAoIGlkICkge1xuXG4gICAgICAgICAgICBpZiAoIHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9wYXJlbnQgPT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9wYXJlbnQgPSBbXTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9wYXJlbnRbIGlkIF0gIT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fcGFyZW50WyBpZCBdO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX3BhcmVudFsgaWQgXSA9IFtdO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjb25ucyA9IHRoaXMuQ29ubmVjdGlvbnMucHJvcGVydGllcy5jb25uZWN0aW9ucztcblxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGNvbm5zLmxlbmd0aDsgKysgaSApIHtcblxuICAgICAgICAgICAgICAgIGlmICggY29ubnNbIGkgXVsgMCBdID09IGlkICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIDAgbWVhbnMgc2NlbmUgcm9vdFxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gY29ubnNbIGkgXVsgMSBdID09PSAwID8gLSAxIDogY29ubnNbIGkgXVsgMSBdO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goIHJlcyApO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggcmVzdWx0cy5sZW5ndGggPiAwICkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX3BhcmVudFsgaWQgXSA9IHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9wYXJlbnRbIGlkIF0uY29uY2F0KCByZXN1bHRzICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fcGFyZW50WyBpZCBdID0gWyAtIDEgXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWyAtIDEgXTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VhcmNoQ29ubmVjdGlvbkNoaWxkcmVuOiBmdW5jdGlvbiAoIGlkICkge1xuXG4gICAgICAgICAgICBpZiAoIHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl9jaGlsZHJlbiA9PT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX2NoaWxkcmVuID0gW107XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fY2hpbGRyZW5bIGlkIF0gIT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fY2hpbGRyZW5bIGlkIF07XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fY2hpbGRyZW5bIGlkIF0gPSBbXTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY29ubnMgPSB0aGlzLkNvbm5lY3Rpb25zLnByb3BlcnRpZXMuY29ubmVjdGlvbnM7XG5cbiAgICAgICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGNvbm5zLmxlbmd0aDsgKysgaSApIHtcblxuICAgICAgICAgICAgICAgIGlmICggY29ubnNbIGkgXVsgMSBdID09IGlkICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIDAgbWVhbnMgc2NlbmUgcm9vdFxuICAgICAgICAgICAgICAgICAgICByZXMucHVzaCggY29ubnNbIGkgXVsgMCBdID09PSAwID8gLSAxIDogY29ubnNbIGkgXVsgMCBdICk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIG1heSBtb3JlIHRoYW4gb25lIGtpZCwgdGhlbiBzZWFyY2ggdG8gdGhlIGVuZFxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggcmVzLmxlbmd0aCA+IDAgKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fY2hpbGRyZW5bIGlkIF0gPSB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fY2hpbGRyZW5bIGlkIF0uY29uY2F0KCByZXMgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX2NoaWxkcmVuWyBpZCBdID0gWyBdO1xuICAgICAgICAgICAgICAgIHJldHVybiBbIF07XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIHNlYXJjaENvbm5lY3Rpb25UeXBlOiBmdW5jdGlvbiAoIGlkLCB0byApIHtcblxuICAgICAgICAgICAgdmFyIGtleSA9IGlkICsgJywnICsgdG87IC8vIFRPRE86IHRvIGhhc2hcbiAgICAgICAgICAgIGlmICggdGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX3R5cGUgPT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl90eXBlID0ge307XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fdHlwZVsga2V5IF0gIT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fdHlwZVsga2V5IF07XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9fY2FjaGVfc2VhcmNoX2Nvbm5lY3Rpb25fdHlwZVsga2V5IF0gPSAnJztcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY29ubnMgPSB0aGlzLkNvbm5lY3Rpb25zLnByb3BlcnRpZXMuY29ubmVjdGlvbnM7XG5cbiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGNvbm5zLmxlbmd0aDsgKysgaSApIHtcblxuICAgICAgICAgICAgICAgIGlmICggY29ubnNbIGkgXVsgMCBdID09IGlkICYmIGNvbm5zWyBpIF1bIDEgXSA9PSB0byApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyAwIG1lYW5zIHNjZW5lIHJvb3RcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2NhY2hlX3NlYXJjaF9jb25uZWN0aW9uX3R5cGVbIGtleSBdID0gY29ubnNbIGkgXVsgMiBdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29ubnNbIGkgXVsgMiBdO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX19jYWNoZV9zZWFyY2hfY29ubmVjdGlvbl90eXBlWyBpZCBdID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgIH1cblxuICAgIH0gKTtcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzRmJ4Rm9ybWF0QVNDSUkoIHRleHQgKSB7XG5cbiAgICAgICAgdmFyIENPUlJFQ1QgPSBbICdLJywgJ2EnLCAneScsICdkJywgJ2EnLCAncicsICdhJywgJ1xcXFwnLCAnRicsICdCJywgJ1gnLCAnXFxcXCcsICdCJywgJ2knLCAnbicsICdhJywgJ3InLCAneScsICdcXFxcJywgJ1xcXFwnIF07XG5cbiAgICAgICAgdmFyIGN1cnNvciA9IDA7XG4gICAgICAgIHZhciByZWFkID0gZnVuY3Rpb24gKCBvZmZzZXQgKSB7XG5cbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0ZXh0WyBvZmZzZXQgLSAxIF07XG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZSggY3Vyc29yICsgb2Zmc2V0ICk7XG4gICAgICAgICAgICBjdXJzb3IgKys7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgQ09SUkVDVC5sZW5ndGg7ICsrIGkgKSB7XG5cbiAgICAgICAgICAgIHZhciBudW0gPSByZWFkKCAxICk7XG4gICAgICAgICAgICBpZiAoIG51bSA9PSBDT1JSRUNUWyBpIF0gKSB7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEZieFZlcnNpb24oIHRleHQgKSB7XG5cbiAgICAgICAgdmFyIHZlcnNpb25SZWdFeHAgPSAvRkJYVmVyc2lvbjogKFxcZCspLztcbiAgICAgICAgdmFyIG1hdGNoID0gdGV4dC5tYXRjaCggdmVyc2lvblJlZ0V4cCApO1xuICAgICAgICBpZiAoIG1hdGNoICkge1xuXG4gICAgICAgICAgICB2YXIgdmVyc2lvbiA9IHBhcnNlSW50KCBtYXRjaFsgMSBdICk7XG4gICAgICAgICAgICByZXR1cm4gdmVyc2lvbjtcblxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvciggJ0ZCWExvYWRlcjogQ2Fubm90IGZpbmQgdGhlIHZlcnNpb24gbnVtYmVyIGZvciB0aGUgZmlsZSBnaXZlbi4nICk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBGQlggdGlja3MgaW50byByZWFsIHRpbWUgc2Vjb25kcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSAtIEZCWCB0aWNrIHRpbWVzdGFtcCB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IC0gRkJYIHRpY2sgaW4gcmVhbCB3b3JsZCB0aW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbnZlcnRGQlhUaW1lVG9TZWNvbmRzKCB0aW1lICkge1xuXG4gICAgICAgIC8vIENvbnN0YW50IGlzIEZCWCB0aWNrcyBwZXIgc2Vjb25kLlxuICAgICAgICByZXR1cm4gdGltZSAvIDQ2MTg2MTU4MDAwO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIGZsb2F0IG51bWJlcnMgYW5kIHJldHVybnMgdGhlbSBpbiBhbiBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIFJldHVybnMgWyA1LjYsIDkuNCwgMi41LCAxLjQgXVxuICAgICAqIHBhcnNlRmxvYXRBcnJheSggXCI1LjYsOS40LDIuNSwxLjRcIiApXG4gICAgICogQHJldHVybnMge251bWJlcltdfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHBhcnNlRmxvYXRBcnJheSggZmxvYXRTdHJpbmcgKSB7XG5cbiAgICAgICAgcmV0dXJuIGZsb2F0U3RyaW5nLnNwbGl0KCAnLCcgKS5tYXAoIGZ1bmN0aW9uICggc3RyaW5nVmFsdWUgKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KCBzdHJpbmdWYWx1ZSApO1xuXG4gICAgICAgIH0gKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBjb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBpbnQgbnVtYmVycyBhbmQgcmV0dXJucyB0aGVtIGluIGFuIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICogLy8gUmV0dXJucyBbIDUsIDgsIDIsIDMgXVxuICAgICAqIHBhcnNlRmxvYXRBcnJheSggXCI1LDgsMiwzXCIgKVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJbXX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwYXJzZUludEFycmF5KCBpbnRTdHJpbmcgKSB7XG5cbiAgICAgICAgcmV0dXJuIGludFN0cmluZy5zcGxpdCggJywnICkubWFwKCBmdW5jdGlvbiAoIHN0cmluZ1ZhbHVlICkge1xuXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoIHN0cmluZ1ZhbHVlICk7XG5cbiAgICAgICAgfSApO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VNYXRyaXhBcnJheSggZmxvYXRTdHJpbmcgKSB7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBUSFJFRS5NYXRyaXg0KCkuZnJvbUFycmF5KCBwYXJzZUZsb2F0QXJyYXkoIGZsb2F0U3RyaW5nICkgKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIG51bWJlciBmcm9tIGRlZ3JlZXMgaW50byByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZGVncmVlVG9SYWRpYW4oIHZhbHVlICkge1xuXG4gICAgICAgIHJldHVybiB2YWx1ZSAqIE1hdGguUEkgLyAxODA7XG5cbiAgICB9XG5cbiJdfQ==
